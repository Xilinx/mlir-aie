rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 352 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x352x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x352x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x352x384_80x88x96_4rx4c.txt ../build/aie_320x352x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x352x384_80x88x96_4rx4c.xclbin -i build/insts_320x352x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 352 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x352x384
Sequence instr count: 276
Loading xclbin: build/final_320x352x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x352x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       100       -88        28       -48   ...       37        92        19       -48        53  
       0        92       108        -9        20   ...      -82        48       103        26        -9  
       0        50       -80       -25       -12   ...        6       -52        71       -92        -2  
       0        80        -8       -12       -84   ...      -76         8        11        50       -66  
    -128       -92        42        16      -124   ...       -6       -32       104       110       -89  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 0.00 s.

Avg NPU matmul time: 426.47us.
Avg NPU gflops: 202.85

Min NPU matmul time: 189.00us.
Max NPU gflops: 457.71

Max NPU matmul time: 819.00us.
Min NPU gflops: 105.63

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 352 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x352x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x352x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x352x1920_80x88x96_4rx4c.txt ../build/aie_320x352x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 352 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x352x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x352x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x352x3456_80x88x96_4rx4c.txt ../build/aie_320x352x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x352x3456_80x88x96_4rx4c.xclbin -i build/insts_320x352x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 352 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x352x3456
Sequence instr count: 276
Loading xclbin: build/final_320x352x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x352x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        69        82        78        48   ...       56      -124       -80       -76       112  
       0        49         8        -7         0   ...      -49       -84      -115         6       -86  
    -128        99        44       -75       124   ...       66        72        39      -102       -33  
       0       107        10        27       -76   ...      -51       -52         1      -108      -109  
       0        -5        10       -37       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 1163.22us.
Avg NPU gflops: 669.32

Min NPU matmul time: 403.00us.
Max NPU gflops: 1931.93

Max NPU matmul time: 3530.00us.
Min NPU gflops: 220.56

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 352 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x352x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x352x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x352x4992_80x88x96_4rx4c.txt ../build/aie_320x352x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x352x4992_80x88x96_4rx4c.xclbin -i build/insts_320x352x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 352 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x352x4992
Sequence instr count: 276
Loading xclbin: build/final_320x352x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x352x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        12       -66       -74        60   ...      111       -20       -72       -82       -96  
       0       124       -18         1        40   ...      -52        24        79        62      -104  
       0       -44        64       -64       -92   ...        0        24       122       -60        -9  
       0        69       -32       -72         0   ...       48       -84       113       -56        52  
       0        44       -52        21       -84   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 2326.98us.
Avg NPU gflops: 483.29

Min NPU matmul time: 534.00us.
Max NPU gflops: 2105.99

Max NPU matmul time: 3560.00us.
Min NPU gflops: 315.90

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 352 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x352x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x352x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x352x6528_80x88x96_4rx4c.txt ../build/aie_320x352x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x352x6528_80x88x96_4rx4c.xclbin -i build/insts_320x352x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 352 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x352x6528
Sequence instr count: 276
Loading xclbin: build/final_320x352x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x352x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        42       104       -60      -124   ...      -72        36       115      -108       -72  
       0      -108       -14        41        40   ...      -93        16        65      -120        32  
       0       -19       -28        35         8   ...      -32       -96       -88       118        20  
       0      -101        74       -53      -108   ...       10        44       -60       -90       -48  
    -128      -103       -34       -56        40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 2599.76us.
Avg NPU gflops: 565.68

Min NPU matmul time: 713.00us.
Max NPU gflops: 2062.59

Max NPU matmul time: 3844.00us.
Min NPU gflops: 382.58

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 1760 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x1760x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x1760x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x1760x384_80x88x96_4rx4c.txt ../build/aie_320x1760x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x1760x384_80x88x96_4rx4c.xclbin -i build/insts_320x1760x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 1760 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x1760x384
Sequence instr count: 276
Loading xclbin: build/final_320x1760x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x1760x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        66      -104       120       -16   ...       50       -28        -7       -98       -94  
       0      -118       -20       -33       -96   ...      -33         4      -116       -24        71  
    -128       -68      -118       -56      -112   ...     -126      -120        10       -48       -73  
       0       -81        10       127       -80   ...       31       -28        50       -14        -4  
    -128        72        -2        -2        72   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 0.00 s.

Avg NPU matmul time: 661.41us.
Avg NPU gflops: 653.96

Min NPU matmul time: 274.00us.
Max NPU gflops: 1578.60

Max NPU matmul time: 3175.00us.
Min NPU gflops: 136.23

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 1760 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x1760x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x1760x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x1760x1920_80x88x96_4rx4c.txt ../build/aie_320x1760x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x1760x1920_80x88x96_4rx4c.xclbin -i build/insts_320x1760x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 1760 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x1760x1920
Sequence instr count: 276
Loading xclbin: build/final_320x1760x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x1760x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       116       -20        79        28   ...      -82       -40        36       -36       -82  
       0        56       -88        16        92   ...     -122        24       -45       -62        61  
    -128       -28      -104       105       104   ...       63        92       -62      -102        91  
       0       -36      -124       -77       -24   ...      -84        88        78        10        92  
    -128        45        -8       -98        68   ...       97        52       104       118        51  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 620.78us.
Avg NPU gflops: 3483.82

Min NPU matmul time: 577.00us.
Max NPU gflops: 3748.16

Max NPU matmul time: 738.00us.
Min NPU gflops: 2930.47

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 1760 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x1760x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x1760x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x1760x3456_80x88x96_4rx4c.txt ../build/aie_320x1760x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x1760x3456_80x88x96_4rx4c.xclbin -i build/insts_320x1760x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 1760 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x1760x3456
Sequence instr count: 276
Loading xclbin: build/final_320x1760x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x1760x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        55      -104       -43       104   ...       16       -20       -11        98        94  
       0      -126        22      -127      -120   ...      -39       108        58       120        54  
       0       -37       -58       -13       -12   ...      -29      -116      -104        52       112  
       0       -59        46       109       104   ...     -102       -96       101       118       114  
       0        87      -108       115        80   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3023.89us.
Avg NPU gflops: 1287.36

Min NPU matmul time: 1141.00us.
Max NPU gflops: 3411.78

Max NPU matmul time: 4031.00us.
Min NPU gflops: 965.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 1760 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x1760x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x1760x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x1760x4992_80x88x96_4rx4c.txt ../build/aie_320x1760x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x1760x4992_80x88x96_4rx4c.xclbin -i build/insts_320x1760x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 1760 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x1760x4992
Sequence instr count: 276
Loading xclbin: build/final_320x1760x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x1760x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -69      -124        18         8   ...     -111       -52         2       -64       -64  
       0       -29         4        42       104   ...      115       112        -1       106        74  
    -128      -112       -64       115      -108   ...      -68       -64        66       100      -104  
       0      -111       116       127       112   ...      -52        76        10         8       -15  
       0        33        62      -127        72   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3148.41us.
Avg NPU gflops: 1785.98

Min NPU matmul time: 1592.00us.
Max NPU gflops: 3532.03

Max NPU matmul time: 4186.00us.
Min NPU gflops: 1343.28

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 1760 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x1760x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x1760x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x1760x6528_80x88x96_4rx4c.txt ../build/aie_320x1760x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x1760x6528_80x88x96_4rx4c.xclbin -i build/insts_320x1760x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 1760 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x1760x6528
Sequence instr count: 276
Loading xclbin: build/final_320x1760x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x1760x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -112       -54        74        24   ...       62        20        61       -54       -39  
       0       110      -106       -90       -52   ...      -14       116       112      -120       -42  
       0       122        34        24      -124   ...     -118        60       -15        20        73  
       0       -37        70       -57      -108   ...      125        40        71       104       -62  
       0        60        42        90        36   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3262.01us.
Avg NPU gflops: 2254.17

Min NPU matmul time: 1993.00us.
Max NPU gflops: 3689.48

Max NPU matmul time: 3931.00us.
Min NPU gflops: 1870.55

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 3168 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x3168x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x3168x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x3168x384_80x88x96_4rx4c.txt ../build/aie_320x3168x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x3168x384_80x88x96_4rx4c.xclbin -i build/insts_320x3168x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 3168 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x3168x384
Sequence instr count: 276
Loading xclbin: build/final_320x3168x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x3168x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        98        68        85         0   ...      -86        40         9        -8        29  
       0       -69       -62       118       -36   ...      -27        24       -12      -122        16  
       0        80         4       -69        36   ...      -49        16        94        78       105  
       0       -32       124        31        68   ...       44       -40       -55      -110        15  
    -128        99       118        69       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 1165.37us.
Avg NPU gflops: 668.09

Min NPU matmul time: 383.00us.
Max NPU gflops: 2032.81

Max NPU matmul time: 3566.00us.
Min NPU gflops: 218.33

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 3168 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x3168x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x3168x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x3168x1920_80x88x96_4rx4c.txt ../build/aie_320x3168x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x3168x1920_80x88x96_4rx4c.xclbin -i build/insts_320x3168x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 3168 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x3168x1920
Sequence instr count: 276
Loading xclbin: build/final_320x3168x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x3168x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        76        56         4       -16   ...       74       100       -67        -6        55  
       0        62       118        70        56   ...      -48         4        25       -62        24  
    -128       -90       -50       -54       104   ...       15        48       108        76       -17  
       0        -2       -34       -39       -88   ...        3       -76      -110        54        78  
    -128        58       124       120        28   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2672.63us.
Avg NPU gflops: 1456.56

Min NPU matmul time: 983.00us.
Max NPU gflops: 3960.16

Max NPU matmul time: 4155.00us.
Min NPU gflops: 936.90

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 3168 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x3168x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x3168x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x3168x3456_80x88x96_4rx4c.txt ../build/aie_320x3168x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x3168x3456_80x88x96_4rx4c.xclbin -i build/insts_320x3168x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 3168 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x3168x3456
Sequence instr count: 276
Loading xclbin: build/final_320x3168x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x3168x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -97        72       -43        88   ...      -92        12        90       -36        35  
       0        -1       -10       120       -24   ...      -29      -120        26        12         5  
    -128       -22        26       -55       -40   ...      -39       -28         9       -26        62  
       0       -25       -18       -75        68   ...      -71        60        55       -96        43  
    -128      -111       -32       -81        80   ...       12       -48       -28       -92      -105  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3296.77us.
Avg NPU gflops: 2125.45

Min NPU matmul time: 1644.00us.
Max NPU gflops: 4262.23

Max NPU matmul time: 4351.00us.
Min NPU gflops: 1610.46

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 3168 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x3168x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x3168x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x3168x4992_80x88x96_4rx4c.txt ../build/aie_320x3168x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x3168x4992_80x88x96_4rx4c.xclbin -i build/insts_320x3168x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 3168 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x3168x4992
Sequence instr count: 276
Loading xclbin: build/final_320x3168x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x3168x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128         4         2        33       -20   ...       97       -24       -89       126        34  
       0        96       -78       -23       -40   ...       23       -40        29       -34       122  
       0       -20       106      -120       -56   ...       13       -20       125        68       -87  
       0        29       124       -51        -4   ...      -75        16        72       114       -27  
       0       -28       -46       -26        80   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3296.79us.
Avg NPU gflops: 3070.07

Min NPU matmul time: 2314.00us.
Max NPU gflops: 4373.98

Max NPU matmul time: 4717.00us.
Min NPU gflops: 2145.72

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 3168 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x3168x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x3168x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x3168x6528_80x88x96_4rx4c.txt ../build/aie_320x3168x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x3168x6528_80x88x96_4rx4c.xclbin -i build/insts_320x3168x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 3168 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x3168x6528
Sequence instr count: 276
Loading xclbin: build/final_320x3168x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x3168x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -56      -120       -33       -28   ...       30        12       -78       104        50  
       0        77        48        -7       -16   ...       90       116        93        90        17  
    -128       -83       -28       112       -80   ...       42        92         3      -122       -95  
       0        34       114       -32        -8   ...     -105        40       -96      -112       -98  
    -128       -38      -118        89        72   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3380.56us.
Avg NPU gflops: 3915.22

Min NPU matmul time: 2935.00us.
Max NPU gflops: 4509.59

Max NPU matmul time: 5660.00us.
Min NPU gflops: 2338.45

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 4576 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x4576x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x4576x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x4576x384_80x88x96_4rx4c.txt ../build/aie_320x4576x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x4576x384_80x88x96_4rx4c.xclbin -i build/insts_320x4576x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 4576 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x4576x384
Sequence instr count: 276
Loading xclbin: build/final_320x4576x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x4576x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        53        16       -74        96   ...      -65       -48       -96        70       -71  
       0       -96      -108       -25      -108   ...     -121       -44      -117      -100      -122  
    -128        34       -76       -95       -28   ...       89        80       -73        42        31  
       0       -13        32        69       -28   ...      -14       -88        14       -80       -21  
    -128      -127        -8        29         8   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 1743.20us.
Avg NPU gflops: 645.13

Min NPU matmul time: 442.00us.
Max NPU gflops: 2544.34

Max NPU matmul time: 3634.00us.
Min NPU gflops: 309.47

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 4576 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x4576x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x4576x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x4576x1920_80x88x96_4rx4c.txt ../build/aie_320x4576x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x4576x1920_80x88x96_4rx4c.xclbin -i build/insts_320x4576x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 4576 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x4576x1920
Sequence instr count: 276
Loading xclbin: build/final_320x4576x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x4576x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        22       126       -59       -52   ...        0        -4       -89        14       102  
       0        80       102        51       -96   ...      -71       -16        74       -10         0  
       0       -51        86         6        56   ...       55       -64        62        -4        70  
       0       -31        -8       -31         0   ...       -3       -28      -117       -94        47  
       0       -60       -80       -82       124   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2900.78us.
Avg NPU gflops: 1938.44

Min NPU matmul time: 1243.00us.
Max NPU gflops: 4523.72

Max NPU matmul time: 3810.00us.
Min NPU gflops: 1475.85

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 4576 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x4576x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x4576x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x4576x3456_80x88x96_4rx4c.txt ../build/aie_320x4576x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x4576x3456_80x88x96_4rx4c.xclbin -i build/insts_320x4576x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 4576 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x4576x3456
Sequence instr count: 276
Loading xclbin: build/final_320x4576x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x4576x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -48       -86        14       -96   ...       28       104        -9        22        17  
       0        33       -18       -99        56   ...       44        80        44        90         7  
       0       -38       110       -77        96   ...       51        88       -74       -50        27  
       0       122       -42       -42        68   ...       88        56       -88        62        98  
    -128        -3         0       -44        72   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3410.45us.
Avg NPU gflops: 2967.75

Min NPU matmul time: 2400.00us.
Max NPU gflops: 4217.24

Max NPU matmul time: 4412.00us.
Min NPU gflops: 2294.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 4576 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x4576x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x4576x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x4576x4992_80x88x96_4rx4c.txt ../build/aie_320x4576x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x4576x4992_80x88x96_4rx4c.xclbin -i build/insts_320x4576x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 4576 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x4576x4992
Sequence instr count: 276
Loading xclbin: build/final_320x4576x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x4576x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        88        42       -93        84   ...      -61       -84       123       -26       103  
       0       100        34        15       -96   ...       25        24        59      -104       101  
       0       -89      -108        44       -96   ...      -33       -36        -7        80        87  
       0       -24        14        -1      -108   ...       67       -56        29       -76       -99  
    -128       -35       -32         0        96   ...       51       100       -67         6       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3525.31us.
Avg NPU gflops: 4147.09

Min NPU matmul time: 3106.00us.
Max NPU gflops: 4706.94

Max NPU matmul time: 4727.00us.
Min NPU gflops: 3092.82

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 4576 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x4576x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x4576x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x4576x6528_80x88x96_4rx4c.txt ../build/aie_320x4576x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x4576x6528_80x88x96_4rx4c.xclbin -i build/insts_320x4576x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 4576 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x4576x6528
Sequence instr count: 276
Loading xclbin: build/final_320x4576x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x4576x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       111       -72       101       -56   ...      -58       116       -90         6        26  
       0      -105       -44        99        56   ...      -45        -4      -125      -100       -35  
       0       -89       -90        44       -20   ...       -5       -28        64       -26         9  
       0       -73      -116       -42      -108   ...       64       -88      -107      -118      -124  
    -128       118         6       -31       -20   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5025.34us.
Avg NPU gflops: 3804.35

Min NPU matmul time: 4002.00us.
Max NPU gflops: 4777.15

Max NPU matmul time: 6730.00us.
Min NPU gflops: 2840.74

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 5984 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x5984x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x5984x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x5984x384_80x88x96_4rx4c.txt ../build/aie_320x5984x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x5984x384_80x88x96_4rx4c.xclbin -i build/insts_320x5984x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 5984 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x5984x384
Sequence instr count: 276
Loading xclbin: build/final_320x5984x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x5984x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -28       -60      -115        84   ...      -94        76        77        20       -10  
       0       -79       -98       -87       -88   ...      -94       -76      -121        96       104  
    -128       104        18       -54       124   ...      117       -20       -84      -108        54  
       0        77       -44       -71       -12   ...       53       116         0        50       114  
       0        48         4        57       -40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 1358.02us.
Avg NPU gflops: 1082.92

Min NPU matmul time: 540.00us.
Max NPU gflops: 2723.39

Max NPU matmul time: 3406.00us.
Min NPU gflops: 431.78

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 5984 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x5984x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x5984x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x5984x1920_80x88x96_4rx4c.txt ../build/aie_320x5984x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x5984x1920_80x88x96_4rx4c.xclbin -i build/insts_320x5984x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 5984 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x5984x1920
Sequence instr count: 276
Loading xclbin: build/final_320x5984x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x5984x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        24       104        42         8   ...      -22       -36        18        42        12  
       0        47       -74        29       104   ...      -20       -68       -67        -2        55  
       0       -14       -10      -113       120   ...      -70       -40        79       -44        77  
       0       -92       -42        99        60   ...       95       108        -3       100        18  
    -128        17        98       -33         8   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3224.86us.
Avg NPU gflops: 2280.14

Min NPU matmul time: 1626.00us.
Max NPU gflops: 4522.23

Max NPU matmul time: 4268.00us.
Min NPU gflops: 1722.85

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 5984 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x5984x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x5984x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x5984x3456_80x88x96_4rx4c.txt ../build/aie_320x5984x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x5984x3456_80x88x96_4rx4c.xclbin -i build/insts_320x5984x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 5984 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x5984x3456
Sequence instr count: 276
Loading xclbin: build/final_320x5984x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x5984x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        74       -92       -82        24   ...       75       -12       -34         2       113  
       0       -44       106      -121        68   ...      115       -20        83        98       -23  
    -128       -46       -92       -38        44   ...      -52       -96       -30      -114        54  
       0      -111       -46       -95       112   ...        7      -128       -16       -70      -121  
       0        33       -64        39        36   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3363.88us.
Avg NPU gflops: 3934.64

Min NPU matmul time: 2752.00us.
Max NPU gflops: 4809.47

Max NPU matmul time: 4245.00us.
Min NPU gflops: 3117.94

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 5984 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x5984x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x5984x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x5984x4992_80x88x96_4rx4c.txt ../build/aie_320x5984x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x5984x4992_80x88x96_4rx4c.xclbin -i build/insts_320x5984x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 5984 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x5984x4992
Sequence instr count: 276
Loading xclbin: build/final_320x5984x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x5984x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       117       -62        71       -84   ...     -117        36       116        24       -40  
       0        -2       -54       -99       -48   ...      -52       -36        45        68       -60  
    -128        41       -44      -108        32   ...       44        36       121       -44        90  
       0         0       -62        43        76   ...       83        52      -101        52      -125  
       0         7      -108       -66        36   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4929.09us.
Avg NPU gflops: 3878.64

Min NPU matmul time: 3907.00us.
Max NPU gflops: 4893.31

Max NPU matmul time: 6354.00us.
Min NPU gflops: 3008.84

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 5984 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x5984x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x5984x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x5984x6528_80x88x96_4rx4c.txt ../build/aie_320x5984x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x5984x6528_80x88x96_4rx4c.xclbin -i build/insts_320x5984x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 5984 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x5984x6528
Sequence instr count: 276
Loading xclbin: build/final_320x5984x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x5984x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        -1        58        59        56   ...      -80        52        77       -26      -119  
       0       -17         2        45       -28   ...     -112        72        11        62       -43  
       0        10        60       -77      -104   ...      -66        48        81       108        97  
       0       -15        86      -102        76   ...      -39       -96       -92        42        93  
    -128       104       -86       -91       -44   ...       87       -72      -117       -54        99  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6119.75us.
Avg NPU gflops: 4085.24

Min NPU matmul time: 5199.00us.
Max NPU gflops: 4808.75

Max NPU matmul time: 8187.00us.
Min NPU gflops: 3053.70

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 7392 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x7392x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x7392x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x7392x384_80x88x96_4rx4c.txt ../build/aie_320x7392x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x7392x384_80x88x96_4rx4c.xclbin -i build/insts_320x7392x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 7392 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x7392x384
Sequence instr count: 276
Loading xclbin: build/final_320x7392x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x7392x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       -44      -103        16   ...      -91        92        96       -92       -19  
       0       -29        76        13        80   ...       74        -8        36       104        24  
    -128       -14        60        22      -112   ...     -116       -44       -95      -112        60  
       0        34        58        75        48   ...       17        32       -19       -32        46  
       0       -32        96        87        28   ...       52       -96      -113       110       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 2160.56us.
Avg NPU gflops: 840.83

Min NPU matmul time: 565.00us.
Max NPU gflops: 3215.32

Max NPU matmul time: 3656.00us.
Min NPU gflops: 496.90

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 7392 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x7392x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x7392x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x7392x1920_80x88x96_4rx4c.txt ../build/aie_320x7392x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x7392x1920_80x88x96_4rx4c.xclbin -i build/insts_320x7392x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 7392 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x7392x1920
Sequence instr count: 276
Loading xclbin: build/final_320x7392x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x7392x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        74       -60      -121        64   ...      108      -124         3      -114       -14  
       0       -49       -84        99        80   ...     -125       108       -65      -124       106  
       0       104       110      -104       -32   ...      105        16         3       -20        92  
       0        65        78      -117        80   ...       54       -64       -73      -100      -104  
       0        98        48       -29       -24   ...      -91       -76        84       -56        86  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3196.41us.
Avg NPU gflops: 2841.72

Min NPU matmul time: 1954.00us.
Max NPU gflops: 4648.56

Max NPU matmul time: 4557.00us.
Min NPU gflops: 1993.26

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 7392 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x7392x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x7392x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x7392x3456_80x88x96_4rx4c.txt ../build/aie_320x7392x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x7392x3456_80x88x96_4rx4c.xclbin -i build/insts_320x7392x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 7392 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x7392x3456
Sequence instr count: 276
Loading xclbin: build/final_320x7392x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x7392x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        75        62       -32         4   ...      -32        -4       -33         0       -16  
       0      -100        42       120       -96   ...      -40         4       117       100       -11  
       0        24       -54       -65       -48   ...      120       -44        69       -70       107  
       0        95         4       -31        28   ...       60      -100      -108       -82      -116  
       0        76       -70       -94        64   ...       76       -96      -104       -66        41  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3758.19us.
Avg NPU gflops: 4350.48

Min NPU matmul time: 3294.00us.
Max NPU gflops: 4963.55

Max NPU matmul time: 4945.00us.
Min NPU gflops: 3306.35

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 7392 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x7392x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x7392x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x7392x4992_80x88x96_4rx4c.txt ../build/aie_320x7392x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x7392x4992_80x88x96_4rx4c.xclbin -i build/insts_320x7392x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 7392 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x7392x4992
Sequence instr count: 276
Loading xclbin: build/final_320x7392x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x7392x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -38        -8       -12       -12   ...       95        84       -98       -58       -35  
       0       -50         2        75       120   ...       87         0        73       106        39  
    -128        14       -18       119       -96   ...      104        68       -57       -50       -88  
       0       -72         4      -112        80   ...      -25       -36       -36       -28       -94  
    -128       -38       -96       119       108   ...        2        20       -57        34       -23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5876.50us.
Avg NPU gflops: 4018.81

Min NPU matmul time: 4801.00us.
Max NPU gflops: 4919.09

Max NPU matmul time: 7462.00us.
Min NPU gflops: 3164.91

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 320 -K 7392 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_320x7392x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_320x7392x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_320x7392x6528_80x88x96_4rx4c.txt ../build/aie_320x7392x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_320x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_320x7392x6528_80x88x96_4rx4c.xclbin -i build/insts_320x7392x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 320 -K 7392 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 320x7392x6528
Sequence instr count: 276
Loading xclbin: build/final_320x7392x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_320x7392x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        40       -90        29       -12   ...      -45      -104        93        14        46  
       0      -128        82        93      -104   ...      125       108       -20      -128       127  
       0       -90       -22        62        96   ...      113       -24       -89       -54         7  
       0        23       -10        64        40   ...       70         8        29      -102       -17  
    -128        97        52       -39        12   ...       39       -28       114        -6      -124  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7542.77us.
Avg NPU gflops: 4094.41

Min NPU matmul time: 6460.00us.
Max NPU gflops: 4780.68

Max NPU matmul time: 10795.00us.
Min NPU gflops: 2860.88

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 352 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x352x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x352x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x352x384_80x88x96_4rx4c.txt ../build/aie_1600x352x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 352 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x352x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x352x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x352x1920_80x88x96_4rx4c.txt ../build/aie_1600x352x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x352x1920_80x88x96_4rx4c.xclbin -i build/insts_1600x352x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 352 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x352x1920
Sequence instr count: 1140
Loading xclbin: build/final_1600x352x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x352x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        32        28       -48      -124   ...       88       -60       -46         0       125  
       0       -10        44       -57        24   ...      125       -88       -88        80        -6  
    -128        -1        66       101        24   ...        8       -60        29        24        84  
       0        -9        58      -100       124   ...      -72       -48       -70       -84       -42  
       0        66      -104       120       -16   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 1516.08us.
Avg NPU gflops: 1426.50

Min NPU matmul time: 641.00us.
Max NPU gflops: 3373.93

Max NPU matmul time: 3711.00us.
Min NPU gflops: 582.78

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 352 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x352x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x352x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x352x3456_80x88x96_4rx4c.txt ../build/aie_1600x352x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x352x3456_80x88x96_4rx4c.xclbin -i build/insts_1600x352x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 352 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x352x3456
Sequence instr count: 1140
Loading xclbin: build/final_1600x352x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x352x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        69        82        78        48   ...       56      -124       -80       -76       112  
       0        49         8        -7         0   ...      -49       -84      -115         6       -86  
    -128        99        44       -75       124   ...       66        72        39      -102       -33  
       0       107        10        27       -76   ...      -51       -52         1      -108      -109  
       0        -5        10       -37       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3097.25us.
Avg NPU gflops: 1256.87

Min NPU matmul time: 1144.00us.
Max NPU gflops: 3402.83

Max NPU matmul time: 4045.00us.
Min NPU gflops: 962.38

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 352 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x352x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x352x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x352x4992_80x88x96_4rx4c.txt ../build/aie_1600x352x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x352x4992_80x88x96_4rx4c.xclbin -i build/insts_1600x352x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 352 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x352x4992
Sequence instr count: 1140
Loading xclbin: build/final_1600x352x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x352x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        12       -66       -74        60   ...      111       -20       -72       -82       -96  
       0       124       -18         1        40   ...      -52        24        79        62      -104  
       0       -44        64       -64       -92   ...        0        24       122       -60        -9  
       0        69       -32       -72         0   ...       48       -84       113       -56        52  
       0        44       -52        21       -84   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3219.60us.
Avg NPU gflops: 1746.49

Min NPU matmul time: 1980.00us.
Max NPU gflops: 2839.89

Max NPU matmul time: 4494.00us.
Min NPU gflops: 1251.22

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 352 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x352x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x352x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x352x6528_80x88x96_4rx4c.txt ../build/aie_1600x352x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x352x6528_80x88x96_4rx4c.xclbin -i build/insts_1600x352x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 352 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x352x6528
Sequence instr count: 1140
Loading xclbin: build/final_1600x352x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x352x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        42       104       -60      -124   ...      -72        36       115      -108       -72  
       0      -108       -14        41        40   ...      -93        16        65      -120        32  
       0       -19       -28        35         8   ...      -32       -96       -88       118        20  
       0      -101        74       -53      -108   ...       10        44       -60       -90       -48  
    -128      -103       -34       -56        40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3329.43us.
Avg NPU gflops: 2208.53

Min NPU matmul time: 2588.00us.
Max NPU gflops: 2841.24

Max NPU matmul time: 4733.00us.
Min NPU gflops: 1553.59

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 1760 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x1760x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x1760x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x1760x384_80x88x96_4rx4c.txt ../build/aie_1600x1760x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x1760x384_80x88x96_4rx4c.xclbin -i build/insts_1600x1760x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 1760 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x1760x384
Sequence instr count: 1140
Loading xclbin: build/final_1600x1760x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x1760x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        66      -104       120       -16   ...       50       -28        -7       -98       -94  
       0      -118       -20       -33       -96   ...      -33         4      -116       -24        71  
    -128       -68      -118       -56      -112   ...     -126      -120        10       -48       -73  
       0       -81        10       127       -80   ...       31       -28        50       -14        -4  
    -128        72        -2        -2        72   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 708.65us.
Avg NPU gflops: 3051.84

Min NPU matmul time: 586.00us.
Max NPU gflops: 3690.59

Max NPU matmul time: 3438.00us.
Min NPU gflops: 629.05

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 1760 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x1760x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x1760x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x1760x1920_80x88x96_4rx4c.txt ../build/aie_1600x1760x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x1760x1920_80x88x96_4rx4c.xclbin -i build/insts_1600x1760x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 1760 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x1760x1920
Sequence instr count: 1140
Loading xclbin: build/final_1600x1760x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x1760x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       116       -20        79        28   ...      -82       -40        36       -36       -82  
       0        56       -88        16        92   ...     -122        24       -45       -62        61  
    -128       -28      -104       105       104   ...       63        92       -62      -102        91  
       0       -36      -124       -77       -24   ...      -84        88        78        10        92  
    -128        45        -8       -98        68   ...       97        52       104       118        51  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3275.17us.
Avg NPU gflops: 3301.64

Min NPU matmul time: 2328.00us.
Max NPU gflops: 4644.95

Max NPU matmul time: 3972.00us.
Min NPU gflops: 2722.42

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 1760 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x1760x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x1760x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x1760x3456_80x88x96_4rx4c.txt ../build/aie_1600x1760x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x1760x3456_80x88x96_4rx4c.xclbin -i build/insts_1600x1760x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 1760 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x1760x3456
Sequence instr count: 1140
Loading xclbin: build/final_1600x1760x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x1760x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        55      -104       -43       104   ...       16       -20       -11        98        94  
       0      -126        22      -127      -120   ...      -39       108        58       120        54  
       0       -37       -58       -13       -12   ...      -29      -116      -104        52       112  
       0       -59        46       109       104   ...     -102       -96       101       118       114  
       0        87      -108       115        80   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4959.77us.
Avg NPU gflops: 3924.41

Min NPU matmul time: 3913.00us.
Max NPU gflops: 4974.24

Max NPU matmul time: 7161.00us.
Min NPU gflops: 2718.08

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 1760 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x1760x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x1760x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x1760x4992_80x88x96_4rx4c.txt ../build/aie_1600x1760x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x1760x4992_80x88x96_4rx4c.xclbin -i build/insts_1600x1760x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 1760 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x1760x4992
Sequence instr count: 1140
Loading xclbin: build/final_1600x1760x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x1760x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -69      -124        18         8   ...     -111       -52         2       -64       -64  
       0       -29         4        42       104   ...      115       112        -1       106        74  
    -128      -112       -64       115      -108   ...      -68       -64        66       100      -104  
       0      -111       116       127       112   ...      -52        76        10         8       -15  
       0        33        62      -127        72   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6718.02us.
Avg NPU gflops: 4185.00

Min NPU matmul time: 5680.00us.
Max NPU gflops: 4949.81

Max NPU matmul time: 9123.00us.
Min NPU gflops: 3081.77

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 1760 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x1760x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x1760x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x1760x6528_80x88x96_4rx4c.txt ../build/aie_1600x1760x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x1760x6528_80x88x96_4rx4c.xclbin -i build/insts_1600x1760x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 1760 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x1760x6528
Sequence instr count: 1140
Loading xclbin: build/final_1600x1760x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x1760x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -112       -54        74        24   ...       62        20        61       -54       -39  
       0       110      -106       -90       -52   ...      -14       116       112      -120       -42  
       0       122        34        24      -124   ...     -118        60       -15        20        73  
       0       -37        70       -57      -108   ...      125        40        71       104       -62  
       0        60        42        90        36   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 8501.78us.
Avg NPU gflops: 4324.47

Min NPU matmul time: 7449.00us.
Max NPU gflops: 4935.66

Max NPU matmul time: 10838.00us.
Min NPU gflops: 3392.30

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 3168 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x3168x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x3168x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x3168x384_80x88x96_4rx4c.txt ../build/aie_1600x3168x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x3168x384_80x88x96_4rx4c.xclbin -i build/insts_1600x3168x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 3168 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x3168x384
Sequence instr count: 1140
Loading xclbin: build/final_1600x3168x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x3168x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        98        68        85         0   ...      -86        40         9        -8        29  
       0       -69       -62       118       -36   ...      -27        24       -12      -122        16  
       0        80         4       -69        36   ...      -49        16        94        78       105  
       0       -32       124        31        68   ...       44       -40       -55      -110        15  
    -128        99       118        69       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2694.79us.
Avg NPU gflops: 1444.58

Min NPU matmul time: 926.00us.
Max NPU gflops: 4203.93

Max NPU matmul time: 3913.00us.
Min NPU gflops: 994.85

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 3168 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x3168x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x3168x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x3168x1920_80x88x96_4rx4c.txt ../build/aie_1600x3168x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x3168x1920_80x88x96_4rx4c.xclbin -i build/insts_1600x3168x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 3168 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x3168x1920
Sequence instr count: 1140
Loading xclbin: build/final_1600x3168x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x3168x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        76        56         4       -16   ...       74       100       -67        -6        55  
       0        62       118        70        56   ...      -48         4        25       -62        24  
    -128       -90       -50       -54       104   ...       15        48       108        76       -17  
       0        -2       -34       -39       -88   ...        3       -76      -110        54        78  
    -128        58       124       120        28   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4735.64us.
Avg NPU gflops: 4110.15

Min NPU matmul time: 3742.00us.
Max NPU gflops: 5201.55

Max NPU matmul time: 6938.00us.
Min NPU gflops: 2805.45

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 3168 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x3168x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x3168x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x3168x3456_80x88x96_4rx4c.txt ../build/aie_1600x3168x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x3168x3456_80x88x96_4rx4c.xclbin -i build/insts_1600x3168x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 3168 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x3168x3456
Sequence instr count: 1140
Loading xclbin: build/final_1600x3168x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x3168x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -97        72       -43        88   ...      -92        12        90       -36        35  
       0        -1       -10       120       -24   ...      -29      -120        26        12         5  
    -128       -22        26       -55       -40   ...      -39       -28         9       -26        62  
       0       -25       -18       -75        68   ...      -71        60        55       -96        43  
    -128      -111       -32       -81        80   ...       12       -48       -28       -92      -105  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7250.44us.
Avg NPU gflops: 4832.20

Min NPU matmul time: 6745.00us.
Max NPU gflops: 5194.30

Max NPU matmul time: 8681.00us.
Min NPU gflops: 4035.89

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 3168 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x3168x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x3168x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x3168x4992_80x88x96_4rx4c.txt ../build/aie_1600x3168x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x3168x4992_80x88x96_4rx4c.xclbin -i build/insts_1600x3168x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 3168 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x3168x4992
Sequence instr count: 1140
Loading xclbin: build/final_1600x3168x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x3168x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128         4         2        33       -20   ...       97       -24       -89       126        34  
       0        96       -78       -23       -40   ...       23       -40        29       -34       122  
       0       -20       106      -120       -56   ...       13       -20       125        68       -87  
       0        29       124       -51        -4   ...      -75        16        72       114       -27  
       0       -28       -46       -26        80   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 10649.47us.
Avg NPU gflops: 4752.06

Min NPU matmul time: 9308.00us.
Max NPU gflops: 5436.93

Max NPU matmul time: 12818.00us.
Min NPU gflops: 3948.11

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 3168 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x3168x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x3168x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x3168x6528_80x88x96_4rx4c.txt ../build/aie_1600x3168x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x3168x6528_80x88x96_4rx4c.xclbin -i build/insts_1600x3168x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 3168 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x3168x6528
Sequence instr count: 1140
Loading xclbin: build/final_1600x3168x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x3168x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -56      -120       -33       -28   ...       30        12       -78       104        50  
       0        77        48        -7       -16   ...       90       116        93        90        17  
    -128       -83       -28       112       -80   ...       42        92         3      -122       -95  
       0        34       114       -32        -8   ...     -105        40       -96      -112       -98  
    -128       -38      -118        89        72   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 14169.15us.
Avg NPU gflops: 4670.59

Min NPU matmul time: 13215.00us.
Max NPU gflops: 5007.81

Max NPU matmul time: 17014.00us.
Min NPU gflops: 3889.64

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 4576 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x4576x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x4576x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x4576x384_80x88x96_4rx4c.txt ../build/aie_1600x4576x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x4576x384_80x88x96_4rx4c.xclbin -i build/insts_1600x4576x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 4576 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x4576x384
Sequence instr count: 1140
Loading xclbin: build/final_1600x4576x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x4576x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        53        16       -74        96   ...      -65       -48       -96        70       -71  
       0       -96      -108       -25      -108   ...     -121       -44      -117      -100      -122  
    -128        34       -76       -95       -28   ...       89        80       -73        42        31  
       0       -13        32        69       -28   ...      -14       -88        14       -80       -21  
    -128      -127        -8        29         8   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3287.60us.
Avg NPU gflops: 1710.36

Min NPU matmul time: 1272.00us.
Max NPU gflops: 4420.59

Max NPU matmul time: 4025.00us.
Min NPU gflops: 1397.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 4576 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x4576x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x4576x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x4576x1920_80x88x96_4rx4c.txt ../build/aie_1600x4576x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x4576x1920_80x88x96_4rx4c.xclbin -i build/insts_1600x4576x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 4576 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x4576x1920
Sequence instr count: 1140
Loading xclbin: build/final_1600x4576x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x4576x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        22       126       -59       -52   ...        0        -4       -89        14       102  
       0        80       102        51       -96   ...      -71       -16        74       -10         0  
       0       -51        86         6        56   ...       55       -64        62        -4        70  
       0       -31        -8       -31         0   ...       -3       -28      -117       -94        47  
       0       -60       -80       -82       124   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6250.85us.
Avg NPU gflops: 4497.78

Min NPU matmul time: 5338.00us.
Max NPU gflops: 5266.94

Max NPU matmul time: 7901.00us.
Min NPU gflops: 3558.40

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 4576 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x4576x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x4576x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x4576x3456_80x88x96_4rx4c.txt ../build/aie_1600x4576x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x4576x3456_80x88x96_4rx4c.xclbin -i build/insts_1600x4576x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 4576 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x4576x3456
Sequence instr count: 1140
Loading xclbin: build/final_1600x4576x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x4576x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -48       -86        14       -96   ...       28       104        -9        22        17  
       0        33       -18       -99        56   ...       44        80        44        90         7  
       0       -38       110       -77        96   ...       51        88       -74       -50        27  
       0       122       -42       -42        68   ...       88        56       -88        62        98  
    -128        -3         0       -44        72   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 10343.96us.
Avg NPU gflops: 4892.41

Min NPU matmul time: 9663.00us.
Max NPU gflops: 5237.18

Max NPU matmul time: 11971.00us.
Min NPU gflops: 4227.46

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 4576 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x4576x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x4576x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x4576x4992_80x88x96_4rx4c.txt ../build/aie_1600x4576x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x4576x4992_80x88x96_4rx4c.xclbin -i build/insts_1600x4576x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 4576 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x4576x4992
Sequence instr count: 1140
Loading xclbin: build/final_1600x4576x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x4576x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        88        42       -93        84   ...      -61       -84       123       -26       103  
       0       100        34        15       -96   ...       25        24        59      -104       101  
       0       -89      -108        44       -96   ...      -33       -36        -7        80        87  
       0       -24        14        -1      -108   ...       67       -56        29       -76       -99  
    -128       -35       -32         0        96   ...       51       100       -67         6       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 15739.69us.
Avg NPU gflops: 4644.24

Min NPU matmul time: 14375.00us.
Max NPU gflops: 5085.14

Max NPU matmul time: 17797.00us.
Min NPU gflops: 4107.37

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 4576 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x4576x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x4576x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x4576x6528_80x88x96_4rx4c.txt ../build/aie_1600x4576x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x4576x6528_80x88x96_4rx4c.xclbin -i build/insts_1600x4576x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 4576 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x4576x6528
Sequence instr count: 1140
Loading xclbin: build/final_1600x4576x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x4576x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       111       -72       101       -56   ...      -58       116       -90         6        26  
       0      -105       -44        99        56   ...      -45        -4      -125      -100       -35  
       0       -89       -90        44       -20   ...       -5       -28        64       -26         9  
       0       -73      -116       -42      -108   ...       64       -88      -107      -118      -124  
    -128       118         6       -31       -20   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 20062.82us.
Avg NPU gflops: 4764.57

Min NPU matmul time: 17553.00us.
Max NPU gflops: 5445.84

Max NPU matmul time: 22083.00us.
Min NPU gflops: 4328.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 5984 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x5984x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x5984x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x5984x384_80x88x96_4rx4c.txt ../build/aie_1600x5984x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x5984x384_80x88x96_4rx4c.xclbin -i build/insts_1600x5984x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 5984 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x5984x384
Sequence instr count: 1140
Loading xclbin: build/final_1600x5984x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x5984x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -28       -60      -115        84   ...      -94        76        77        20       -10  
       0       -79       -98       -87       -88   ...      -94       -76      -121        96       104  
    -128       104        18       -54       124   ...      117       -20       -84      -108        54  
       0        77       -44       -71       -12   ...       53       116         0        50       114  
       0        48         4        57       -40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3075.32us.
Avg NPU gflops: 2391.02

Min NPU matmul time: 1498.00us.
Max NPU gflops: 4908.64

Max NPU matmul time: 4189.00us.
Min NPU gflops: 1755.34

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 5984 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x5984x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x5984x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x5984x1920_80x88x96_4rx4c.txt ../build/aie_1600x5984x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x5984x1920_80x88x96_4rx4c.xclbin -i build/insts_1600x5984x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 5984 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x5984x1920
Sequence instr count: 1140
Loading xclbin: build/final_1600x5984x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x5984x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        24       104        42         8   ...      -22       -36        18        42        12  
       0        47       -74        29       104   ...      -20       -68       -67        -2        55  
       0       -14       -10      -113       120   ...      -70       -40        79       -44        77  
       0       -92       -42        99        60   ...       95       108        -3       100        18  
    -128        17        98       -33         8   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7521.16us.
Avg NPU gflops: 4888.30

Min NPU matmul time: 6783.00us.
Max NPU gflops: 5420.27

Max NPU matmul time: 8688.00us.
Min NPU gflops: 4231.78

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 5984 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x5984x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x5984x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x5984x3456_80x88x96_4rx4c.txt ../build/aie_1600x5984x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x5984x3456_80x88x96_4rx4c.xclbin -i build/insts_1600x5984x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 5984 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x5984x3456
Sequence instr count: 1140
Loading xclbin: build/final_1600x5984x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x5984x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        74       -92       -82        24   ...       75       -12       -34         2       113  
       0       -44       106      -121        68   ...      115       -20        83        98       -23  
    -128       -46       -92       -38        44   ...      -52       -96       -30      -114        54  
       0      -111       -46       -95       112   ...        7      -128       -16       -70      -121  
       0        33       -64        39        36   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13604.99us.
Avg NPU gflops: 4864.26

Min NPU matmul time: 12469.00us.
Max NPU gflops: 5307.42

Max NPU matmul time: 16016.00us.
Min NPU gflops: 4132.01

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 5984 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x5984x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x5984x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x5984x4992_80x88x96_4rx4c.txt ../build/aie_1600x5984x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x5984x4992_80x88x96_4rx4c.xclbin -i build/insts_1600x5984x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 5984 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x5984x4992
Sequence instr count: 1140
Loading xclbin: build/final_1600x5984x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x5984x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       117       -62        71       -84   ...     -117        36       116        24       -40  
       0        -2       -54       -99       -48   ...      -52       -36        45        68       -60  
    -128        41       -44      -108        32   ...       44        36       121       -44        90  
       0         0       -62        43        76   ...       83        52      -101        52      -125  
       0         7      -108       -66        36   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 19705.05us.
Avg NPU gflops: 4851.08

Min NPU matmul time: 18422.00us.
Max NPU gflops: 5188.95

Max NPU matmul time: 21833.00us.
Min NPU gflops: 4378.27

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 5984 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x5984x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x5984x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x5984x6528_80x88x96_4rx4c.txt ../build/aie_1600x5984x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x5984x6528_80x88x96_4rx4c.xclbin -i build/insts_1600x5984x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 5984 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x5984x6528
Sequence instr count: 1140
Loading xclbin: build/final_1600x5984x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x5984x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        -1        58        59        56   ...      -80        52        77       -26      -119  
       0       -17         2        45       -28   ...     -112        72        11        62       -43  
       0        10        60       -77      -104   ...      -66        48        81       108        97  
       0       -15        86      -102        76   ...      -39       -96       -92        42        93  
    -128       104       -86       -91       -44   ...       87       -72      -117       -54        99  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 25221.12us.
Avg NPU gflops: 4956.30

Min NPU matmul time: 24050.00us.
Max NPU gflops: 5197.65

Max NPU matmul time: 27436.00us.
Min NPU gflops: 4556.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 7392 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x7392x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x7392x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x7392x384_80x88x96_4rx4c.txt ../build/aie_1600x7392x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x7392x384_80x88x96_4rx4c.xclbin -i build/insts_1600x7392x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 7392 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x7392x384
Sequence instr count: 1140
Loading xclbin: build/final_1600x7392x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x7392x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       -44      -103        16   ...      -91        92        96       -92       -19  
       0       -29        76        13        80   ...       74        -8        36       104        24  
    -128       -14        60        22      -112   ...     -116       -44       -95      -112        60  
       0        34        58        75        48   ...       17        32       -19       -32        46  
       0       -32        96        87        28   ...       52       -96      -113       110       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3239.58us.
Avg NPU gflops: 2803.85

Min NPU matmul time: 1824.00us.
Max NPU gflops: 4979.87

Max NPU matmul time: 4531.00us.
Min NPU gflops: 2004.70

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 7392 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x7392x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x7392x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x7392x1920_80x88x96_4rx4c.txt ../build/aie_1600x7392x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x7392x1920_80x88x96_4rx4c.xclbin -i build/insts_1600x7392x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 7392 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x7392x1920
Sequence instr count: 1140
Loading xclbin: build/final_1600x7392x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x7392x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        74       -60      -121        64   ...      108      -124         3      -114       -14  
       0       -49       -84        99        80   ...     -125       108       -65      -124       106  
       0       104       110      -104       -32   ...      105        16         3       -20        92  
       0        65        78      -117        80   ...       54       -64       -73      -100      -104  
       0        98        48       -29       -24   ...      -91       -76        84       -56        86  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9431.98us.
Avg NPU gflops: 4815.16

Min NPU matmul time: 8379.00us.
Max NPU gflops: 5420.27

Max NPU matmul time: 11980.00us.
Min NPU gflops: 3791.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 7392 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x7392x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x7392x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x7392x3456_80x88x96_4rx4c.txt ../build/aie_1600x7392x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x7392x3456_80x88x96_4rx4c.xclbin -i build/insts_1600x7392x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 7392 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x7392x3456
Sequence instr count: 1140
Loading xclbin: build/final_1600x7392x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x7392x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        75        62       -32         4   ...      -32        -4       -33         0       -16  
       0      -100        42       120       -96   ...      -40         4       117       100       -11  
       0        24       -54       -65       -48   ...      120       -44        69       -70       107  
       0        95         4       -31        28   ...       60      -100      -108       -82      -116  
       0        76       -70       -94        64   ...       76       -96      -104       -66        41  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 16435.26us.
Avg NPU gflops: 4974.04

Min NPU matmul time: 15414.00us.
Max NPU gflops: 5303.59

Max NPU matmul time: 18463.00us.
Min NPU gflops: 4427.75

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 7392 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x7392x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x7392x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x7392x4992_80x88x96_4rx4c.txt ../build/aie_1600x7392x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x7392x4992_80x88x96_4rx4c.xclbin -i build/insts_1600x7392x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 7392 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x7392x4992
Sequence instr count: 1140
Loading xclbin: build/final_1600x7392x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x7392x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -38        -8       -12       -12   ...       95        84       -98       -58       -35  
       0       -50         2        75       120   ...       87         0        73       106        39  
    -128        14       -18       119       -96   ...      104        68       -57       -50       -88  
       0       -72         4      -112        80   ...      -25       -36       -36       -28       -94  
    -128       -38       -96       119       108   ...        2        20       -57        34       -23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23789.82us.
Avg NPU gflops: 4963.58

Min NPU matmul time: 22456.00us.
Max NPU gflops: 5258.41

Max NPU matmul time: 25895.00us.
Min NPU gflops: 4560.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1600 -K 7392 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_1600x7392x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1600x7392x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1600x7392x6528_80x88x96_4rx4c.txt ../build/aie_1600x7392x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1600x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1600x7392x6528_80x88x96_4rx4c.xclbin -i build/insts_1600x7392x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 1600 -K 7392 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1600x7392x6528
Sequence instr count: 1140
Loading xclbin: build/final_1600x7392x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1600x7392x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        40       -90        29       -12   ...      -45      -104        93        14        46  
       0      -128        82        93      -104   ...      125       108       -20      -128       127  
       0       -90       -22        62        96   ...      113       -24       -89       -54         7  
       0        23       -10        64        40   ...       70         8        29      -102       -17  
    -128        97        52       -39        12   ...       39       -28       114        -6      -124  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 30642.49us.
Avg NPU gflops: 5039.27

Min NPU matmul time: 29276.00us.
Max NPU gflops: 5274.49

Max NPU matmul time: 32509.00us.
Min NPU gflops: 4749.94

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 352 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x352x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x352x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x352x384_80x88x96_4rx4c.txt ../build/aie_2880x352x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x352x384_80x88x96_4rx4c.xclbin -i build/insts_2880x352x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 352 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x352x384
Sequence instr count: 2004
Loading xclbin: build/final_2880x352x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x352x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       100       -88        28       -48   ...       37        92        19       -48        53  
       0        92       108        -9        20   ...      -82        48       103        26        -9  
       0        50       -80       -25       -12   ...        6       -52        71       -92        -2  
       0        80        -8       -12       -84   ...      -76         8        11        50       -66  
    -128       -92        42        16      -124   ...       -6       -32       104       110       -89  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 1205.03us.
Avg NPU gflops: 646.10

Min NPU matmul time: 399.00us.
Max NPU gflops: 1951.30

Max NPU matmul time: 3218.00us.
Min NPU gflops: 241.94

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 352 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x352x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x352x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x352x1920_80x88x96_4rx4c.txt ../build/aie_2880x352x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x352x1920_80x88x96_4rx4c.xclbin -i build/insts_2880x352x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 352 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x352x1920
Sequence instr count: 2004
Loading xclbin: build/final_2880x352x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x352x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        32        28       -48      -124   ...       88       -60       -46         0       125  
       0       -10        44       -57        24   ...      125       -88       -88        80        -6  
    -128        -1        66       101        24   ...        8       -60        29        24        84  
       0        -9        58      -100       124   ...      -72       -48       -70       -84       -42  
       0        66      -104       120       -16   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3058.62us.
Avg NPU gflops: 1272.74

Min NPU matmul time: 1012.00us.
Max NPU gflops: 3846.68

Max NPU matmul time: 4029.00us.
Min NPU gflops: 966.20

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 352 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x352x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x352x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x352x3456_80x88x96_4rx4c.txt ../build/aie_2880x352x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x352x3456_80x88x96_4rx4c.xclbin -i build/insts_2880x352x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 352 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x352x3456
Sequence instr count: 2004
Loading xclbin: build/final_2880x352x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x352x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        69        82        78        48   ...       56      -124       -80       -76       112  
       0        49         8        -7         0   ...      -49       -84      -115         6       -86  
    -128        99        44       -75       124   ...       66        72        39      -102       -33  
       0       107        10        27       -76   ...      -51       -52         1      -108      -109  
       0        -5        10       -37       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3305.43us.
Avg NPU gflops: 2119.88

Min NPU matmul time: 2179.00us.
Max NPU gflops: 3215.75

Max NPU matmul time: 4363.00us.
Min NPU gflops: 1606.03

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 352 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x352x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x352x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x352x4992_80x88x96_4rx4c.txt ../build/aie_2880x352x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x352x4992_80x88x96_4rx4c.xclbin -i build/insts_2880x352x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 352 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x352x4992
Sequence instr count: 2004
Loading xclbin: build/final_2880x352x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x352x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        12       -66       -74        60   ...      111       -20       -72       -82       -96  
       0       124       -18         1        40   ...      -52        24        79        62      -104  
       0       -44        64       -64       -92   ...        0        24       122       -60        -9  
       0        69       -32       -72         0   ...       48       -84       113       -56        52  
       0        44       -52        21       -84   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3578.96us.
Avg NPU gflops: 2828.02

Min NPU matmul time: 3228.00us.
Max NPU gflops: 3135.50

Max NPU matmul time: 4689.00us.
Min NPU gflops: 2158.54

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 352 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x352x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x352x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x352x6528_80x88x96_4rx4c.txt ../build/aie_2880x352x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x352x6528_80x88x96_4rx4c.xclbin -i build/insts_2880x352x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 352 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x352x6528
Sequence instr count: 2004
Loading xclbin: build/final_2880x352x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x352x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        42       104       -60      -124   ...      -72        36       115      -108       -72  
       0      -108       -14        41        40   ...      -93        16        65      -120        32  
       0       -19       -28        35         8   ...      -32       -96       -88       118        20  
       0      -101        74       -53      -108   ...       10        44       -60       -90       -48  
    -128      -103       -34       -56        40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5730.52us.
Avg NPU gflops: 2309.68

Min NPU matmul time: 4468.00us.
Max NPU gflops: 2962.32

Max NPU matmul time: 7241.00us.
Min NPU gflops: 1827.88

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 1760 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x1760x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x1760x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x1760x384_80x88x96_4rx4c.txt ../build/aie_2880x1760x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x1760x384_80x88x96_4rx4c.xclbin -i build/insts_2880x1760x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 1760 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x1760x384
Sequence instr count: 2004
Loading xclbin: build/final_2880x1760x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x1760x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        66      -104       120       -16   ...       50       -28        -7       -98       -94  
       0      -118       -20       -33       -96   ...      -33         4      -116       -24        71  
    -128       -68      -118       -56      -112   ...     -126      -120        10       -48       -73  
       0       -81        10       127       -80   ...       31       -28        50       -14        -4  
    -128        72        -2        -2        72   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3256.60us.
Avg NPU gflops: 1195.37

Min NPU matmul time: 971.00us.
Max NPU gflops: 4009.10

Max NPU matmul time: 3963.00us.
Min NPU gflops: 982.30

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 1760 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x1760x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x1760x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x1760x1920_80x88x96_4rx4c.txt ../build/aie_2880x1760x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x1760x1920_80x88x96_4rx4c.xclbin -i build/insts_2880x1760x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 1760 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x1760x1920
Sequence instr count: 2004
Loading xclbin: build/final_2880x1760x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x1760x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       116       -20        79        28   ...      -82       -40        36       -36       -82  
       0        56       -88        16        92   ...     -122        24       -45       -62        61  
    -128       -28      -104       105       104   ...       63        92       -62      -102        91  
       0       -36      -124       -77       -24   ...      -84        88        78        10        92  
    -128        45        -8       -98        68   ...       97        52       104       118        51  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4756.90us.
Avg NPU gflops: 4091.78

Min NPU matmul time: 3746.00us.
Max NPU gflops: 5195.99

Max NPU matmul time: 6740.00us.
Min NPU gflops: 2887.86

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 1760 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x1760x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x1760x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x1760x3456_80x88x96_4rx4c.txt ../build/aie_2880x1760x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x1760x3456_80x88x96_4rx4c.xclbin -i build/insts_2880x1760x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 1760 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x1760x3456
Sequence instr count: 2004
Loading xclbin: build/final_2880x1760x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x1760x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        55      -104       -43       104   ...       16       -20       -11        98        94  
       0      -126        22      -127      -120   ...      -39       108        58       120        54  
       0       -37       -58       -13       -12   ...      -29      -116      -104        52       112  
       0       -59        46       109       104   ...     -102       -96       101       118       114  
       0        87      -108       115        80   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7626.97us.
Avg NPU gflops: 4593.64

Min NPU matmul time: 6903.00us.
Max NPU gflops: 5075.41

Max NPU matmul time: 9438.00us.
Min NPU gflops: 3712.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 1760 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x1760x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x1760x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x1760x4992_80x88x96_4rx4c.txt ../build/aie_2880x1760x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x1760x4992_80x88x96_4rx4c.xclbin -i build/insts_2880x1760x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 1760 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x1760x4992
Sequence instr count: 2004
Loading xclbin: build/final_2880x1760x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x1760x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -69      -124        18         8   ...     -111       -52         2       -64       -64  
       0       -29         4        42       104   ...      115       112        -1       106        74  
    -128      -112       -64       115      -108   ...      -68       -64        66       100      -104  
       0      -111       116       127       112   ...      -52        76        10         8       -15  
       0        33        62      -127        72   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 10822.72us.
Avg NPU gflops: 4675.99

Min NPU matmul time: 10030.00us.
Max NPU gflops: 5045.55

Max NPU matmul time: 12883.00us.
Min NPU gflops: 3928.19

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 1760 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x1760x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x1760x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x1760x6528_80x88x96_4rx4c.txt ../build/aie_2880x1760x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x1760x6528_80x88x96_4rx4c.xclbin -i build/insts_2880x1760x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 1760 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x1760x6528
Sequence instr count: 2004
Loading xclbin: build/final_2880x1760x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x1760x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -112       -54        74        24   ...       62        20        61       -54       -39  
       0       110      -106       -90       -52   ...      -14       116       112      -120       -42  
       0       122        34        24      -124   ...     -118        60       -15        20        73  
       0       -37        70       -57      -108   ...      125        40        71       104       -62  
       0        60        42        90        36   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 14445.16us.
Avg NPU gflops: 4581.34

Min NPU matmul time: 13343.00us.
Max NPU gflops: 4959.77

Max NPU matmul time: 15786.00us.
Min NPU gflops: 4192.21

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 3168 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x3168x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x3168x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x3168x384_80x88x96_4rx4c.txt ../build/aie_2880x3168x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x3168x384_80x88x96_4rx4c.xclbin -i build/insts_2880x3168x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 3168 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x3168x384
Sequence instr count: 2004
Loading xclbin: build/final_2880x3168x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x3168x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        98        68        85         0   ...      -86        40         9        -8        29  
       0       -69       -62       118       -36   ...      -27        24       -12      -122        16  
       0        80         4       -69        36   ...      -49        16        94        78       105  
       0       -32       124        31        68   ...       44       -40       -55      -110        15  
    -128        99       118        69       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3226.61us.
Avg NPU gflops: 2171.66

Min NPU matmul time: 1525.00us.
Max NPU gflops: 4594.83

Max NPU matmul time: 3889.00us.
Min NPU gflops: 1801.78

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.9s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 3168 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x3168x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x3168x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x3168x1920_80x88x96_4rx4c.txt ../build/aie_2880x3168x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x3168x1920_80x88x96_4rx4c.xclbin -i build/insts_2880x3168x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 3168 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x3168x1920
Sequence instr count: 2004
Loading xclbin: build/final_2880x3168x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x3168x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        76        56         4       -16   ...       74       100       -67        -6        55  
       0        62       118        70        56   ...      -48         4        25       -62        24  
    -128       -90       -50       -54       104   ...       15        48       108        76       -17  
       0        -2       -34       -39       -88   ...        3       -76      -110        54        78  
    -128        58       124       120        28   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7375.47us.
Avg NPU gflops: 4750.28

Min NPU matmul time: 6546.00us.
Max NPU gflops: 5352.21

Max NPU matmul time: 10129.00us.
Min NPU gflops: 3458.93

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.8s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 3168 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x3168x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x3168x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x3168x3456_80x88x96_4rx4c.txt ../build/aie_2880x3168x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x3168x3456_80x88x96_4rx4c.xclbin -i build/insts_2880x3168x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 3168 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x3168x3456
Sequence instr count: 2004
Loading xclbin: build/final_2880x3168x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x3168x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -97        72       -43        88   ...      -92        12        90       -36        35  
       0        -1       -10       120       -24   ...      -29      -120        26        12         5  
    -128       -22        26       -55       -40   ...      -39       -28         9       -26        62  
       0       -25       -18       -75        68   ...      -71        60        55       -96        43  
    -128      -111       -32       -81        80   ...       12       -48       -28       -92      -105  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13048.83us.
Avg NPU gflops: 4832.92

Min NPU matmul time: 11867.00us.
Max NPU gflops: 5314.23

Max NPU matmul time: 14450.00us.
Min NPU gflops: 4364.29

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 3168 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x3168x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x3168x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x3168x4992_80x88x96_4rx4c.txt ../build/aie_2880x3168x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:18 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x3168x4992_80x88x96_4rx4c.xclbin -i build/insts_2880x3168x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 3168 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x3168x4992
Sequence instr count: 2004
Loading xclbin: build/final_2880x3168x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x3168x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128         4         2        33       -20   ...       97       -24       -89       126        34  
       0        96       -78       -23       -40   ...       23       -40        29       -34       122  
       0       -20       106      -120       -56   ...       13       -20       125        68       -87  
       0        29       124       -51        -4   ...      -75        16        72       114       -27  
       0       -28       -46       -26        80   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 19178.70us.
Avg NPU gflops: 4749.67

Min NPU matmul time: 17973.00us.
Max NPU gflops: 5068.29

Max NPU matmul time: 21744.00us.
Min NPU gflops: 4189.31

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.8s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 3168 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x3168x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x3168x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x3168x6528_80x88x96_4rx4c.txt ../build/aie_2880x3168x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x3168x6528_80x88x96_4rx4c.xclbin -i build/insts_2880x3168x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 3168 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x3168x6528
Sequence instr count: 2004
Loading xclbin: build/final_2880x3168x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x3168x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -56      -120       -33       -28   ...       30        12       -78       104        50  
       0        77        48        -7       -16   ...       90       116        93        90        17  
    -128       -83       -28       112       -80   ...       42        92         3      -122       -95  
       0        34       114       -32        -8   ...     -105        40       -96      -112       -98  
    -128       -38      -118        89        72   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 24295.51us.
Avg NPU gflops: 4903.00

Min NPU matmul time: 22911.00us.
Max NPU gflops: 5199.29

Max NPU matmul time: 28244.00us.
Min NPU gflops: 4217.56

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 4576 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x4576x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x4576x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x4576x384_80x88x96_4rx4c.txt ../build/aie_2880x4576x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x4576x384_80x88x96_4rx4c.xclbin -i build/insts_2880x4576x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 4576 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x4576x384
Sequence instr count: 2004
Loading xclbin: build/final_2880x4576x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x4576x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        53        16       -74        96   ...      -65       -48       -96        70       -71  
       0       -96      -108       -25      -108   ...     -121       -44      -117      -100      -122  
    -128        34       -76       -95       -28   ...       89        80       -73        42        31  
       0       -13        32        69       -28   ...      -14       -88        14       -80       -21  
    -128      -127        -8        29         8   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3227.91us.
Avg NPU gflops: 3135.58

Min NPU matmul time: 2063.00us.
Max NPU gflops: 4906.15

Max NPU matmul time: 4151.00us.
Min NPU gflops: 2438.30

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (1.0s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 4576 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x4576x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x4576x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x4576x1920_80x88x96_4rx4c.txt ../build/aie_2880x4576x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:18 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x4576x1920_80x88x96_4rx4c.xclbin -i build/insts_2880x4576x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 4576 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x4576x1920
Sequence instr count: 2004
Loading xclbin: build/final_2880x4576x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x4576x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        22       126       -59       -52   ...        0        -4       -89        14       102  
       0        80       102        51       -96   ...      -71       -16        74       -10         0  
       0       -51        86         6        56   ...       55       -64        62        -4        70  
       0       -31        -8       -31         0   ...       -3       -28      -117       -94        47  
       0       -60       -80       -82       124   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 10328.25us.
Avg NPU gflops: 4899.85

Min NPU matmul time: 9306.00us.
Max NPU gflops: 5438.09

Max NPU matmul time: 13223.00us.
Min NPU gflops: 3827.19

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 4576 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x4576x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x4576x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x4576x3456_80x88x96_4rx4c.txt ../build/aie_2880x4576x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x4576x3456_80x88x96_4rx4c.xclbin -i build/insts_2880x4576x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 4576 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x4576x3456
Sequence instr count: 2004
Loading xclbin: build/final_2880x4576x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x4576x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -48       -86        14       -96   ...       28       104        -9        22        17  
       0        33       -18       -99        56   ...       44        80        44        90         7  
       0       -38       110       -77        96   ...       51        88       -74       -50        27  
       0       122       -42       -42        68   ...       88        56       -88        62        98  
    -128        -3         0       -44        72   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 18367.07us.
Avg NPU gflops: 4959.55

Min NPU matmul time: 17125.00us.
Max NPU gflops: 5319.27

Max NPU matmul time: 20209.00us.
Min NPU gflops: 4507.52

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.9s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 4576 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x4576x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x4576x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x4576x4992_80x88x96_4rx4c.txt ../build/aie_2880x4576x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x4576x4992_80x88x96_4rx4c.xclbin -i build/insts_2880x4576x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 4576 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x4576x4992
Sequence instr count: 2004
Loading xclbin: build/final_2880x4576x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x4576x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        88        42       -93        84   ...      -61       -84       123       -26       103  
       0       100        34        15       -96   ...       25        24        59      -104       101  
       0       -89      -108        44       -96   ...      -33       -36        -7        80        87  
       0       -24        14        -1      -108   ...       67       -56        29       -76       -99  
    -128       -35       -32         0        96   ...       51       100       -67         6       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 26809.41us.
Avg NPU gflops: 4907.90

Min NPU matmul time: 25593.00us.
Max NPU gflops: 5141.17

Max NPU matmul time: 30053.00us.
Min NPU gflops: 4378.20

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 4576 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x4576x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x4576x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x4576x6528_80x88x96_4rx4c.txt ../build/aie_2880x4576x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x4576x6528_80x88x96_4rx4c.xclbin -i build/insts_2880x4576x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 4576 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x4576x6528
Sequence instr count: 2004
Loading xclbin: build/final_2880x4576x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x4576x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       111       -72       101       -56   ...      -58       116       -90         6        26  
       0      -105       -44        99        56   ...      -45        -4      -125      -100       -35  
       0       -89       -90        44       -20   ...       -5       -28        64       -26         9  
       0       -73      -116       -42      -108   ...       64       -88      -107      -118      -124  
    -128       118         6       -31       -20   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 34276.16us.
Avg NPU gflops: 5019.92

Min NPU matmul time: 32611.00us.
Max NPU gflops: 5276.24

Max NPU matmul time: 35935.00us.
Min NPU gflops: 4788.19

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (1.0s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 5984 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x5984x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x5984x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x5984x384_80x88x96_4rx4c.txt ../build/aie_2880x5984x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:18 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x5984x384_80x88x96_4rx4c.xclbin -i build/insts_2880x5984x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 5984 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x5984x384
Sequence instr count: 2004
Loading xclbin: build/final_2880x5984x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x5984x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -28       -60      -115        84   ...      -94        76        77        20       -10  
       0       -79       -98       -87       -88   ...      -94       -76      -121        96       104  
    -128       104        18       -54       124   ...      117       -20       -84      -108        54  
       0        77       -44       -71       -12   ...       53       116         0        50       114  
       0        48         4        57       -40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3381.96us.
Avg NPU gflops: 3913.60

Min NPU matmul time: 2748.00us.
Max NPU gflops: 4816.47

Max NPU matmul time: 4453.00us.
Min NPU gflops: 2972.30

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.8s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 5984 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x5984x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x5984x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x5984x1920_80x88x96_4rx4c.txt ../build/aie_2880x5984x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x5984x1920_80x88x96_4rx4c.xclbin -i build/insts_2880x5984x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 5984 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x5984x1920
Sequence instr count: 2004
Loading xclbin: build/final_2880x5984x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x5984x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        24       104        42         8   ...      -22       -36        18        42        12  
       0        47       -74        29       104   ...      -20       -68       -67        -2        55  
       0       -14       -10      -113       120   ...      -70       -40        79       -44        77  
       0       -92       -42        99        60   ...       95       108        -3       100        18  
    -128        17        98       -33         8   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13154.87us.
Avg NPU gflops: 5030.70

Min NPU matmul time: 12006.00us.
Max NPU gflops: 5512.10

Max NPU matmul time: 15145.00us.
Min NPU gflops: 4369.64

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 5984 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x5984x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x5984x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x5984x3456_80x88x96_4rx4c.txt ../build/aie_2880x5984x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x5984x3456_80x88x96_4rx4c.xclbin -i build/insts_2880x5984x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 5984 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x5984x3456
Sequence instr count: 2004
Loading xclbin: build/final_2880x5984x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x5984x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        74       -92       -82        24   ...       75       -12       -34         2       113  
       0       -44       106      -121        68   ...      115       -20        83        98       -23  
    -128       -46       -92       -38        44   ...      -52       -96       -30      -114        54  
       0      -111       -46       -95       112   ...        7      -128       -16       -70      -121  
       0        33       -64        39        36   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23264.32us.
Avg NPU gflops: 5120.32

Min NPU matmul time: 22002.00us.
Max NPU gflops: 5414.09

Max NPU matmul time: 25790.00us.
Min NPU gflops: 4618.88

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 5984 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x5984x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x5984x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x5984x4992_80x88x96_4rx4c.txt ../build/aie_2880x5984x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x5984x4992_80x88x96_4rx4c.xclbin -i build/insts_2880x5984x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 5984 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x5984x4992
Sequence instr count: 2004
Loading xclbin: build/final_2880x5984x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x5984x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       117       -62        71       -84   ...     -117        36       116        24       -40  
       0        -2       -54       -99       -48   ...      -52       -36        45        68       -60  
    -128        41       -44      -108        32   ...       44        36       121       -44        90  
       0         0       -62        43        76   ...       83        52      -101        52      -125  
       0         7      -108       -66        36   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 33873.29us.
Avg NPU gflops: 5079.62

Min NPU matmul time: 32463.00us.
Max NPU gflops: 5300.29

Max NPU matmul time: 37107.00us.
Min NPU gflops: 4636.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.9s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 5984 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x5984x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x5984x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x5984x6528_80x88x96_4rx4c.txt ../build/aie_2880x5984x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x5984x6528_80x88x96_4rx4c.xclbin -i build/insts_2880x5984x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 5984 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x5984x6528
Sequence instr count: 2004
Loading xclbin: build/final_2880x5984x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x5984x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        -1        58        59        56   ...      -80        52        77       -26      -119  
       0       -17         2        45       -28   ...     -112        72        11        62       -43  
       0        10        60       -77      -104   ...      -66        48        81       108        97  
       0       -15        86      -102        76   ...      -39       -96       -92        42        93  
    -128       104       -86       -91       -44   ...       87       -72      -117       -54        99  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 43665.34us.
Avg NPU gflops: 5152.97

Min NPU matmul time: 42185.00us.
Max NPU gflops: 5333.79

Max NPU matmul time: 45471.00us.
Min NPU gflops: 4948.34

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 7392 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x7392x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x7392x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x7392x384_80x88x96_4rx4c.txt ../build/aie_2880x7392x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:18 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x7392x384_80x88x96_4rx4c.xclbin -i build/insts_2880x7392x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 7392 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x7392x384
Sequence instr count: 2004
Loading xclbin: build/final_2880x7392x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x7392x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       -44      -103        16   ...      -91        92        96       -92       -19  
       0       -29        76        13        80   ...       74        -8        36       104        24  
    -128       -14        60        22      -112   ...     -116       -44       -95      -112        60  
       0        34        58        75        48   ...       17        32       -19       -32        46  
       0       -32        96        87        28   ...       52       -96      -113       110       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3633.95us.
Avg NPU gflops: 4499.21

Min NPU matmul time: 3191.00us.
Max NPU gflops: 5123.76

Max NPU matmul time: 4402.00us.
Min NPU gflops: 3714.20

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 7392 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x7392x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x7392x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x7392x1920_80x88x96_4rx4c.txt ../build/aie_2880x7392x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x7392x1920_80x88x96_4rx4c.xclbin -i build/insts_2880x7392x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 7392 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x7392x1920
Sequence instr count: 2004
Loading xclbin: build/final_2880x7392x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x7392x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        74       -60      -121        64   ...      108      -124         3      -114       -14  
       0       -49       -84        99        80   ...     -125       108       -65      -124       106  
       0       104       110      -104       -32   ...      105        16         3       -20        92  
       0        65        78      -117        80   ...       54       -64       -73      -100      -104  
       0        98        48       -29       -24   ...      -91       -76        84       -56        86  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 15839.70us.
Avg NPU gflops: 5161.06

Min NPU matmul time: 14853.00us.
Max NPU gflops: 5503.91

Max NPU matmul time: 17584.00us.
Min NPU gflops: 4649.09

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 7392 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x7392x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x7392x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x7392x3456_80x88x96_4rx4c.txt ../build/aie_2880x7392x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x7392x3456_80x88x96_4rx4c.xclbin -i build/insts_2880x7392x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 7392 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x7392x3456
Sequence instr count: 2004
Loading xclbin: build/final_2880x7392x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x7392x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        75        62       -32         4   ...      -32        -4       -33         0       -16  
       0      -100        42       120       -96   ...      -40         4       117       100       -11  
       0        24       -54       -65       -48   ...      120       -44        69       -70       107  
       0        95         4       -31        28   ...       60      -100      -108       -82      -116  
       0        76       -70       -94        64   ...       76       -96      -104       -66        41  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 28515.99us.
Avg NPU gflops: 5160.24

Min NPU matmul time: 27333.00us.
Max NPU gflops: 5383.58

Max NPU matmul time: 30381.00us.
Min NPU gflops: 4843.46

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 7392 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x7392x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x7392x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x7392x4992_80x88x96_4rx4c.txt ../build/aie_2880x7392x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x7392x4992_80x88x96_4rx4c.xclbin -i build/insts_2880x7392x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 7392 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x7392x4992
Sequence instr count: 2004
Loading xclbin: build/final_2880x7392x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x7392x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -38        -8       -12       -12   ...       95        84       -98       -58       -35  
       0       -50         2        75       120   ...       87         0        73       106        39  
    -128        14       -18       119       -96   ...      104        68       -57       -50       -88  
       0       -72         4      -112        80   ...      -25       -36       -36       -28       -94  
    -128       -38       -96       119       108   ...        2        20       -57        34       -23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 41289.99us.
Avg NPU gflops: 5147.71

Min NPU matmul time: 39608.00us.
Max NPU gflops: 5366.31

Max NPU matmul time: 44793.00us.
Min NPU gflops: 4745.14

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 2880 -K 7392 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_2880x7392x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_2880x7392x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_2880x7392x6528_80x88x96_4rx4c.txt ../build/aie_2880x7392x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_2880x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_2880x7392x6528_80x88x96_4rx4c.xclbin -i build/insts_2880x7392x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 2880 -K 7392 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 2880x7392x6528
Sequence instr count: 2004
Loading xclbin: build/final_2880x7392x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_2880x7392x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        40       -90        29       -12   ...      -45      -104        93        14        46  
       0      -128        82        93      -104   ...      125       108       -20      -128       127  
       0       -90       -22        62        96   ...      113       -24       -89       -54         7  
       0        23       -10        64        40   ...       70         8        29      -102       -17  
    -128        97        52       -39        12   ...       39       -28       114        -6      -124  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 53315.08us.
Avg NPU gflops: 5213.32

Min NPU matmul time: 51797.00us.
Max NPU gflops: 5366.12

Max NPU matmul time: 56075.00us.
Min NPU gflops: 4956.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 352 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x352x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x352x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x352x384_80x88x96_4rx4c.txt ../build/aie_4160x352x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:21 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x352x384_80x88x96_4rx4c.xclbin -i build/insts_4160x352x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 352 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x352x384
Sequence instr count: 2868
Loading xclbin: build/final_4160x352x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x352x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       100       -88        28       -48   ...       37        92        19       -48        53  
       0        92       108        -9        20   ...      -82        48       103        26        -9  
       0        50       -80       -25       -12   ...        6       -52        71       -92        -2  
       0        80        -8       -12       -84   ...      -76         8        11        50       -66  
    -128       -92        42        16      -124   ...       -6       -32       104       110       -89  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 2422.26us.
Avg NPU gflops: 464.28

Min NPU matmul time: 476.00us.
Max NPU gflops: 2362.60

Max NPU matmul time: 3426.00us.
Min NPU gflops: 328.25

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (1.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 352 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x352x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x352x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x352x1920_80x88x96_4rx4c.txt ../build/aie_4160x352x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x352x1920_80x88x96_4rx4c.xclbin -i build/insts_4160x352x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 352 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x352x1920
Sequence instr count: 2868
Loading xclbin: build/final_4160x352x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x352x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        32        28       -48      -124   ...       88       -60       -46         0       125  
       0       -10        44       -57        24   ...      125       -88       -88        80        -6  
    -128        -1        66       101        24   ...        8       -60        29        24        84  
       0        -9        58      -100       124   ...      -72       -48       -70       -84       -42  
       0        66      -104       120       -16   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3129.63us.
Avg NPU gflops: 1796.69

Min NPU matmul time: 1396.00us.
Max NPU gflops: 4027.93

Max NPU matmul time: 4085.00us.
Min NPU gflops: 1376.50

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 352 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x352x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x352x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x352x3456_80x88x96_4rx4c.txt ../build/aie_4160x352x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x352x3456_80x88x96_4rx4c.xclbin -i build/insts_4160x352x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 352 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x352x3456
Sequence instr count: 2868
Loading xclbin: build/final_4160x352x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x352x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        69        82        78        48   ...       56      -124       -80       -76       112  
       0        49         8        -7         0   ...      -49       -84      -115         6       -86  
    -128        99        44       -75       124   ...       66        72        39      -102       -33  
       0       107        10        27       -76   ...      -51       -52         1      -108      -109  
       0        -5        10       -37       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3338.32us.
Avg NPU gflops: 3031.88

Min NPU matmul time: 2689.00us.
Max NPU gflops: 3763.99

Max NPU matmul time: 3863.00us.
Min NPU gflops: 2620.08

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 352 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x352x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x352x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x352x4992_80x88x96_4rx4c.txt ../build/aie_4160x352x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x352x4992_80x88x96_4rx4c.xclbin -i build/insts_4160x352x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 352 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x352x4992
Sequence instr count: 2868
Loading xclbin: build/final_4160x352x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x352x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        12       -66       -74        60   ...      111       -20       -72       -82       -96  
       0       124       -18         1        40   ...      -52        24        79        62      -104  
       0       -44        64       -64       -92   ...        0        24       122       -60        -9  
       0        69       -32       -72         0   ...       48       -84       113       -56        52  
       0        44       -52        21       -84   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5825.39us.
Avg NPU gflops: 2509.66

Min NPU matmul time: 4601.00us.
Max NPU gflops: 3177.52

Max NPU matmul time: 8011.00us.
Min NPU gflops: 1824.96

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 352 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x352x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x352x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x352x6528_80x88x96_4rx4c.txt ../build/aie_4160x352x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x352x6528_80x88x96_4rx4c.xclbin -i build/insts_4160x352x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 352 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x352x6528
Sequence instr count: 2868
Loading xclbin: build/final_4160x352x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x352x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        42       104       -60      -124   ...      -72        36       115      -108       -72  
       0      -108       -14        41        40   ...      -93        16        65      -120        32  
       0       -19       -28        35         8   ...      -32       -96       -88       118        20  
       0      -101        74       -53      -108   ...       10        44       -60       -90       -48  
    -128      -103       -34       -56        40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7357.74us.
Avg NPU gflops: 2598.37

Min NPU matmul time: 6425.00us.
Max NPU gflops: 2975.59

Max NPU matmul time: 9234.00us.
Min NPU gflops: 2070.41

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 1760 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x1760x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x1760x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x1760x384_80x88x96_4rx4c.txt ../build/aie_4160x1760x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x1760x384_80x88x96_4rx4c.xclbin -i build/insts_4160x1760x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 1760 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x1760x384
Sequence instr count: 2868
Loading xclbin: build/final_4160x1760x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x1760x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        66      -104       120       -16   ...       50       -28        -7       -98       -94  
       0      -118       -20       -33       -96   ...      -33         4      -116       -24        71  
    -128       -68      -118       -56      -112   ...     -126      -120        10       -48       -73  
       0       -81        10       127       -80   ...       31       -28        50       -14        -4  
    -128        72        -2        -2        72   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3206.95us.
Avg NPU gflops: 1753.38

Min NPU matmul time: 1265.00us.
Max NPU gflops: 4445.05

Max NPU matmul time: 4000.00us.
Min NPU gflops: 1405.75

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 1760 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x1760x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x1760x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x1760x1920_80x88x96_4rx4c.txt ../build/aie_4160x1760x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x1760x1920_80x88x96_4rx4c.xclbin -i build/insts_4160x1760x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 1760 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x1760x1920
Sequence instr count: 2868
Loading xclbin: build/final_4160x1760x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x1760x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       116       -20        79        28   ...      -82       -40        36       -36       -82  
       0        56       -88        16        92   ...     -122        24       -45       -62        61  
    -128       -28      -104       105       104   ...       63        92       -62      -102        91  
       0       -36      -124       -77       -24   ...      -84        88        78        10        92  
    -128        45        -8       -98        68   ...       97        52       104       118        51  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6188.89us.
Avg NPU gflops: 4542.81

Min NPU matmul time: 5325.00us.
Max NPU gflops: 5279.80

Max NPU matmul time: 8031.00us.
Min NPU gflops: 3500.80

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 1760 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x1760x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x1760x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x1760x3456_80x88x96_4rx4c.txt ../build/aie_4160x1760x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x1760x3456_80x88x96_4rx4c.xclbin -i build/insts_4160x1760x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 1760 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x1760x3456
Sequence instr count: 2868
Loading xclbin: build/final_4160x1760x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x1760x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        55      -104       -43       104   ...       16       -20       -11        98        94  
       0      -126        22      -127      -120   ...      -39       108        58       120        54  
       0       -37       -58       -13       -12   ...      -29      -116      -104        52       112  
       0       -59        46       109       104   ...     -102       -96       101       118       114  
       0        87      -108       115        80   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 10568.64us.
Avg NPU gflops: 4788.40

Min NPU matmul time: 9843.00us.
Max NPU gflops: 5141.41

Max NPU matmul time: 12146.00us.
Min NPU gflops: 4166.55

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 1760 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x1760x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x1760x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x1760x4992_80x88x96_4rx4c.txt ../build/aie_4160x1760x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x1760x4992_80x88x96_4rx4c.xclbin -i build/insts_4160x1760x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 1760 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x1760x4992
Sequence instr count: 2868
Loading xclbin: build/final_4160x1760x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x1760x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -69      -124        18         8   ...     -111       -52         2       -64       -64  
       0       -29         4        42       104   ...      115       112        -1       106        74  
    -128      -112       -64       115      -108   ...      -68       -64        66       100      -104  
       0      -111       116       127       112   ...      -52        76        10         8       -15  
       0        33        62      -127        72   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 15781.66us.
Avg NPU gflops: 4631.89

Min NPU matmul time: 14675.00us.
Max NPU gflops: 4981.18

Max NPU matmul time: 17343.00us.
Min NPU gflops: 4214.89

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 1760 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x1760x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x1760x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x1760x6528_80x88x96_4rx4c.txt ../build/aie_4160x1760x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x1760x6528_80x88x96_4rx4c.xclbin -i build/insts_4160x1760x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 1760 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x1760x6528
Sequence instr count: 2868
Loading xclbin: build/final_4160x1760x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x1760x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -112       -54        74        24   ...       62        20        61       -54       -39  
       0       110      -106       -90       -52   ...      -14       116       112      -120       -42  
       0       122        34        24      -124   ...     -118        60       -15        20        73  
       0       -37        70       -57      -108   ...      125        40        71       104       -62  
       0        60        42        90        36   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 20206.87us.
Avg NPU gflops: 4730.61

Min NPU matmul time: 18661.00us.
Max NPU gflops: 5122.49

Max NPU matmul time: 21715.00us.
Min NPU gflops: 4402.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 3168 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x3168x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x3168x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x3168x384_80x88x96_4rx4c.txt ../build/aie_4160x3168x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x3168x384_80x88x96_4rx4c.xclbin -i build/insts_4160x3168x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 3168 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x3168x384
Sequence instr count: 2868
Loading xclbin: build/final_4160x3168x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x3168x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        98        68        85         0   ...      -86        40         9        -8        29  
       0       -69       -62       118       -36   ...      -27        24       -12      -122        16  
       0        80         4       -69        36   ...      -49        16        94        78       105  
       0       -32       124        31        68   ...       44       -40       -55      -110        15  
    -128        99       118        69       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3283.99us.
Avg NPU gflops: 3082.04

Min NPU matmul time: 2087.00us.
Max NPU gflops: 4849.73

Max NPU matmul time: 4331.00us.
Min NPU gflops: 2336.96

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 3168 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x3168x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x3168x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x3168x1920_80x88x96_4rx4c.txt ../build/aie_4160x3168x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x3168x1920_80x88x96_4rx4c.xclbin -i build/insts_4160x3168x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 3168 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x3168x1920
Sequence instr count: 2868
Loading xclbin: build/final_4160x3168x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x3168x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        76        56         4       -16   ...       74       100       -67        -6        55  
       0        62       118        70        56   ...      -48         4        25       -62        24  
    -128       -90       -50       -54       104   ...       15        48       108        76       -17  
       0        -2       -34       -39       -88   ...        3       -76      -110        54        78  
    -128        58       124       120        28   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 10328.45us.
Avg NPU gflops: 4899.76

Min NPU matmul time: 9381.00us.
Max NPU gflops: 5394.62

Max NPU matmul time: 12091.00us.
Min NPU gflops: 4185.50

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 3168 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x3168x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x3168x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x3168x3456_80x88x96_4rx4c.txt ../build/aie_4160x3168x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x3168x3456_80x88x96_4rx4c.xclbin -i build/insts_4160x3168x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 3168 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x3168x3456
Sequence instr count: 2868
Loading xclbin: build/final_4160x3168x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x3168x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -97        72       -43        88   ...      -92        12        90       -36        35  
       0        -1       -10       120       -24   ...      -29      -120        26        12         5  
    -128       -22        26       -55       -40   ...      -39       -28         9       -26        62  
       0       -25       -18       -75        68   ...      -71        60        55       -96        43  
    -128      -111       -32       -81        80   ...       12       -48       -28       -92      -105  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 18401.99us.
Avg NPU gflops: 4950.14

Min NPU matmul time: 17010.00us.
Max NPU gflops: 5355.23

Max NPU matmul time: 20408.00us.
Min NPU gflops: 4463.56

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 3168 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x3168x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x3168x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x3168x4992_80x88x96_4rx4c.txt ../build/aie_4160x3168x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x3168x4992_80x88x96_4rx4c.xclbin -i build/insts_4160x3168x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 3168 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x3168x4992
Sequence instr count: 2868
Loading xclbin: build/final_4160x3168x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x3168x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128         4         2        33       -20   ...       97       -24       -89       126        34  
       0        96       -78       -23       -40   ...       23       -40        29       -34       122  
       0       -20       106      -120       -56   ...       13       -20       125        68       -87  
       0        29       124       -51        -4   ...      -75        16        72       114       -27  
       0       -28       -46       -26        80   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 26870.80us.
Avg NPU gflops: 4896.69

Min NPU matmul time: 25477.00us.
Max NPU gflops: 5164.58

Max NPU matmul time: 29244.00us.
Min NPU gflops: 4499.31

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 3168 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x3168x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x3168x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x3168x6528_80x88x96_4rx4c.txt ../build/aie_4160x3168x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x3168x6528_80x88x96_4rx4c.xclbin -i build/insts_4160x3168x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 3168 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x3168x6528
Sequence instr count: 2868
Loading xclbin: build/final_4160x3168x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x3168x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -56      -120       -33       -28   ...       30        12       -78       104        50  
       0        77        48        -7       -16   ...       90       116        93        90        17  
    -128       -83       -28       112       -80   ...       42        92         3      -122       -95  
       0        34       114       -32        -8   ...     -105        40       -96      -112       -98  
    -128       -38      -118        89        72   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 34615.94us.
Avg NPU gflops: 4970.64

Min NPU matmul time: 33288.00us.
Max NPU gflops: 5168.93

Max NPU matmul time: 37006.00us.
Min NPU gflops: 4649.61

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 4576 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x4576x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x4576x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x4576x384_80x88x96_4rx4c.txt ../build/aie_4160x4576x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x4576x384_80x88x96_4rx4c.xclbin -i build/insts_4160x4576x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 4576 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x4576x384
Sequence instr count: 2868
Loading xclbin: build/final_4160x4576x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x4576x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        53        16       -74        96   ...      -65       -48       -96        70       -71  
       0       -96      -108       -25      -108   ...     -121       -44      -117      -100      -122  
    -128        34       -76       -95       -28   ...       89        80       -73        42        31  
       0       -13        32        69       -28   ...      -14       -88        14       -80       -21  
    -128      -127        -8        29         8   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3325.67us.
Avg NPU gflops: 4396.04

Min NPU matmul time: 2839.00us.
Max NPU gflops: 5149.62

Max NPU matmul time: 3935.00us.
Min NPU gflops: 3715.32

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.8s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 4576 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x4576x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x4576x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x4576x1920_80x88x96_4rx4c.txt ../build/aie_4160x4576x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:18 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x4576x1920_80x88x96_4rx4c.xclbin -i build/insts_4160x4576x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 4576 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x4576x1920
Sequence instr count: 2868
Loading xclbin: build/final_4160x4576x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x4576x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        22       126       -59       -52   ...        0        -4       -89        14       102  
       0        80       102        51       -96   ...      -71       -16        74       -10         0  
       0       -51        86         6        56   ...       55       -64        62        -4        70  
       0       -31        -8       -31         0   ...       -3       -28      -117       -94        47  
       0       -60       -80       -82       124   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 14344.42us.
Avg NPU gflops: 5095.98

Min NPU matmul time: 13275.00us.
Max NPU gflops: 5506.50

Max NPU matmul time: 15928.00us.
Min NPU gflops: 4589.33

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 4576 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x4576x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x4576x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x4576x3456_80x88x96_4rx4c.txt ../build/aie_4160x4576x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:23 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x4576x3456_80x88x96_4rx4c.xclbin -i build/insts_4160x4576x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 4576 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x4576x3456
Sequence instr count: 2868
Loading xclbin: build/final_4160x4576x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x4576x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -48       -86        14       -96   ...       28       104        -9        22        17  
       0        33       -18       -99        56   ...       44        80        44        90         7  
       0       -38       110       -77        96   ...       51        88       -74       -50        27  
       0       122       -42       -42        68   ...       88        56       -88        62        98  
    -128        -3         0       -44        72   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 26050.13us.
Avg NPU gflops: 5050.95

Min NPU matmul time: 25019.00us.
Max NPU gflops: 5259.12

Max NPU matmul time: 27913.00us.
Min NPU gflops: 4713.86

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 4576 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x4576x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x4576x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x4576x4992_80x88x96_4rx4c.txt ../build/aie_4160x4576x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:19 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x4576x4992_80x88x96_4rx4c.xclbin -i build/insts_4160x4576x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 4576 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x4576x4992
Sequence instr count: 2868
Loading xclbin: build/final_4160x4576x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x4576x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        88        42       -93        84   ...      -61       -84       123       -26       103  
       0       100        34        15       -96   ...       25        24        59      -104       101  
       0       -89      -108        44       -96   ...      -33       -36        -7        80        87  
       0       -24        14        -1      -108   ...       67       -56        29       -76       -99  
    -128       -35       -32         0        96   ...       51       100       -67         6       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 38141.16us.
Avg NPU gflops: 4982.99

Min NPU matmul time: 35888.00us.
Max NPU gflops: 5295.84

Max NPU matmul time: 39513.00us.
Min NPU gflops: 4809.99

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 4576 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x4576x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x4576x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x4576x6528_80x88x96_4rx4c.txt ../build/aie_4160x4576x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x4576x6528_80x88x96_4rx4c.xclbin -i build/insts_4160x4576x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 4576 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x4576x6528
Sequence instr count: 2868
Loading xclbin: build/final_4160x4576x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x4576x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       111       -72       101       -56   ...      -58       116       -90         6        26  
       0      -105       -44        99        56   ...      -45        -4      -125      -100       -35  
       0       -89       -90        44       -20   ...       -5       -28        64       -26         9  
       0       -73      -116       -42      -108   ...       64       -88      -107      -118      -124  
    -128       118         6       -31       -20   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 48067.28us.
Avg NPU gflops: 5170.59

Min NPU matmul time: 46355.00us.
Max NPU gflops: 5361.58

Max NPU matmul time: 50539.00us.
Min NPU gflops: 4917.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 5984 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x5984x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x5984x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x5984x384_80x88x96_4rx4c.txt ../build/aie_4160x5984x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x5984x384_80x88x96_4rx4c.xclbin -i build/insts_4160x5984x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 5984 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x5984x384
Sequence instr count: 2868
Loading xclbin: build/final_4160x5984x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x5984x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -28       -60      -115        84   ...      -94        76        77        20       -10  
       0       -79       -98       -87       -88   ...      -94       -76      -121        96       104  
    -128       104        18       -54       124   ...      117       -20       -84      -108        54  
       0        77       -44       -71       -12   ...       53       116         0        50       114  
       0        48         4        57       -40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4343.67us.
Avg NPU gflops: 4401.38

Min NPU matmul time: 3628.00us.
Max NPU gflops: 5269.61

Max NPU matmul time: 6991.00us.
Min NPU gflops: 2734.68

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 5984 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x5984x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x5984x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x5984x1920_80x88x96_4rx4c.txt ../build/aie_4160x5984x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x5984x1920_80x88x96_4rx4c.xclbin -i build/insts_4160x5984x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 5984 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x5984x1920
Sequence instr count: 2868
Loading xclbin: build/final_4160x5984x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x5984x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        24       104        42         8   ...      -22       -36        18        42        12  
       0        47       -74        29       104   ...      -20       -68       -67        -2        55  
       0       -14       -10      -113       120   ...      -70       -40        79       -44        77  
       0       -92       -42        99        60   ...       95       108        -3       100        18  
    -128        17        98       -33         8   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 18264.49us.
Avg NPU gflops: 5233.70

Min NPU matmul time: 17319.00us.
Max NPU gflops: 5519.42

Max NPU matmul time: 20065.00us.
Min NPU gflops: 4764.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 5984 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x5984x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x5984x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x5984x3456_80x88x96_4rx4c.txt ../build/aie_4160x5984x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x5984x3456_80x88x96_4rx4c.xclbin -i build/insts_4160x5984x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 5984 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x5984x3456
Sequence instr count: 2868
Loading xclbin: build/final_4160x5984x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x5984x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        74       -92       -82        24   ...       75       -12       -34         2       113  
       0       -44       106      -121        68   ...      115       -20        83        98       -23  
    -128       -46       -92       -38        44   ...      -52       -96       -30      -114        54  
       0      -111       -46       -95       112   ...        7      -128       -16       -70      -121  
       0        33       -64        39        36   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 33023.22us.
Avg NPU gflops: 5210.38

Min NPU matmul time: 31781.00us.
Max NPU gflops: 5414.04

Max NPU matmul time: 34775.00us.
Min NPU gflops: 4947.91

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 5984 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x5984x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x5984x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x5984x4992_80x88x96_4rx4c.txt ../build/aie_4160x5984x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x5984x4992_80x88x96_4rx4c.xclbin -i build/insts_4160x5984x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 5984 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x5984x4992
Sequence instr count: 2868
Loading xclbin: build/final_4160x5984x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x5984x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       117       -62        71       -84   ...     -117        36       116        24       -40  
       0        -2       -54       -99       -48   ...      -52       -36        45        68       -60  
    -128        41       -44      -108        32   ...       44        36       121       -44        90  
       0         0       -62        43        76   ...       83        52      -101        52      -125  
       0         7      -108       -66        36   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 48124.40us.
Avg NPU gflops: 5164.45

Min NPU matmul time: 46349.00us.
Max NPU gflops: 5362.28

Max NPU matmul time: 50235.00us.
Min NPU gflops: 4947.47

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 5984 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x5984x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x5984x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x5984x6528_80x88x96_4rx4c.txt ../build/aie_4160x5984x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x5984x6528_80x88x96_4rx4c.xclbin -i build/insts_4160x5984x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 5984 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x5984x6528
Sequence instr count: 2868
Loading xclbin: build/final_4160x5984x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x5984x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        -1        58        59        56   ...      -80        52        77       -26      -119  
       0       -17         2        45       -28   ...     -112        72        11        62       -43  
       0        10        60       -77      -104   ...      -66        48        81       108        97  
       0       -15        86      -102        76   ...      -39       -96       -92        42        93  
    -128       104       -86       -91       -44   ...       87       -72      -117       -54        99  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 61908.67us.
Avg NPU gflops: 5249.81

Min NPU matmul time: 60533.00us.
Max NPU gflops: 5369.12

Max NPU matmul time: 64244.00us.
Min NPU gflops: 5058.97

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 7392 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x7392x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x7392x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x7392x384_80x88x96_4rx4c.txt ../build/aie_4160x7392x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x7392x384_80x88x96_4rx4c.xclbin -i build/insts_4160x7392x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 7392 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x7392x384
Sequence instr count: 2868
Loading xclbin: build/final_4160x7392x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x7392x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       -44      -103        16   ...      -91        92        96       -92       -19  
       0       -29        76        13        80   ...       74        -8        36       104        24  
    -128       -14        60        22      -112   ...     -116       -44       -95      -112        60  
       0        34        58        75        48   ...       17        32       -19       -32        46  
       0       -32        96        87        28   ...       52       -96      -113       110       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5421.00us.
Avg NPU gflops: 4356.49

Min NPU matmul time: 4446.00us.
Max NPU gflops: 5311.87

Max NPU matmul time: 7467.00us.
Min NPU gflops: 3162.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 7392 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x7392x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x7392x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x7392x1920_80x88x96_4rx4c.txt ../build/aie_4160x7392x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x7392x1920_80x88x96_4rx4c.xclbin -i build/insts_4160x7392x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 7392 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x7392x1920
Sequence instr count: 2868
Loading xclbin: build/final_4160x7392x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x7392x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        74       -60      -121        64   ...      108      -124         3      -114       -14  
       0       -49       -84        99        80   ...     -125       108       -65      -124       106  
       0       104       110      -104       -32   ...      105        16         3       -20        92  
       0        65        78      -117        80   ...       54       -64       -73      -100      -104  
       0        98        48       -29       -24   ...      -91       -76        84       -56        86  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 22255.67us.
Avg NPU gflops: 5305.74

Min NPU matmul time: 21132.00us.
Max NPU gflops: 5587.87

Max NPU matmul time: 24255.00us.
Min NPU gflops: 4868.39

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 7392 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x7392x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x7392x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x7392x3456_80x88x96_4rx4c.txt ../build/aie_4160x7392x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x7392x3456_80x88x96_4rx4c.xclbin -i build/insts_4160x7392x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 7392 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x7392x3456
Sequence instr count: 2868
Loading xclbin: build/final_4160x7392x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x7392x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        75        62       -32         4   ...      -32        -4       -33         0       -16  
       0      -100        42       120       -96   ...      -40         4       117       100       -11  
       0        24       -54       -65       -48   ...      120       -44        69       -70       107  
       0        95         4       -31        28   ...       60      -100      -108       -82      -116  
       0        76       -70       -94        64   ...       76       -96      -104       -66        41  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 40321.27us.
Avg NPU gflops: 5271.39

Min NPU matmul time: 39189.00us.
Max NPU gflops: 5423.69

Max NPU matmul time: 41921.00us.
Min NPU gflops: 5070.23

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 7392 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x7392x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x7392x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x7392x4992_80x88x96_4rx4c.txt ../build/aie_4160x7392x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x7392x4992_80x88x96_4rx4c.xclbin -i build/insts_4160x7392x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 7392 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x7392x4992
Sequence instr count: 2868
Loading xclbin: build/final_4160x7392x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x7392x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -38        -8       -12       -12   ...       95        84       -98       -58       -35  
       0       -50         2        75       120   ...       87         0        73       106        39  
    -128        14       -18       119       -96   ...      104        68       -57       -50       -88  
       0       -72         4      -112        80   ...      -25       -36       -36       -28       -94  
    -128       -38       -96       119       108   ...        2        20       -57        34       -23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 58721.86us.
Avg NPU gflops: 5228.29

Min NPU matmul time: 57171.00us.
Max NPU gflops: 5370.12

Max NPU matmul time: 60829.00us.
Min NPU gflops: 5047.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4160 -K 7392 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_4160x7392x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4160x7392x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4160x7392x6528_80x88x96_4rx4c.txt ../build/aie_4160x7392x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4160x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4160x7392x6528_80x88x96_4rx4c.xclbin -i build/insts_4160x7392x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 4160 -K 7392 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4160x7392x6528
Sequence instr count: 2868
Loading xclbin: build/final_4160x7392x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4160x7392x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        40       -90        29       -12   ...      -45      -104        93        14        46  
       0      -128        82        93      -104   ...      125       108       -20      -128       127  
       0       -90       -22        62        96   ...      113       -24       -89       -54         7  
       0        23       -10        64        40   ...       70         8        29      -102       -17  
    -128        97        52       -39        12   ...       39       -28       114        -6      -124  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 75912.98us.
Avg NPU gflops: 5288.71

Min NPU matmul time: 74393.00us.
Max NPU gflops: 5396.76

Max NPU matmul time: 81365.00us.
Min NPU gflops: 4934.33

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 352 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x352x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x352x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x352x384_80x88x96_4rx4c.txt ../build/aie_5440x352x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x352x384_80x88x96_4rx4c.xclbin -i build/insts_5440x352x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 352 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x352x384
Sequence instr count: 3732
Loading xclbin: build/final_5440x352x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x352x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       100       -88        28       -48   ...       37        92        19       -48        53  
       0        92       108        -9        20   ...      -82        48       103        26        -9  
       0        50       -80       -25       -12   ...        6       -52        71       -92        -2  
       0        80        -8       -12       -84   ...      -76         8        11        50       -66  
    -128       -92        42        16      -124   ...       -6       -32       104       110       -89  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 2427.91us.
Avg NPU gflops: 605.72

Min NPU matmul time: 655.00us.
Max NPU gflops: 2245.23

Max NPU matmul time: 3514.00us.
Min NPU gflops: 418.51

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 352 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x352x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x352x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x352x1920_80x88x96_4rx4c.txt ../build/aie_5440x352x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x352x1920_80x88x96_4rx4c.xclbin -i build/insts_5440x352x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 352 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x352x1920
Sequence instr count: 3732
Loading xclbin: build/final_5440x352x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x352x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        32        28       -48      -124   ...       88       -60       -46         0       125  
       0       -10        44       -57        24   ...      125       -88       -88        80        -6  
    -128        -1        66       101        24   ...        8       -60        29        24        84  
       0        -9        58      -100       124   ...      -72       -48       -70       -84       -42  
       0        66      -104       120       -16   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3281.43us.
Avg NPU gflops: 2240.83

Min NPU matmul time: 1902.00us.
Max NPU gflops: 3866.00

Max NPU matmul time: 4416.00us.
Min NPU gflops: 1665.11

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 352 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x352x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x352x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x352x3456_80x88x96_4rx4c.txt ../build/aie_5440x352x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x352x3456_80x88x96_4rx4c.xclbin -i build/insts_5440x352x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 352 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x352x3456
Sequence instr count: 3732
Loading xclbin: build/final_5440x352x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x352x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        69        82        78        48   ...       56      -124       -80       -76       112  
       0        49         8        -7         0   ...      -49       -84      -115         6       -86  
    -128        99        44       -75       124   ...       66        72        39      -102       -33  
       0       107        10        27       -76   ...      -51       -52         1      -108      -109  
       0        -5        10       -37       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3871.68us.
Avg NPU gflops: 3418.58

Min NPU matmul time: 3412.00us.
Max NPU gflops: 3879.15

Max NPU matmul time: 5978.00us.
Min NPU gflops: 2214.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 352 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x352x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x352x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x352x4992_80x88x96_4rx4c.txt ../build/aie_5440x352x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x352x4992_80x88x96_4rx4c.xclbin -i build/insts_5440x352x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 352 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x352x4992
Sequence instr count: 3732
Loading xclbin: build/final_5440x352x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x352x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        12       -66       -74        60   ...      111       -20       -72       -82       -96  
       0       124       -18         1        40   ...      -52        24        79        62      -104  
       0       -44        64       -64       -92   ...        0        24       122       -60        -9  
       0        69       -32       -72         0   ...       48       -84       113       -56        52  
       0        44       -52        21       -84   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6977.08us.
Avg NPU gflops: 2740.14

Min NPU matmul time: 6031.00us.
Max NPU gflops: 3169.98

Max NPU matmul time: 8881.00us.
Min NPU gflops: 2152.70

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 352 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x352x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x352x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x352x6528_80x88x96_4rx4c.txt ../build/aie_5440x352x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x352x6528_80x88x96_4rx4c.xclbin -i build/insts_5440x352x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 352 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x352x6528
Sequence instr count: 3732
Loading xclbin: build/final_5440x352x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x352x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        42       104       -60      -124   ...      -72        36       115      -108       -72  
       0      -108       -14        41        40   ...      -93        16        65      -120        32  
       0       -19       -28        35         8   ...      -32       -96       -88       118        20  
       0      -101        74       -53      -108   ...       10        44       -60       -90       -48  
    -128      -103       -34       -56        40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9442.46us.
Avg NPU gflops: 2647.69

Min NPU matmul time: 8258.00us.
Max NPU gflops: 3027.45

Max NPU matmul time: 10481.00us.
Min NPU gflops: 2385.33

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 1760 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x1760x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x1760x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x1760x384_80x88x96_4rx4c.txt ../build/aie_5440x1760x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x1760x384_80x88x96_4rx4c.xclbin -i build/insts_5440x1760x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 1760 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x1760x384
Sequence instr count: 3732
Loading xclbin: build/final_5440x1760x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x1760x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        66      -104       120       -16   ...       50       -28        -7       -98       -94  
       0      -118       -20       -33       -96   ...      -33         4      -116       -24        71  
    -128       -68      -118       -56      -112   ...     -126      -120        10       -48       -73  
       0       -81        10       127       -80   ...       31       -28        50       -14        -4  
    -128        72        -2        -2        72   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3254.11us.
Avg NPU gflops: 2259.65

Min NPU matmul time: 1508.00us.
Max NPU gflops: 4876.09

Max NPU matmul time: 4258.00us.
Min NPU gflops: 1726.90

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 1760 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x1760x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x1760x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x1760x1920_80x88x96_4rx4c.txt ../build/aie_5440x1760x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x1760x1920_80x88x96_4rx4c.xclbin -i build/insts_5440x1760x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 1760 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x1760x1920
Sequence instr count: 3732
Loading xclbin: build/final_5440x1760x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x1760x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       116       -20        79        28   ...      -82       -40        36       -36       -82  
       0        56       -88        16        92   ...     -122        24       -45       -62        61  
    -128       -28      -104       105       104   ...       63        92       -62      -102        91  
       0       -36      -124       -77       -24   ...      -84        88        78        10        92  
    -128        45        -8       -98        68   ...       97        52       104       118        51  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7774.51us.
Avg NPU gflops: 4729.00

Min NPU matmul time: 6904.00us.
Max NPU gflops: 5325.27

Max NPU matmul time: 8960.00us.
Min NPU gflops: 4103.31

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 1760 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x1760x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x1760x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x1760x3456_80x88x96_4rx4c.txt ../build/aie_5440x1760x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x1760x3456_80x88x96_4rx4c.xclbin -i build/insts_5440x1760x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 1760 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x1760x3456
Sequence instr count: 3732
Loading xclbin: build/final_5440x1760x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x1760x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        55      -104       -43       104   ...       16       -20       -11        98        94  
       0      -126        22      -127      -120   ...      -39       108        58       120        54  
       0       -37       -58       -13       -12   ...      -29      -116      -104        52       112  
       0       -59        46       109       104   ...     -102       -96       101       118       114  
       0        87      -108       115        80   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13744.19us.
Avg NPU gflops: 4815.00

Min NPU matmul time: 12664.00us.
Max NPU gflops: 5225.70

Max NPU matmul time: 15466.00us.
Min NPU gflops: 4278.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 1760 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x1760x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x1760x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x1760x4992_80x88x96_4rx4c.txt ../build/aie_5440x1760x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x1760x4992_80x88x96_4rx4c.xclbin -i build/insts_5440x1760x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 1760 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x1760x4992
Sequence instr count: 3732
Loading xclbin: build/final_5440x1760x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x1760x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -69      -124        18         8   ...     -111       -52         2       -64       -64  
       0       -29         4        42       104   ...      115       112        -1       106        74  
    -128      -112       -64       115      -108   ...      -68       -64        66       100      -104  
       0      -111       116       127       112   ...      -52        76        10         8       -15  
       0        33        62      -127        72   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 20378.79us.
Avg NPU gflops: 4690.70

Min NPU matmul time: 19301.00us.
Max NPU gflops: 4952.64

Max NPU matmul time: 22861.00us.
Min NPU gflops: 4181.39

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 1760 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x1760x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x1760x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x1760x6528_80x88x96_4rx4c.txt ../build/aie_5440x1760x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x1760x6528_80x88x96_4rx4c.xclbin -i build/insts_5440x1760x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 1760 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x1760x6528
Sequence instr count: 3732
Loading xclbin: build/final_5440x1760x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x1760x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -112       -54        74        24   ...       62        20        61       -54       -39  
       0       110      -106       -90       -52   ...      -14       116       112      -120       -42  
       0       122        34        24      -124   ...     -118        60       -15        20        73  
       0       -37        70       -57      -108   ...      125        40        71       104       -62  
       0        60        42        90        36   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 25526.68us.
Avg NPU gflops: 4896.97

Min NPU matmul time: 23963.00us.
Max NPU gflops: 5216.52

Max NPU matmul time: 27590.00us.
Min NPU gflops: 4530.75

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 3168 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x3168x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x3168x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x3168x384_80x88x96_4rx4c.txt ../build/aie_5440x3168x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x3168x384_80x88x96_4rx4c.xclbin -i build/insts_5440x3168x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 3168 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x3168x384
Sequence instr count: 3732
Loading xclbin: build/final_5440x3168x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x3168x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        98        68        85         0   ...      -86        40         9        -8        29  
       0       -69       -62       118       -36   ...      -27        24       -12      -122        16  
       0        80         4       -69        36   ...      -49        16        94        78       105  
       0       -32       124        31        68   ...       44       -40       -55      -110        15  
    -128        99       118        69       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3354.62us.
Avg NPU gflops: 3945.50

Min NPU matmul time: 2702.00us.
Max NPU gflops: 4898.46

Max NPU matmul time: 3976.00us.
Min NPU gflops: 3328.89

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 3168 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x3168x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x3168x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x3168x1920_80x88x96_4rx4c.txt ../build/aie_5440x3168x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x3168x1920_80x88x96_4rx4c.xclbin -i build/insts_5440x3168x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 3168 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x3168x1920
Sequence instr count: 3732
Loading xclbin: build/final_5440x3168x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x3168x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        76        56         4       -16   ...       74       100       -67        -6        55  
       0        62       118        70        56   ...      -48         4        25       -62        24  
    -128       -90       -50       -54       104   ...       15        48       108        76       -17  
       0        -2       -34       -39       -88   ...        3       -76      -110        54        78  
    -128        58       124       120        28   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13128.50us.
Avg NPU gflops: 5040.81

Min NPU matmul time: 12101.00us.
Max NPU gflops: 5468.83

Max NPU matmul time: 14478.00us.
Min NPU gflops: 4570.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 3168 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x3168x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x3168x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x3168x3456_80x88x96_4rx4c.txt ../build/aie_5440x3168x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x3168x3456_80x88x96_4rx4c.xclbin -i build/insts_5440x3168x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 3168 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x3168x3456
Sequence instr count: 3732
Loading xclbin: build/final_5440x3168x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x3168x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -97        72       -43        88   ...      -92        12        90       -36        35  
       0        -1       -10       120       -24   ...      -29      -120        26        12         5  
    -128       -22        26       -55       -40   ...      -39       -28         9       -26        62  
       0       -25       -18       -75        68   ...      -71        60        55       -96        43  
    -128      -111       -32       -81        80   ...       12       -48       -28       -92      -105  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23551.77us.
Avg NPU gflops: 5057.83

Min NPU matmul time: 22591.00us.
Max NPU gflops: 5272.93

Max NPU matmul time: 25200.00us.
Min NPU gflops: 4727.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 3168 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x3168x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x3168x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x3168x4992_80x88x96_4rx4c.txt ../build/aie_5440x3168x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x3168x4992_80x88x96_4rx4c.xclbin -i build/insts_5440x3168x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 3168 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x3168x4992
Sequence instr count: 3732
Loading xclbin: build/final_5440x3168x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x3168x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128         4         2        33       -20   ...       97       -24       -89       126        34  
       0        96       -78       -23       -40   ...       23       -40        29       -34       122  
       0       -20       106      -120       -56   ...       13       -20       125        68       -87  
       0        29       124       -51        -4   ...      -75        16        72       114       -27  
       0       -28       -46       -26        80   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 34309.50us.
Avg NPU gflops: 5015.04

Min NPU matmul time: 33217.00us.
Max NPU gflops: 5179.98

Max NPU matmul time: 36375.00us.
Min NPU gflops: 4730.27

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 3168 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x3168x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x3168x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x3168x6528_80x88x96_4rx4c.txt ../build/aie_5440x3168x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x3168x6528_80x88x96_4rx4c.xclbin -i build/insts_5440x3168x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 3168 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x3168x6528
Sequence instr count: 3732
Loading xclbin: build/final_5440x3168x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x3168x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -56      -120       -33       -28   ...       30        12       -78       104        50  
       0        77        48        -7       -16   ...       90       116        93        90        17  
    -128       -83       -28       112       -80   ...       42        92         3      -122       -95  
       0        34       114       -32        -8   ...     -105        40       -96      -112       -98  
    -128       -38      -118        89        72   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 44434.76us.
Avg NPU gflops: 5063.74

Min NPU matmul time: 43184.00us.
Max NPU gflops: 5210.40

Max NPU matmul time: 46502.00us.
Min NPU gflops: 4838.63

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 4576 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x4576x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x4576x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x4576x384_80x88x96_4rx4c.txt ../build/aie_5440x4576x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x4576x384_80x88x96_4rx4c.xclbin -i build/insts_5440x4576x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 4576 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x4576x384
Sequence instr count: 3732
Loading xclbin: build/final_5440x4576x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x4576x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        53        16       -74        96   ...      -65       -48       -96        70       -71  
       0       -96      -108       -25      -108   ...     -121       -44      -117      -100      -122  
    -128        34       -76       -95       -28   ...       89        80       -73        42        31  
       0       -13        32        69       -28   ...      -14       -88        14       -80       -21  
    -128      -127        -8        29         8   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4683.91us.
Avg NPU gflops: 4081.67

Min NPU matmul time: 3660.00us.
Max NPU gflops: 5223.54

Max NPU matmul time: 6718.00us.
Min NPU gflops: 2845.81

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 4576 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x4576x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x4576x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x4576x1920_80x88x96_4rx4c.txt ../build/aie_5440x4576x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x4576x1920_80x88x96_4rx4c.xclbin -i build/insts_5440x4576x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 4576 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x4576x1920
Sequence instr count: 3732
Loading xclbin: build/final_5440x4576x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x4576x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        22       126       -59       -52   ...        0        -4       -89        14       102  
       0        80       102        51       -96   ...      -71       -16        74       -10         0  
       0       -51        86         6        56   ...       55       -64        62        -4        70  
       0       -31        -8       -31         0   ...       -3       -28      -117       -94        47  
       0       -60       -80       -82       124   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 18203.05us.
Avg NPU gflops: 5251.36

Min NPU matmul time: 17235.00us.
Max NPU gflops: 5546.32

Max NPU matmul time: 19333.00us.
Min NPU gflops: 4944.44

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.8s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 4576 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x4576x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x4576x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x4576x3456_80x88x96_4rx4c.txt ../build/aie_5440x4576x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x4576x3456_80x88x96_4rx4c.xclbin -i build/insts_5440x4576x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 4576 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x4576x3456
Sequence instr count: 3732
Loading xclbin: build/final_5440x4576x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x4576x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -48       -86        14       -96   ...       28       104        -9        22        17  
       0        33       -18       -99        56   ...       44        80        44        90         7  
       0       -38       110       -77        96   ...       51        88       -74       -50        27  
       0       122       -42       -42        68   ...       88        56       -88        62        98  
    -128        -3         0       -44        72   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 33567.29us.
Avg NPU gflops: 5125.93

Min NPU matmul time: 32174.00us.
Max NPU gflops: 5347.90

Max NPU matmul time: 35535.00us.
Min NPU gflops: 4842.08

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (1.1s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 4576 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x4576x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x4576x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x4576x4992_80x88x96_4rx4c.txt ../build/aie_5440x4576x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x4576x4992_80x88x96_4rx4c.xclbin -i build/insts_5440x4576x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 4576 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x4576x4992
Sequence instr count: 3732
Loading xclbin: build/final_5440x4576x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x4576x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        88        42       -93        84   ...      -61       -84       123       -26       103  
       0       100        34        15       -96   ...       25        24        59      -104       101  
       0       -89      -108        44       -96   ...      -33       -36        -7        80        87  
       0       -24        14        -1      -108   ...       67       -56        29       -76       -99  
    -128       -35       -32         0        96   ...       51       100       -67         6       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 49180.73us.
Avg NPU gflops: 5053.53

Min NPU matmul time: 47049.00us.
Max NPU gflops: 5282.50

Max NPU matmul time: 51545.00us.
Min NPU gflops: 4821.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 4576 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x4576x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x4576x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x4576x6528_80x88x96_4rx4c.txt ../build/aie_5440x4576x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x4576x6528_80x88x96_4rx4c.xclbin -i build/insts_5440x4576x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 4576 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x4576x6528
Sequence instr count: 3732
Loading xclbin: build/final_5440x4576x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x4576x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       111       -72       101       -56   ...      -58       116       -90         6        26  
       0      -105       -44        99        56   ...      -45        -4      -125      -100       -35  
       0       -89       -90        44       -20   ...       -5       -28        64       -26         9  
       0       -73      -116       -42      -108   ...       64       -88      -107      -118      -124  
    -128       118         6       -31       -20   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 63143.36us.
Avg NPU gflops: 5147.16

Min NPU matmul time: 61487.00us.
Max NPU gflops: 5285.81

Max NPU matmul time: 66725.00us.
Min NPU gflops: 4870.87

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 5984 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x5984x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x5984x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x5984x384_80x88x96_4rx4c.txt ../build/aie_5440x5984x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x5984x384_80x88x96_4rx4c.xclbin -i build/insts_5440x5984x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 5984 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x5984x384
Sequence instr count: 3732
Loading xclbin: build/final_5440x5984x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x5984x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -28       -60      -115        84   ...      -94        76        77        20       -10  
       0       -79       -98       -87       -88   ...      -94       -76      -121        96       104  
    -128       104        18       -54       124   ...      117       -20       -84      -108        54  
       0        77       -44       -71       -12   ...       53       116         0        50       114  
       0        48         4        57       -40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5591.54us.
Avg NPU gflops: 4471.16

Min NPU matmul time: 4709.00us.
Max NPU gflops: 5309.13

Max NPU matmul time: 7616.00us.
Min NPU gflops: 3282.65

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 5984 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x5984x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x5984x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x5984x1920_80x88x96_4rx4c.txt ../build/aie_5440x5984x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x5984x1920_80x88x96_4rx4c.xclbin -i build/insts_5440x5984x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 5984 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x5984x1920
Sequence instr count: 3732
Loading xclbin: build/final_5440x5984x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x5984x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        24       104        42         8   ...      -22       -36        18        42        12  
       0        47       -74        29       104   ...      -20       -68       -67        -2        55  
       0       -14       -10      -113       120   ...      -70       -40        79       -44        77  
       0       -92       -42        99        60   ...       95       108        -3       100        18  
    -128        17        98       -33         8   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23371.47us.
Avg NPU gflops: 5348.55

Min NPU matmul time: 22456.00us.
Max NPU gflops: 5566.59

Max NPU matmul time: 25598.00us.
Min NPU gflops: 4883.33

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 5984 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x5984x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x5984x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x5984x3456_80x88x96_4rx4c.txt ../build/aie_5440x5984x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x5984x3456_80x88x96_4rx4c.xclbin -i build/insts_5440x5984x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 5984 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x5984x3456
Sequence instr count: 3732
Loading xclbin: build/final_5440x5984x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x5984x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        74       -92       -82        24   ...       75       -12       -34         2       113  
       0       -44       106      -121        68   ...      115       -20        83        98       -23  
    -128       -46       -92       -38        44   ...      -52       -96       -30      -114        54  
       0      -111       -46       -95       112   ...        7      -128       -16       -70      -121  
       0        33       -64        39        36   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 42583.13us.
Avg NPU gflops: 5283.93

Min NPU matmul time: 41279.00us.
Max NPU gflops: 5450.86

Max NPU matmul time: 44784.00us.
Min NPU gflops: 5024.25

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 5984 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x5984x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x5984x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x5984x4992_80x88x96_4rx4c.txt ../build/aie_5440x5984x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x5984x4992_80x88x96_4rx4c.xclbin -i build/insts_5440x5984x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 5984 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x5984x4992
Sequence instr count: 3732
Loading xclbin: build/final_5440x5984x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x5984x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       117       -62        71       -84   ...     -117        36       116        24       -40  
       0        -2       -54       -99       -48   ...      -52       -36        45        68       -60  
    -128        41       -44      -108        32   ...       44        36       121       -44        90  
       0         0       -62        43        76   ...       83        52      -101        52      -125  
       0         7      -108       -66        36   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 62376.87us.
Avg NPU gflops: 5210.41

Min NPU matmul time: 60418.00us.
Max NPU gflops: 5379.34

Max NPU matmul time: 64421.00us.
Min NPU gflops: 5045.07

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 5984 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x5984x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x5984x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x5984x6528_80x88x96_4rx4c.txt ../build/aie_5440x5984x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x5984x6528_80x88x96_4rx4c.xclbin -i build/insts_5440x5984x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 5984 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x5984x6528
Sequence instr count: 3732
Loading xclbin: build/final_5440x5984x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x5984x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        -1        58        59        56   ...      -80        52        77       -26      -119  
       0       -17         2        45       -28   ...     -112        72        11        62       -43  
       0        10        60       -77      -104   ...      -66        48        81       108        97  
       0       -15        86      -102        76   ...      -39       -96       -92        42        93  
    -128       104       -86       -91       -44   ...       87       -72      -117       -54        99  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 80026.87us.
Avg NPU gflops: 5310.86

Min NPU matmul time: 78651.00us.
Max NPU gflops: 5403.76

Max NPU matmul time: 84415.00us.
Min NPU gflops: 5034.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 7392 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x7392x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x7392x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x7392x384_80x88x96_4rx4c.txt ../build/aie_5440x7392x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x7392x384_80x88x96_4rx4c.xclbin -i build/insts_5440x7392x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 7392 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x7392x384
Sequence instr count: 3732
Loading xclbin: build/final_5440x7392x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x7392x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       -44      -103        16   ...      -91        92        96       -92       -19  
       0       -29        76        13        80   ...       74        -8        36       104        24  
    -128       -14        60        22      -112   ...     -116       -44       -95      -112        60  
       0        34        58        75        48   ...       17        32       -19       -32        46  
       0       -32        96        87        28   ...       52       -96      -113       110       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6472.38us.
Avg NPU gflops: 4771.53

Min NPU matmul time: 5747.00us.
Max NPU gflops: 5373.79

Max NPU matmul time: 8703.00us.
Min NPU gflops: 3548.57

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 7392 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x7392x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x7392x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x7392x1920_80x88x96_4rx4c.txt ../build/aie_5440x7392x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x7392x1920_80x88x96_4rx4c.xclbin -i build/insts_5440x7392x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 7392 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x7392x1920
Sequence instr count: 3732
Loading xclbin: build/final_5440x7392x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x7392x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        74       -60      -121        64   ...      108      -124         3      -114       -14  
       0       -49       -84        99        80   ...     -125       108       -65      -124       106  
       0       104       110      -104       -32   ...      105        16         3       -20        92  
       0        65        78      -117        80   ...       54       -64       -73      -100      -104  
       0        98        48       -29       -24   ...      -91       -76        84       -56        86  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 28661.25us.
Avg NPU gflops: 5387.62

Min NPU matmul time: 27558.00us.
Max NPU gflops: 5603.31

Max NPU matmul time: 31376.00us.
Min NPU gflops: 4921.47

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.8s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 7392 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x7392x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x7392x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x7392x3456_80x88x96_4rx4c.txt ../build/aie_5440x7392x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x7392x3456_80x88x96_4rx4c.xclbin -i build/insts_5440x7392x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 7392 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x7392x3456
Sequence instr count: 3732
Loading xclbin: build/final_5440x7392x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x7392x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        75        62       -32         4   ...      -32        -4       -33         0       -16  
       0      -100        42       120       -96   ...      -40         4       117       100       -11  
       0        24       -54       -65       -48   ...      120       -44        69       -70       107  
       0        95         4       -31        28   ...       60      -100      -108       -82      -116  
       0        76       -70       -94        64   ...       76       -96      -104       -66        41  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 52300.13us.
Avg NPU gflops: 5314.49

Min NPU matmul time: 51100.00us.
Max NPU gflops: 5439.31

Max NPU matmul time: 54624.00us.
Min NPU gflops: 5088.40

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 7392 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x7392x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x7392x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x7392x4992_80x88x96_4rx4c.txt ../build/aie_5440x7392x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x7392x4992_80x88x96_4rx4c.xclbin -i build/insts_5440x7392x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 7392 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x7392x4992
Sequence instr count: 3732
Loading xclbin: build/final_5440x7392x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x7392x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -38        -8       -12       -12   ...       95        84       -98       -58       -35  
       0       -50         2        75       120   ...       87         0        73       106        39  
    -128        14       -18       119       -96   ...      104        68       -57       -50       -88  
       0       -72         4      -112        80   ...      -25       -36       -36       -28       -94  
    -128       -38       -96       119       108   ...        2        20       -57        34       -23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 75806.04us.
Avg NPU gflops: 5296.17

Min NPU matmul time: 74217.00us.
Max NPU gflops: 5409.56

Max NPU matmul time: 79206.00us.
Min NPU gflops: 5068.83

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 5440 -K 7392 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_5440x7392x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_5440x7392x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_5440x7392x6528_80x88x96_4rx4c.txt ../build/aie_5440x7392x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_5440x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_5440x7392x6528_80x88x96_4rx4c.xclbin -i build/insts_5440x7392x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 5440 -K 7392 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 5440x7392x6528
Sequence instr count: 3732
Loading xclbin: build/final_5440x7392x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_5440x7392x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        40       -90        29       -12   ...      -45      -104        93        14        46  
       0      -128        82        93      -104   ...      125       108       -20      -128       127  
       0       -90       -22        62        96   ...      113       -24       -89       -54         7  
       0        23       -10        64        40   ...       70         8        29      -102       -17  
    -128        97        52       -39        12   ...       39       -28       114        -6      -124  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 98501.45us.
Avg NPU gflops: 5330.01

Min NPU matmul time: 96900.00us.
Max NPU gflops: 5418.10

Max NPU matmul time: 101129.00us.
Min NPU gflops: 5191.53

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 352 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x352x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x352x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x352x384_80x88x96_4rx4c.txt ../build/aie_6720x352x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x352x384_80x88x96_4rx4c.xclbin -i build/insts_6720x352x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 352 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x352x384
Sequence instr count: 4596
Loading xclbin: build/final_6720x352x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x352x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       100       -88        28       -48   ...       37        92        19       -48        53  
       0        92       108        -9        20   ...      -82        48       103        26        -9  
       0        50       -80       -25       -12   ...        6       -52        71       -92        -2  
       0        80        -8       -12       -84   ...      -76         8        11        50       -66  
    -128       -92        42        16      -124   ...       -6       -32       104       110       -89  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 2750.90us.
Avg NPU gflops: 660.39

Min NPU matmul time: 723.00us.
Max NPU gflops: 2512.67

Max NPU matmul time: 3578.00us.
Min NPU gflops: 507.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 352 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x352x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x352x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x352x1920_80x88x96_4rx4c.txt ../build/aie_6720x352x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x352x1920_80x88x96_4rx4c.xclbin -i build/insts_6720x352x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 352 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x352x1920
Sequence instr count: 4596
Loading xclbin: build/final_6720x352x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x352x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        32        28       -48      -124   ...       88       -60       -46         0       125  
       0       -10        44       -57        24   ...      125       -88       -88        80        -6  
    -128        -1        66       101        24   ...        8       -60        29        24        84  
       0        -9        58      -100       124   ...      -72       -48       -70       -84       -42  
       0        66      -104       120       -16   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3225.59us.
Avg NPU gflops: 2816.01

Min NPU matmul time: 1988.00us.
Max NPU gflops: 4569.06

Max NPU matmul time: 4064.00us.
Min NPU gflops: 2235.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 352 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x352x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x352x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x352x3456_80x88x96_4rx4c.txt ../build/aie_6720x352x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x352x3456_80x88x96_4rx4c.xclbin -i build/insts_6720x352x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 352 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x352x3456
Sequence instr count: 4596
Loading xclbin: build/final_6720x352x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x352x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        69        82        78        48   ...       56      -124       -80       -76       112  
       0        49         8        -7         0   ...      -49       -84      -115         6       -86  
    -128        99        44       -75       124   ...       66        72        39      -102       -33  
       0       107        10        27       -76   ...      -51       -52         1      -108      -109  
       0        -5        10       -37       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5250.83us.
Avg NPU gflops: 3113.78

Min NPU matmul time: 4165.00us.
Max NPU gflops: 3925.55

Max NPU matmul time: 7416.00us.
Min NPU gflops: 2204.68

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 352 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x352x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x352x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x352x4992_80x88x96_4rx4c.txt ../build/aie_6720x352x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x352x4992_80x88x96_4rx4c.xclbin -i build/insts_6720x352x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 352 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x352x4992
Sequence instr count: 4596
Loading xclbin: build/final_6720x352x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x352x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        12       -66       -74        60   ...      111       -20       -72       -82       -96  
       0       124       -18         1        40   ...      -52        24        79        62      -104  
       0       -44        64       -64       -92   ...        0        24       122       -60        -9  
       0        69       -32       -72         0   ...       48       -84       113       -56        52  
       0        44       -52        21       -84   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 8325.26us.
Avg NPU gflops: 2836.73

Min NPU matmul time: 7245.00us.
Max NPU gflops: 3259.70

Max NPU matmul time: 10481.00us.
Min NPU gflops: 2253.27

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 352 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x352x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x352x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x352x6528_80x88x96_4rx4c.txt ../build/aie_6720x352x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x352x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x352x6528_80x88x96_4rx4c.xclbin -i build/insts_6720x352x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 352 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x352x6528
Sequence instr count: 4596
Loading xclbin: build/final_6720x352x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x352x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        42       104       -60      -124   ...      -72        36       115      -108       -72  
       0      -108       -14        41        40   ...      -93        16        65      -120        32  
       0       -19       -28        35         8   ...      -32       -96       -88       118        20  
       0      -101        74       -53      -108   ...       10        44       -60       -90       -48  
    -128      -103       -34       -56        40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 11451.01us.
Avg NPU gflops: 2696.98

Min NPU matmul time: 9669.00us.
Max NPU gflops: 3194.04

Max NPU matmul time: 13787.00us.
Min NPU gflops: 2240.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 1760 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x1760x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x1760x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x1760x384_80x88x96_4rx4c.txt ../build/aie_6720x1760x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x1760x384_80x88x96_4rx4c.xclbin -i build/insts_6720x1760x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 1760 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x1760x384
Sequence instr count: 4596
Loading xclbin: build/final_6720x1760x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x1760x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        66      -104       120       -16   ...       50       -28        -7       -98       -94  
       0      -118       -20       -33       -96   ...      -33         4      -116       -24        71  
    -128       -68      -118       -56      -112   ...     -126      -120        10       -48       -73  
       0       -81        10       127       -80   ...       31       -28        50       -14        -4  
    -128        72        -2        -2        72   ...       13       -68       -71        72        83  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3260.62us.
Avg NPU gflops: 2785.76

Min NPU matmul time: 1911.00us.
Max NPU gflops: 4753.16

Max NPU matmul time: 4549.00us.
Min NPU gflops: 1996.77

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 1760 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x1760x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x1760x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x1760x1920_80x88x96_4rx4c.txt ../build/aie_6720x1760x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x1760x1920_80x88x96_4rx4c.xclbin -i build/insts_6720x1760x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 1760 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x1760x1920
Sequence instr count: 4596
Loading xclbin: build/final_6720x1760x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x1760x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       116       -20        79        28   ...      -82       -40        36       -36       -82  
       0        56       -88        16        92   ...     -122        24       -45       -62        61  
    -128       -28      -104       105       104   ...       63        92       -62      -102        91  
       0       -36      -124       -77       -24   ...      -84        88        78        10        92  
    -128        45        -8       -98        68   ...       97        52       104       118        51  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9414.39us.
Avg NPU gflops: 4824.15

Min NPU matmul time: 8427.00us.
Max NPU gflops: 5389.40

Max NPU matmul time: 13517.00us.
Min NPU gflops: 3359.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 1760 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x1760x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x1760x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x1760x3456_80x88x96_4rx4c.txt ../build/aie_6720x1760x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x1760x3456_80x88x96_4rx4c.xclbin -i build/insts_6720x1760x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 1760 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x1760x3456
Sequence instr count: 4596
Loading xclbin: build/final_6720x1760x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x1760x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        55      -104       -43       104   ...       16       -20       -11        98        94  
       0      -126        22      -127      -120   ...      -39       108        58       120        54  
       0       -37       -58       -13       -12   ...      -29      -116      -104        52       112  
       0       -59        46       109       104   ...     -102       -96       101       118       114  
       0        87      -108       115        80   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 16621.82us.
Avg NPU gflops: 4918.21

Min NPU matmul time: 15462.00us.
Max NPU gflops: 5287.13

Max NPU matmul time: 18610.00us.
Min NPU gflops: 4392.78

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 1760 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x1760x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x1760x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x1760x4992_80x88x96_4rx4c.txt ../build/aie_6720x1760x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x1760x4992_80x88x96_4rx4c.xclbin -i build/insts_6720x1760x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 1760 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x1760x4992
Sequence instr count: 4596
Loading xclbin: build/final_6720x1760x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x1760x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -69      -124        18         8   ...     -111       -52         2       -64       -64  
       0       -29         4        42       104   ...      115       112        -1       106        74  
    -128      -112       -64       115      -108   ...      -68       -64        66       100      -104  
       0      -111       116       127       112   ...      -52        76        10         8       -15  
       0        33        62      -127        72   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 24384.53us.
Avg NPU gflops: 4842.53

Min NPU matmul time: 22989.00us.
Max NPU gflops: 5136.49

Max NPU matmul time: 27066.00us.
Min NPU gflops: 4362.77

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 1760 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x1760x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x1760x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x1760x6528_80x88x96_4rx4c.txt ../build/aie_6720x1760x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x1760x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x1760x6528_80x88x96_4rx4c.xclbin -i build/insts_6720x1760x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 1760 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x1760x6528
Sequence instr count: 4596
Loading xclbin: build/final_6720x1760x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x1760x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -112       -54        74        24   ...       62        20        61       -54       -39  
       0       110      -106       -90       -52   ...      -14       116       112      -120       -42  
       0       122        34        24      -124   ...     -118        60       -15        20        73  
       0       -37        70       -57      -108   ...      125        40        71       104       -62  
       0        60        42        90        36   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 31185.91us.
Avg NPU gflops: 4951.46

Min NPU matmul time: 29853.00us.
Max NPU gflops: 5172.54

Max NPU matmul time: 33770.00us.
Min NPU gflops: 4572.58

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 3168 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x3168x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x3168x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x3168x384_80x88x96_4rx4c.txt ../build/aie_6720x3168x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x3168x384_80x88x96_4rx4c.xclbin -i build/insts_6720x3168x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 3168 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x3168x384
Sequence instr count: 4596
Loading xclbin: build/final_6720x3168x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x3168x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        98        68        85         0   ...      -86        40         9        -8        29  
       0       -69       -62       118       -36   ...      -27        24       -12      -122        16  
       0        80         4       -69        36   ...      -49        16        94        78       105  
       0       -32       124        31        68   ...       44       -40       -55      -110        15  
    -128        99       118        69       -20   ...      -54      -128       -99        70         9  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3562.77us.
Avg NPU gflops: 4589.10

Min NPU matmul time: 3175.00us.
Max NPU gflops: 5149.58

Max NPU matmul time: 4475.00us.
Min NPU gflops: 3653.61

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 3168 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x3168x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x3168x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x3168x1920_80x88x96_4rx4c.txt ../build/aie_6720x3168x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x3168x1920_80x88x96_4rx4c.xclbin -i build/insts_6720x3168x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 3168 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x3168x1920
Sequence instr count: 4596
Loading xclbin: build/final_6720x3168x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x3168x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        76        56         4       -16   ...       74       100       -67        -6        55  
       0        62       118        70        56   ...      -48         4        25       -62        24  
    -128       -90       -50       -54       104   ...       15        48       108        76       -17  
       0        -2       -34       -39       -88   ...        3       -76      -110        54        78  
    -128        58       124       120        28   ...       24       112       -76      -110       -24  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 15768.23us.
Avg NPU gflops: 5184.45

Min NPU matmul time: 14754.00us.
Max NPU gflops: 5540.84

Max NPU matmul time: 17370.00us.
Min NPU gflops: 4706.37

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 3168 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x3168x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x3168x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x3168x3456_80x88x96_4rx4c.txt ../build/aie_6720x3168x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x3168x3456_80x88x96_4rx4c.xclbin -i build/insts_6720x3168x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 3168 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x3168x3456
Sequence instr count: 4596
Loading xclbin: build/final_6720x3168x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x3168x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -97        72       -43        88   ...      -92        12        90       -36        35  
       0        -1       -10       120       -24   ...      -29      -120        26        12         5  
    -128       -22        26       -55       -40   ...      -39       -28         9       -26        62  
       0       -25       -18       -75        68   ...      -71        60        55       -96        43  
    -128      -111       -32       -81        80   ...       12       -48       -28       -92      -105  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 28714.25us.
Avg NPU gflops: 5124.61

Min NPU matmul time: 27420.00us.
Max NPU gflops: 5366.50

Max NPU matmul time: 30922.00us.
Min NPU gflops: 4758.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (1.0s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 3168 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x3168x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x3168x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x3168x4992_80x88x96_4rx4c.txt ../build/aie_6720x3168x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x3168x4992_80x88x96_4rx4c.xclbin -i build/insts_6720x3168x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 3168 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x3168x4992
Sequence instr count: 4596
Loading xclbin: build/final_6720x3168x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x3168x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128         4         2        33       -20   ...       97       -24       -89       126        34  
       0        96       -78       -23       -40   ...       23       -40        29       -34       122  
       0       -20       106      -120       -56   ...       13       -20       125        68       -87  
       0        29       124       -51        -4   ...      -75        16        72       114       -27  
       0       -28       -46       -26        80   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 42099.32us.
Avg NPU gflops: 5048.75

Min NPU matmul time: 40859.00us.
Max NPU gflops: 5202.01

Max NPU matmul time: 44733.00us.
Min NPU gflops: 4751.50

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 3168 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x3168x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x3168x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x3168x6528_80x88x96_4rx4c.txt ../build/aie_6720x3168x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x3168x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x3168x6528_80x88x96_4rx4c.xclbin -i build/insts_6720x3168x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 3168 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x3168x6528
Sequence instr count: 4596
Loading xclbin: build/final_6720x3168x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x3168x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -56      -120       -33       -28   ...       30        12       -78       104        50  
       0        77        48        -7       -16   ...       90       116        93        90        17  
    -128       -83       -28       112       -80   ...       42        92         3      -122       -95  
       0        34       114       -32        -8   ...     -105        40       -96      -112       -98  
    -128       -38      -118        89        72   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 54289.10us.
Avg NPU gflops: 5119.79

Min NPU matmul time: 52972.00us.
Max NPU gflops: 5247.09

Max NPU matmul time: 56496.00us.
Min NPU gflops: 4919.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 4576 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x4576x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x4576x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x4576x384_80x88x96_4rx4c.txt ../build/aie_6720x4576x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x4576x384_80x88x96_4rx4c.xclbin -i build/insts_6720x4576x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 4576 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x4576x384
Sequence instr count: 4596
Loading xclbin: build/final_6720x4576x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x4576x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        53        16       -74        96   ...      -65       -48       -96        70       -71  
       0       -96      -108       -25      -108   ...     -121       -44      -117      -100      -122  
    -128        34       -76       -95       -28   ...       89        80       -73        42        31  
       0       -13        32        69       -28   ...      -14       -88        14       -80       -21  
    -128      -127        -8        29         8   ...       83        88      -108        74       -25  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5668.46us.
Avg NPU gflops: 4166.31

Min NPU matmul time: 4490.00us.
Max NPU gflops: 5259.81

Max NPU matmul time: 7754.00us.
Min NPU gflops: 3045.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 4576 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x4576x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x4576x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x4576x1920_80x88x96_4rx4c.txt ../build/aie_6720x4576x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x4576x1920_80x88x96_4rx4c.xclbin -i build/insts_6720x4576x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 4576 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x4576x1920
Sequence instr count: 4596
Loading xclbin: build/final_6720x4576x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x4576x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        22       126       -59       -52   ...        0        -4       -89        14       102  
       0        80       102        51       -96   ...      -71       -16        74       -10         0  
       0       -51        86         6        56   ...       55       -64        62        -4        70  
       0       -31        -8       -31         0   ...       -3       -28      -117       -94        47  
       0       -60       -80       -82       124   ...       42       120        91       114        20  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 22267.69us.
Avg NPU gflops: 5302.88

Min NPU matmul time: 21295.00us.
Max NPU gflops: 5545.09

Max NPU matmul time: 23792.00us.
Min NPU gflops: 4963.13

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 4576 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x4576x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x4576x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x4576x3456_80x88x96_4rx4c.txt ../build/aie_6720x4576x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x4576x3456_80x88x96_4rx4c.xclbin -i build/insts_6720x4576x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 4576 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x4576x3456
Sequence instr count: 4596
Loading xclbin: build/final_6720x4576x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x4576x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -48       -86        14       -96   ...       28       104        -9        22        17  
       0        33       -18       -99        56   ...       44        80        44        90         7  
       0       -38       110       -77        96   ...       51        88       -74       -50        27  
       0       122       -42       -42        68   ...       88        56       -88        62        98  
    -128        -3         0       -44        72   ...     -120      -100        14       -62       -29  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 41355.04us.
Avg NPU gflops: 5139.61

Min NPU matmul time: 40203.00us.
Max NPU gflops: 5286.89

Max NPU matmul time: 42807.00us.
Min NPU gflops: 4965.29

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 4576 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x4576x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x4576x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x4576x4992_80x88x96_4rx4c.txt ../build/aie_6720x4576x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x4576x4992_80x88x96_4rx4c.xclbin -i build/insts_6720x4576x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 4576 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x4576x4992
Sequence instr count: 4596
Loading xclbin: build/final_6720x4576x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x4576x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        88        42       -93        84   ...      -61       -84       123       -26       103  
       0       100        34        15       -96   ...       25        24        59      -104       101  
       0       -89      -108        44       -96   ...      -33       -36        -7        80        87  
       0       -24        14        -1      -108   ...       67       -56        29       -76       -99  
    -128       -35       -32         0        96   ...       51       100       -67         6       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 60253.21us.
Avg NPU gflops: 5095.42

Min NPU matmul time: 58545.00us.
Max NPU gflops: 5244.09

Max NPU matmul time: 68224.00us.
Min NPU gflops: 4500.11

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 4576 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x4576x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x4576x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x4576x6528_80x88x96_4rx4c.txt ../build/aie_6720x4576x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x4576x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x4576x6528_80x88x96_4rx4c.xclbin -i build/insts_6720x4576x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 4576 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x4576x6528
Sequence instr count: 4596
Loading xclbin: build/final_6720x4576x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x4576x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       111       -72       101       -56   ...      -58       116       -90         6        26  
       0      -105       -44        99        56   ...      -45        -4      -125      -100       -35  
       0       -89       -90        44       -20   ...       -5       -28        64       -26         9  
       0       -73      -116       -42      -108   ...       64       -88      -107      -118      -124  
    -128       118         6       -31       -20   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 76916.34us.
Avg NPU gflops: 5219.71

Min NPU matmul time: 74768.00us.
Max NPU gflops: 5369.70

Max NPU matmul time: 79895.00us.
Min NPU gflops: 5025.11

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 5984 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x5984x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x5984x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x5984x384_80x88x96_4rx4c.txt ../build/aie_6720x5984x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x5984x384_80x88x96_4rx4c.xclbin -i build/insts_6720x5984x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 5984 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x5984x384
Sequence instr count: 4596
Loading xclbin: build/final_6720x5984x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x5984x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -28       -60      -115        84   ...      -94        76        77        20       -10  
       0       -79       -98       -87       -88   ...      -94       -76      -121        96       104  
    -128       104        18       -54       124   ...      117       -20       -84      -108        54  
       0        77       -44       -71       -12   ...       53       116         0        50       114  
       0        48         4        57       -40   ...      -47      -100      -125      -118        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6376.57us.
Avg NPU gflops: 4843.23

Min NPU matmul time: 5778.00us.
Max NPU gflops: 5344.96

Max NPU matmul time: 7326.00us.
Min NPU gflops: 4215.56

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 5984 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x5984x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x5984x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x5984x1920_80x88x96_4rx4c.txt ../build/aie_6720x5984x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x5984x1920_80x88x96_4rx4c.xclbin -i build/insts_6720x5984x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 5984 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x5984x1920
Sequence instr count: 4596
Loading xclbin: build/final_6720x5984x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x5984x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        24       104        42         8   ...      -22       -36        18        42        12  
       0        47       -74        29       104   ...      -20       -68       -67        -2        55  
       0       -14       -10      -113       120   ...      -70       -40        79       -44        77  
       0       -92       -42        99        60   ...       95       108        -3       100        18  
    -128        17        98       -33         8   ...       90        44       -81      -128        56  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 28707.14us.
Avg NPU gflops: 5379.01

Min NPU matmul time: 27719.00us.
Max NPU gflops: 5570.76

Max NPU matmul time: 30249.00us.
Min NPU gflops: 5104.83

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 5984 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x5984x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x5984x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x5984x3456_80x88x96_4rx4c.txt ../build/aie_6720x5984x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x5984x3456_80x88x96_4rx4c.xclbin -i build/insts_6720x5984x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 5984 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x5984x3456
Sequence instr count: 4596
Loading xclbin: build/final_6720x5984x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x5984x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        74       -92       -82        24   ...       75       -12       -34         2       113  
       0       -44       106      -121        68   ...      115       -20        83        98       -23  
    -128       -46       -92       -38        44   ...      -52       -96       -30      -114        54  
       0      -111       -46       -95       112   ...        7      -128       -16       -70      -121  
       0        33       -64        39        36   ...      -16       -76        -8         2        30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 52225.87us.
Avg NPU gflops: 5322.05

Min NPU matmul time: 50930.00us.
Max NPU gflops: 5457.46

Max NPU matmul time: 54138.00us.
Min NPU gflops: 5134.08

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 5984 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x5984x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x5984x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x5984x4992_80x88x96_4rx4c.txt ../build/aie_6720x5984x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x5984x4992_80x88x96_4rx4c.xclbin -i build/insts_6720x5984x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 5984 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x5984x4992
Sequence instr count: 4596
Loading xclbin: build/final_6720x5984x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x5984x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       117       -62        71       -84   ...     -117        36       116        24       -40  
       0        -2       -54       -99       -48   ...      -52       -36        45        68       -60  
    -128        41       -44      -108        32   ...       44        36       121       -44        90  
       0         0       -62        43        76   ...       83        52      -101        52      -125  
       0         7      -108       -66        36   ...      122       -16       -37       -82       -55  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 76277.74us.
Avg NPU gflops: 5263.42

Min NPU matmul time: 74382.00us.
Max NPU gflops: 5397.56

Max NPU matmul time: 80685.00us.
Min NPU gflops: 4975.91

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 5984 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x5984x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x5984x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x5984x6528_80x88x96_4rx4c.txt ../build/aie_6720x5984x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x5984x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x5984x6528_80x88x96_4rx4c.xclbin -i build/insts_6720x5984x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 5984 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x5984x6528
Sequence instr count: 4596
Loading xclbin: build/final_6720x5984x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x5984x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...       91        92        93        94        95  
      96        97        98        99       100   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...       27        28        29        30        31  
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      32        33        34        35        36   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...       59        60        61        62        63  
      64        65        66        67        68   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        -1        58        59        56   ...      -80        52        77       -26      -119  
       0       -17         2        45       -28   ...     -112        72        11        62       -43  
       0        10        60       -77      -104   ...      -66        48        81       108        97  
       0       -15        86      -102        76   ...      -39       -96       -92        42        93  
    -128       104       -86       -91       -44   ...       87       -72      -117       -54        99  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 98531.45us.
Avg NPU gflops: 5328.39

Min NPU matmul time: 96614.00us.
Max NPU gflops: 5434.14

Max NPU matmul time: 101936.00us.
Min NPU gflops: 5150.43

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 7392 -N 384 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x7392x384_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x7392x384_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x7392x384_80x88x96_4rx4c.txt ../build/aie_6720x7392x384_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x384_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x7392x384_80x88x96_4rx4c.xclbin -i build/insts_6720x7392x384_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 7392 -N 384 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x7392x384
Sequence instr count: 4596
Loading xclbin: build/final_6720x7392x384_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x7392x384_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -30        20      -121       -14       -85  
       0       -29       -76        -8       -36   ...      -46       124        -1        10       123  
       0        23       112        14       -60   ...       37        44       105      -120      -103  
    -128       -44        60       108       -76   ...      -78       -80       -80        86        16  
       0        -4       -30      -119        96   ...      -48        24        66      -110       -47  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       -44      -103        16   ...      -91        92        96       -92       -19  
       0       -29        76        13        80   ...       74        -8        36       104        24  
    -128       -14        60        22      -112   ...     -116       -44       -95      -112        60  
       0        34        58        75        48   ...       17        32       -19       -32        46  
       0       -32        96        87        28   ...       52       -96      -113       110       -40  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7828.76us.
Avg NPU gflops: 4873.03

Min NPU matmul time: 7021.00us.
Max NPU gflops: 5433.67

Max NPU matmul time: 9744.00us.
Min NPU gflops: 3915.21

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 7392 -N 1920 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x7392x1920_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x7392x1920_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x7392x1920_80x88x96_4rx4c.txt ../build/aie_6720x7392x1920_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x1920_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x7392x1920_80x88x96_4rx4c.xclbin -i build/insts_6720x7392x1920_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 7392 -N 1920 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x7392x1920
Sequence instr count: 4596
Loading xclbin: build/final_6720x7392x1920_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x7392x1920_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -48        24        66      -110       -47  
    -128        35        64       -70       112   ...      -72       104      -106       -66       -62  
       0        89        98       -42       -44   ...      119      -108       101        50        53  
       0       -93         6       -32        24   ...      124       -96        22       -10       124  
       0        59       -84        56      -112   ...      121       -68       -64       -98       -58  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        74       -60      -121        64   ...      108      -124         3      -114       -14  
       0       -49       -84        99        80   ...     -125       108       -65      -124       106  
       0       104       110      -104       -32   ...      105        16         3       -20        92  
       0        65        78      -117        80   ...       54       -64       -73      -100      -104  
       0        98        48       -29       -24   ...      -91       -76        84       -56        86  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 34981.92us.
Avg NPU gflops: 5452.79

Min NPU matmul time: 33924.00us.
Max NPU gflops: 5622.84

Max NPU matmul time: 36880.00us.
Min NPU gflops: 5172.16

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 7392 -N 3456 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x7392x3456_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x7392x3456_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x7392x3456_80x88x96_4rx4c.txt ../build/aie_6720x7392x3456_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:18 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x3456_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x7392x3456_80x88x96_4rx4c.xclbin -i build/insts_6720x7392x3456_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 7392 -N 3456 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x7392x3456
Sequence instr count: 4596
Loading xclbin: build/final_6720x7392x3456_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x7392x3456_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -100       100        30       100       -16  
    -128        84       -76        43         8   ...      -72       -28       101       -62       -76  
       0       -94       -94       -51       120   ...      -27      -120        22        82        86  
       0        29        28       117       100   ...      -97        52        50       108       -33  
       0         8      -124        -1        20   ...       30       108        80       108        26  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        75        62       -32         4   ...      -32        -4       -33         0       -16  
       0      -100        42       120       -96   ...      -40         4       117       100       -11  
       0        24       -54       -65       -48   ...      120       -44        69       -70       107  
       0        95         4       -31        28   ...       60      -100      -108       -82      -116  
       0        76       -70       -94        64   ...       76       -96      -104       -66        41  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 64442.10us.
Avg NPU gflops: 5328.01

Min NPU matmul time: 62986.00us.
Max NPU gflops: 5451.19

Max NPU matmul time: 66917.00us.
Min NPU gflops: 5130.96

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 7392 -N 4992 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x7392x4992_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x7392x4992_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x7392x4992_80x88x96_4rx4c.txt ../build/aie_6720x7392x4992_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x4992_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x7392x4992_80x88x96_4rx4c.xclbin -i build/insts_6720x7392x4992_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 7392 -N 4992 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x7392x4992
Sequence instr count: 4596
Loading xclbin: build/final_6720x7392x4992_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x7392x4992_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...     -110       104        64       118       -92  
       0       -73        76       -81        80   ...       36        -4       105       -74        31  
       0      -100       -58       -35       -92   ...      -35       -60       -28        78       -70  
    -128         0       -34       -32        84   ...       97      -124      -117        18       -55  
       0       -92        50       -49        16   ...       51       -88        98        92       124  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -38        -8       -12       -12   ...       95        84       -98       -58       -35  
       0       -50         2        75       120   ...       87         0        73       106        39  
    -128        14       -18       119       -96   ...      104        68       -57       -50       -88  
       0       -72         4      -112        80   ...      -25       -36       -36       -28       -94  
    -128       -38       -96       119       108   ...        2        20       -57        34       -23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 93670.95us.
Avg NPU gflops: 5294.57

Min NPU matmul time: 92131.00us.
Max NPU gflops: 5383.07

Max NPU matmul time: 99582.00us.
Min NPU gflops: 4980.29

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int16_t -DDTYPE_ACC=int16_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 80 -k 88 -n 96 -mtk 352 -ktn 352 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6720 -K 7392 -N 6528 --dtype_in i8 --dtype_out i16 --trace_size 0 > build/aie_6720x7392x6528_80x88x96_4rx4c.mlir
mkdir -p build
ar rvs build/mm_80x88x96.o precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_80x88x96_i8_i16.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6720x7392x6528_80x88x96_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6720x7392x6528_80x88x96_4rx4c.txt ../build/aie_6720x7392x6528_80x88x96_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6720x7392x6528_80x88x96_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6720x7392x6528_80x88x96_4rx4c.xclbin -i build/insts_6720x7392x6528_80x88x96_4rx4c.txt -k MLIR_AIE -M 6720 -K 7392 -N 6528 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6720x7392x6528
Sequence instr count: 4596
Loading xclbin: build/final_6720x7392x6528_80x88x96_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6720x7392x6528_80x88x96_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int16_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      -37       -36       -35       -34       -33  
     -32       -31       -30       -29       -28   ...      -69       -68       -67       -66       -65  
     -64       -63       -62       -61       -60   ...     -101      -100       -99       -98       -97  
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -96       -95       -94       -93       -92   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       91        92        93        94        95  
      96        97        98        99       100   ...       59        60        61        62        63  
      64        65        66        67        68   ...       27        28        29        30        31  
      32        33        34        35        36   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      124       -32       -86       102       -92  
    -128         2       -90        61        96   ...       64      -128       -23       -64       -83  
       0        72       -52       -54       -64   ...       28       -40       -25        52       -81  
    -128        26       -82      -117      -120   ...      -10       -28       117      -104       -44  
       0       -49      -126         7       -60   ...      107       104       -72       -80      -119  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        40       -90        29       -12   ...      -45      -104        93        14        46  
       0      -128        82        93      -104   ...      125       108       -20      -128       127  
       0       -90       -22        62        96   ...      113       -24       -89       -54         7  
       0        23       -10        64        40   ...       70         8        29      -102       -17  
    -128        97        52       -39        12   ...       39       -28       114        -6      -124  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 120723.93us.
Avg NPU gflops: 5372.15

Min NPU matmul time: 119340.00us.
Max NPU gflops: 5434.45

Max NPU matmul time: 126452.00us.
Min NPU gflops: 5128.80

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
