mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 384 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x384x448_96x96x112_4rx4c.mlir
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x384x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x384x448_96x96x112_4rx4c.txt ../build/aie_384x384x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━                           6% -:--:-- 0:00:03  1/17 4 Workers
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 384 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x384x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x384x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x384x2240_96x96x112_4rx4c.txt ../build/aie_384x384x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 384 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x384x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x384x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x384x4032_96x96x112_4rx4c.txt ../build/aie_384x384x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x384x4032_96x96x112_4rx4c.xclbin -i build/insts_384x384x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 384 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x384x4032
Sequence instr count: 276
Loading xclbin: build/final_384x384x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x384x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        32       120        38        56   ...       40        92       115       -90        75  
       0        43        80        22       -20   ...      -48       -36         6        70       -88  
       0       -92       -14        41        48   ...      122       -32       -20      -106      -108  
       0       -87       -32       -13       124   ...       27         4       -44       -52         9  
      64      -117        22       -89        56   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 1142.96us.
Avg NPU gflops: 1040.36

Min NPU matmul time: 394.00us.
Max NPU gflops: 3017.98

Max NPU matmul time: 3423.00us.
Min NPU gflops: 347.38

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 384 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x384x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x384x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x384x5824_96x96x112_4rx4c.txt ../build/aie_384x384x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x384x5824_96x96x112_4rx4c.xclbin -i build/insts_384x384x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 384 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x384x5824
Sequence instr count: 276
Loading xclbin: build/final_384x384x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x384x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        54        82        -6       -96   ...       47      -120       110      -126       -64  
       0         2       -78       -68        52   ...      104        -8        94        62        -5  
       0      -121       116      -116        76   ...      -15        64       -35       -20        11  
       0        49        16      -127         4   ...       23       -88       -27       -14       109  
    -128        48      -112        93        20   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 2306.63us.
Avg NPU gflops: 744.62

Min NPU matmul time: 537.00us.
Max NPU gflops: 3198.45

Max NPU matmul time: 3565.00us.
Min NPU gflops: 481.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 384 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x384x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x384x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x384x7616_96x96x112_4rx4c.txt ../build/aie_384x384x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x384x7616_96x96x112_4rx4c.xclbin -i build/insts_384x384x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 384 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x384x7616
Sequence instr count: 276
Loading xclbin: build/final_384x384x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x384x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -75       112       -92       -96   ...       -9       -84       -51        98        17  
       0        85       -26       -64       -92   ...      -16       -72        55      -122      -101  
       0       -13        74       -25       -72   ...        9       -48       -40       -24       -17  
    -128       -22       116        -5        12   ...      -77        20       -11        16       -48  
      64       -21        42       -33        12   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 1998.81us.
Avg NPU gflops: 1123.69

Min NPU matmul time: 722.00us.
Max NPU gflops: 3110.87

Max NPU matmul time: 3859.00us.
Min NPU gflops: 582.03

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 1920 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x1920x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x1920x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x1920x448_96x96x112_4rx4c.txt ../build/aie_384x1920x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:15 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x1920x448_96x96x112_4rx4c.xclbin -i build/insts_384x1920x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 1920 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x1920x448
Sequence instr count: 276
Loading xclbin: build/final_384x1920x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x1920x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        67        36       -69        -8   ...      -88         8        52      -120       -87  
       0       -48       -92        22       -24   ...       62        36       -68       -44        16  
       0       -68        64       121        96   ...       79       100       -43         6        68  
       0       -24        54       -65      -116   ...      -43        96        19       -30       -10  
       0       -28       -98        70      -112   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 0.00 s.

Avg NPU matmul time: 880.25us.
Avg NPU gflops: 750.47

Min NPU matmul time: 305.00us.
Max NPU gflops: 2165.91

Max NPU matmul time: 3154.00us.
Min NPU gflops: 209.45

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 1920 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x1920x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x1920x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x1920x2240_96x96x112_4rx4c.txt ../build/aie_384x1920x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x1920x2240_96x96x112_4rx4c.xclbin -i build/insts_384x1920x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 1920 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x1920x2240
Sequence instr count: 276
Loading xclbin: build/final_384x1920x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x1920x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        35        36        13       -12   ...      111         0        35       100        85  
       0       113        16       113      -104   ...       11       -44        20       110        45  
       0       -17       -44       -16        20   ...       64       -36        -1         4        80  
    -128        -7       -60        15        32   ...      -85        -4         1        50       -78  
      64       -98        72      -108       104   ...       12       -56      -106         0       -63  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2480.38us.
Avg NPU gflops: 1331.66

Min NPU matmul time: 720.00us.
Max NPU gflops: 4587.52

Max NPU matmul time: 3797.00us.
Min NPU gflops: 869.90

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 1920 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x1920x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x1920x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x1920x4032_96x96x112_4rx4c.txt ../build/aie_384x1920x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x1920x4032_96x96x112_4rx4c.xclbin -i build/insts_384x1920x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 1920 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x1920x4032
Sequence instr count: 276
Loading xclbin: build/final_384x1920x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x1920x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -87      -120        89       -84   ...       15       -44        86       -24        67  
       0       -72        30        46       -96   ...      -25        84       -92       -68        56  
     -64         6        26        56       -72   ...      -12       -28       -25       -24       -19  
       0       -30        96        58        96   ...       57        52         8       -72      -126  
     -64        68       -30       -81       -60   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2449.14us.
Avg NPU gflops: 2427.56

Min NPU matmul time: 1286.00us.
Max NPU gflops: 4623.19

Max NPU matmul time: 3819.00us.
Min NPU gflops: 1556.80

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.8s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 1920 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x1920x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x1920x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x1920x5824_96x96x112_4rx4c.txt ../build/aie_384x1920x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x1920x5824_96x96x112_4rx4c.xclbin -i build/insts_384x1920x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 1920 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x1920x5824
Sequence instr count: 276
Loading xclbin: build/final_384x1920x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x1920x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -90       102        95        24   ...      -30        24        45      -100      -120  
       0       104       -58       -75         4   ...      -82       120        15       -42        87  
    -128       -34        -4        90        12   ...      -96        36       107        56        23  
       0       -14       116      -108       -20   ...       85       -12       -91       -68       -52  
    -128        59       104        79       -28   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3240.10us.
Avg NPU gflops: 2650.49

Min NPU matmul time: 1702.00us.
Max NPU gflops: 5045.73

Max NPU matmul time: 4393.00us.
Min NPU gflops: 1954.89

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 1920 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x1920x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x1920x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x1920x7616_96x96x112_4rx4c.txt ../build/aie_384x1920x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x1920x7616_96x96x112_4rx4c.xclbin -i build/insts_384x1920x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 1920 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x1920x7616
Sequence instr count: 276
Loading xclbin: build/final_384x1920x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x1920x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        78        68        81        -4   ...      -48        60        50      -100       -84  
       0        40        56       -50       -80   ...       15       -36        17       122       -65  
     -64       -33      -104      -107       -88   ...      106       -84        54       -52       101  
    -128        41        30        77       -52   ...      -32        -8       -66        16       125  
      64      -128        76        45       -44   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3255.23us.
Avg NPU gflops: 3449.91

Min NPU matmul time: 2103.00us.
Max NPU gflops: 5340.11

Max NPU matmul time: 4367.00us.
Min NPU gflops: 2571.62

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 3456 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x3456x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x3456x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x3456x448_96x96x112_4rx4c.txt ../build/aie_384x3456x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:15 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x3456x448_96x96x112_4rx4c.xclbin -i build/insts_384x3456x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 3456 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x3456x448
Sequence instr count: 276
Loading xclbin: build/final_384x3456x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x3456x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        99       -10        -5      -108   ...      -37        16       112        20       112  
       0       101       -72         6        32   ...      120        92       -69      -114      -126  
     -64       117       118        90       104   ...      -28         8       -23        62      -120  
       0       -85      -104       -13        72   ...       72       124        29      -122       -67  
    -128        25       112       100       -88   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 991.66us.
Avg NPU gflops: 1199.09

Min NPU matmul time: 384.00us.
Max NPU gflops: 3096.58

Max NPU matmul time: 3545.00us.
Min NPU gflops: 335.43

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 3456 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x3456x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x3456x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x3456x2240_96x96x112_4rx4c.txt ../build/aie_384x3456x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x3456x2240_96x96x112_4rx4c.xclbin -i build/insts_384x3456x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 3456 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x3456x2240
Sequence instr count: 276
Loading xclbin: build/final_384x3456x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x3456x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       126         2        36   ...      115        -4        19        74       -50  
       0        70        18        35       -56   ...      -35       -36      -116        36        18  
       0       -72       -54        78       -88   ...       34       -32       -57       -60       -24  
       0        69        80       -80       -16   ...     -128       -96       106      -120       -80  
    -128       -74       -72        24        44   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3077.74us.
Avg NPU gflops: 1931.75

Min NPU matmul time: 1173.00us.
Max NPU gflops: 5068.56

Max NPU matmul time: 3959.00us.
Min NPU gflops: 1501.75

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 3456 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x3456x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x3456x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x3456x4032_96x96x112_4rx4c.txt ../build/aie_384x3456x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x3456x4032_96x96x112_4rx4c.xclbin -i build/insts_384x3456x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 3456 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x3456x4032
Sequence instr count: 276
Loading xclbin: build/final_384x3456x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x3456x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64       -14       126        72       -96   ...     -117        68        89       -92        17  
       0        49       -54       -46       108   ...      -98      -124      -117       -80        37  
       0       -30       -84        82       100   ...       32        84      -119        72      -107  
    -128       116         2        -6      -120   ...       84      -116        37         0        81  
     -64        80       -86        73      -112   ...      -72       120        41         2        37  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3227.02us.
Avg NPU gflops: 3316.30

Min NPU matmul time: 1935.00us.
Max NPU gflops: 5530.63

Max NPU matmul time: 4658.00us.
Min NPU gflops: 2297.50

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 3456 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x3456x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x3456x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x3456x5824_96x96x112_4rx4c.txt ../build/aie_384x3456x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x3456x5824_96x96x112_4rx4c.xclbin -i build/insts_384x3456x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 3456 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x3456x5824
Sequence instr count: 276
Loading xclbin: build/final_384x3456x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x3456x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        87      -104       112       -88   ...      126        16       118        48        99  
       0        23        86        93        16   ...        8      -112       113       -50        45  
       0      -125       -52        35        52   ...      -99      -100        -7       100      -117  
       0       -68       -68        78        88   ...      -53      -108       125       -28        63  
     -64        95       112        30      -104   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3359.73us.
Avg NPU gflops: 4601.00

Min NPU matmul time: 2714.00us.
Max NPU gflops: 5695.69

Max NPU matmul time: 4726.00us.
Min NPU gflops: 3270.86

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 3456 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x3456x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x3456x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x3456x7616_96x96x112_4rx4c.txt ../build/aie_384x3456x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x3456x7616_96x96x112_4rx4c.xclbin -i build/insts_384x3456x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 3456 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x3456x7616
Sequence instr count: 276
Loading xclbin: build/final_384x3456x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x3456x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -108        32       120       104   ...      113      -116        24        10        11  
       0        70       122       -86      -120   ...     -118       -44        11       -24        22  
    -128       -49        98       -41       116   ...       73        72       -16        74        76  
       0        16        92       -47        40   ...      118       -96        62        52        81  
    -128        14        72       116       -40   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3714.97us.
Avg NPU gflops: 5441.35

Min NPU matmul time: 3383.00us.
Max NPU gflops: 5975.30

Max NPU matmul time: 6019.00us.
Min NPU gflops: 3358.44

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 4992 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x4992x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x4992x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x4992x448_96x96x112_4rx4c.txt ../build/aie_384x4992x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x4992x448_96x96x112_4rx4c.xclbin -i build/insts_384x4992x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 4992 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x4992x448
Sequence instr count: 276
Loading xclbin: build/final_384x4992x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x4992x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        35        44         8        84   ...       45      -104       -17        60         5  
       0       -60      -104      -106       -96   ...       60      -120       -57        72        -1  
     -64       117        26       105       -60   ...       51        80       124      -120       -74  
    -128       123       -48       -78       108   ...     -113       -64       -49      -118       -38  
    -128       -14        22        84        28   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 1759.53us.
Avg NPU gflops: 976.15

Min NPU matmul time: 509.00us.
Max NPU gflops: 3374.40

Max NPU matmul time: 3513.00us.
Min NPU gflops: 488.92

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 4992 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x4992x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x4992x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x4992x2240_96x96x112_4rx4c.txt ../build/aie_384x4992x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x4992x2240_96x96x112_4rx4c.xclbin -i build/insts_384x4992x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 4992 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x4992x2240
Sequence instr count: 276
Loading xclbin: build/final_384x4992x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x4992x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -31      -116        66       -32   ...        8       124         5       -92       -27  
       0        64       122        75        84   ...      107       120        31        68       -43  
      64       124       -32       -41        84   ...      -58       -36       -20        26       115  
       0      -124        64       -16       -32   ...       62        36        10       -16       -97  
      64       108       -10        89       -96   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3168.88us.
Avg NPU gflops: 2710.05

Min NPU matmul time: 1590.00us.
Max NPU gflops: 5401.16

Max NPU matmul time: 4340.00us.
Min NPU gflops: 1978.76

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 4992 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x4992x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x4992x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x4992x4032_96x96x112_4rx4c.txt ../build/aie_384x4992x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x4992x4032_96x96x112_4rx4c.xclbin -i build/insts_384x4992x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 4992 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x4992x4032
Sequence instr count: 276
Loading xclbin: build/final_384x4992x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x4992x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -117        88      -106      -120   ...      -52       -16        58        50        -2  
       0       -56        66        91       116   ...       68        84        -3       -36       -39  
       0        56        44       110      -128   ...      -90       -40      -127       -14       104  
       0       122        76        -1         8   ...       55        84        93         8         5  
       0       -45       -70       110       -20   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3376.76us.
Avg NPU gflops: 4577.79

Min NPU matmul time: 2705.00us.
Max NPU gflops: 5714.64

Max NPU matmul time: 4153.00us.
Min NPU gflops: 3722.15

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 4992 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x4992x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x4992x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x4992x5824_96x96x112_4rx4c.txt ../build/aie_384x4992x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x4992x5824_96x96x112_4rx4c.xclbin -i build/insts_384x4992x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 4992 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x4992x5824
Sequence instr count: 276
Loading xclbin: build/final_384x4992x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x4992x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        36       114       -55        16   ...        6      -108       112        74        47  
       0      -110       -36       -57         0   ...      -77       -48       -51        94      -121  
      64       -32        40        91      -104   ...        4        92       -86       -72        45  
    -128       -49       -10       -83      -124   ...       30       -88       -88        70        34  
     -64       -54        26        99       -92   ...     -105        24       -32       120       -70  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4569.10us.
Avg NPU gflops: 4886.82

Min NPU matmul time: 3666.00us.
Max NPU gflops: 6090.67

Max NPU matmul time: 6331.00us.
Min NPU gflops: 3526.83

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 4992 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x4992x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x4992x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x4992x7616_96x96x112_4rx4c.txt ../build/aie_384x4992x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x4992x7616_96x96x112_4rx4c.xclbin -i build/insts_384x4992x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 4992 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x4992x7616
Sequence instr count: 276
Loading xclbin: build/final_384x4992x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x4992x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -38      -106       -15        28   ...       60        88       -95       124        98  
       0        26         6        48      -116   ...      -96       -36        74         6       -32  
    -128       -33        16        83       -72   ...       98      -104        -5        82       -90  
    -128        21       -82       -74         8   ...       76       -84       -12       -36      -110  
     -64       -74       -78        12        -8   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5830.62us.
Avg NPU gflops: 5007.81

Min NPU matmul time: 4883.00us.
Max NPU gflops: 5979.65

Max NPU matmul time: 8385.00us.
Min NPU gflops: 3482.25

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 6528 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x6528x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x6528x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x6528x448_96x96x112_4rx4c.txt ../build/aie_384x6528x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x6528x448_96x96x112_4rx4c.xclbin -i build/insts_384x6528x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 6528 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x6528x448
Sequence instr count: 276
Loading xclbin: build/final_384x6528x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x6528x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       113      -124        23      -128   ...       -5       -64        74       108       119  
       0       -61      -102       103        16   ...       42       108        33        30       -99  
      64       -55      -108        56        92   ...      -38        80       126       -46        81  
    -128       -76       124        -1      -124   ...       76       -20       107        16       111  
       0        25       -72        55      -112   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 563.88us.
Avg NPU gflops: 3983.21

Min NPU matmul time: 525.00us.
Max NPU gflops: 4278.19

Max NPU matmul time: 640.00us.
Min NPU gflops: 3509.45

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 6528 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x6528x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x6528x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x6528x2240_96x96x112_4rx4c.txt ../build/aie_384x6528x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x6528x2240_96x96x112_4rx4c.xclbin -i build/insts_384x6528x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 6528 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x6528x2240
Sequence instr count: 276
Loading xclbin: build/final_384x6528x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x6528x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        26       112       -31       112   ...      -49       -32       114      -116        38  
       0        -7        40        88        52   ...       56        -8       -21        24       100  
      64        89      -100      -115        44   ...     -113       -68      -100       -82       104  
       0       120        68        94        -4   ...      -88       -88       -19        94        99  
      64       -61        48       -28       116   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3103.34us.
Avg NPU gflops: 3618.76

Min NPU matmul time: 1981.00us.
Max NPU gflops: 5668.98

Max NPU matmul time: 4477.00us.
Min NPU gflops: 2508.43

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 6528 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x6528x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x6528x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x6528x4032_96x96x112_4rx4c.txt ../build/aie_384x6528x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x6528x4032_96x96x112_4rx4c.xclbin -i build/insts_384x6528x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 6528 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x6528x4032
Sequence instr count: 276
Loading xclbin: build/final_384x6528x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x6528x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -20        26       -60      -128   ...       62       -84       -70        -2         8  
       0       -90      -100        91       104   ...       -3        56       -46        80       -92  
    -128       -24       124      -122       -16   ...       72       -96        80       -98        23  
       0       -61        24      -126       -96   ...       59       -28       -82      -104       -51  
     -64      -116       -28       -76        -4   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3768.13us.
Avg NPU gflops: 5364.58

Min NPU matmul time: 3334.00us.
Max NPU gflops: 6063.12

Max NPU matmul time: 5864.00us.
Min NPU gflops: 3447.21

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 6528 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x6528x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x6528x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x6528x5824_96x96x112_4rx4c.txt ../build/aie_384x6528x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x6528x5824_96x96x112_4rx4c.xclbin -i build/insts_384x6528x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 6528 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x6528x5824
Sequence instr count: 276
Loading xclbin: build/final_384x6528x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x6528x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        92        18       -69        68   ...     -122       -12       -29        36        82  
       0      -125        56       -40        36   ...       56        16        83        94       -29  
     -64        47       -82        60         4   ...       32        12       -84       106       118  
    -128         3        22       117        96   ...      121       108       -38        98        29  
       0        79      -120       111      -116   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5804.43us.
Avg NPU gflops: 5030.41

Min NPU matmul time: 4818.00us.
Max NPU gflops: 6060.33

Max NPU matmul time: 7349.00us.
Min NPU gflops: 3973.15

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 384 -K 6528 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_384x6528x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_384x6528x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_384x6528x7616_96x96x112_4rx4c.txt ../build/aie_384x6528x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_384x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_384x6528x7616_96x96x112_4rx4c.xclbin -i build/insts_384x6528x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 384 -K 6528 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 384x6528x7616
Sequence instr count: 276
Loading xclbin: build/final_384x6528x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_384x6528x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -110        90        66        60   ...        4       -80        90       126       123  
       0       110       -74        13       104   ...        9       116       -12       -90        96  
     -64       -14        -6        -4       -20   ...       15       -24        -3       -14       -47  
    -128       122        48         3       -32   ...       65       -68       -62        44        65  
    -128       -67       -96       -11       -40   ...      -54       -68       -40        40      -118  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7105.94us.
Avg NPU gflops: 5373.37

Min NPU matmul time: 6361.00us.
Max NPU gflops: 6002.65

Max NPU matmul time: 8973.00us.
Min NPU gflops: 4255.30

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 384 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x384x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x384x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x384x448_96x96x112_4rx4c.txt ../build/aie_1920x384x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 384 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x384x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x384x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x384x2240_96x96x112_4rx4c.txt ../build/aie_1920x384x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x384x2240_96x96x112_4rx4c.xclbin -i build/insts_1920x384x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 384 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x384x2240
Sequence instr count: 1140
Loading xclbin: build/final_1920x384x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x384x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -24       110       -86        32   ...     -126       -88        39       118       -55  
       0        61       110        78       -80   ...       37       -60       -63       -44        46  
     -64        41        18        12       -84   ...       49      -120       -42        92        10  
       0      -119        40       -70        76   ...      -68       -64       -37       -84       -75  
     -64        67        36       -69        -8   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2689.93us.
Avg NPU gflops: 1227.92

Min NPU matmul time: 728.00us.
Max NPU gflops: 4537.11

Max NPU matmul time: 3717.00us.
Min NPU gflops: 888.62

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 384 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x384x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x384x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x384x4032_96x96x112_4rx4c.txt ../build/aie_1920x384x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x384x4032_96x96x112_4rx4c.xclbin -i build/insts_1920x384x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 384 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x384x4032
Sequence instr count: 1140
Loading xclbin: build/final_1920x384x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x384x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        32       120        38        56   ...       40        92       115       -90        75  
       0        43        80        22       -20   ...      -48       -36         6        70       -88  
       0       -92       -14        41        48   ...      122       -32       -20      -106      -108  
       0       -87       -32       -13       124   ...       27         4       -44       -52         9  
      64      -117        22       -89        56   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2659.09us.
Avg NPU gflops: 2235.89

Min NPU matmul time: 1176.00us.
Max NPU gflops: 5055.63

Max NPU matmul time: 3991.00us.
Min NPU gflops: 1489.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 384 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x384x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x384x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x384x5824_96x96x112_4rx4c.txt ../build/aie_1920x384x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x384x5824_96x96x112_4rx4c.xclbin -i build/insts_1920x384x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 384 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x384x5824
Sequence instr count: 1140
Loading xclbin: build/final_1920x384x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x384x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        54        82        -6       -96   ...       47      -120       110      -126       -64  
       0         2       -78       -68        52   ...      104        -8        94        62        -5  
       0      -121       116      -116        76   ...      -15        64       -35       -20        11  
       0        49        16      -127         4   ...       23       -88       -27       -14       109  
    -128        48      -112        93        20   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3288.46us.
Avg NPU gflops: 2611.51

Min NPU matmul time: 2078.00us.
Max NPU gflops: 4132.74

Max NPU matmul time: 4485.00us.
Min NPU gflops: 1914.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 384 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x384x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x384x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x384x7616_96x96x112_4rx4c.txt ../build/aie_1920x384x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x384x7616_96x96x112_4rx4c.xclbin -i build/insts_1920x384x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 384 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x384x7616
Sequence instr count: 1140
Loading xclbin: build/final_1920x384x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x384x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -75       112       -92       -96   ...       -9       -84       -51        98        17  
       0        85       -26       -64       -92   ...      -16       -72        55      -122      -101  
       0       -13        74       -25       -72   ...        9       -48       -40       -24       -17  
    -128       -22       116        -5        12   ...      -77        20       -11        16       -48  
      64       -21        42       -33        12   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3376.46us.
Avg NPU gflops: 3326.04

Min NPU matmul time: 2892.00us.
Max NPU gflops: 3883.21

Max NPU matmul time: 4469.00us.
Min NPU gflops: 2512.92

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 1920 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x1920x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x1920x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x1920x448_96x96x112_4rx4c.txt ../build/aie_1920x1920x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x1920x448_96x96x112_4rx4c.xclbin -i build/insts_1920x1920x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 1920 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x1920x448
Sequence instr count: 1140
Loading xclbin: build/final_1920x1920x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x1920x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        67        36       -69        -8   ...      -88         8        52      -120       -87  
       0       -48       -92        22       -24   ...       62        36       -68       -44        16  
       0       -68        64       121        96   ...       79       100       -43         6        68  
       0       -24        54       -65      -116   ...      -43        96        19       -30       -10  
       0       -28       -98        70      -112   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 917.23us.
Avg NPU gflops: 3601.08

Min NPU matmul time: 699.00us.
Max NPU gflops: 4725.34

Max NPU matmul time: 3662.00us.
Min NPU gflops: 901.97

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 1920 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x1920x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x1920x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x1920x2240_96x96x112_4rx4c.txt ../build/aie_1920x1920x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x1920x2240_96x96x112_4rx4c.xclbin -i build/insts_1920x1920x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 1920 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x1920x2240
Sequence instr count: 1140
Loading xclbin: build/final_1920x1920x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x1920x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        35        36        13       -12   ...      111         0        35       100        85  
       0       113        16       113      -104   ...       11       -44        20       110        45  
       0       -17       -44       -16        20   ...       64       -36        -1         4        80  
    -128        -7       -60        15        32   ...      -85        -4         1        50       -78  
      64       -98        72      -108       104   ...       12       -56      -106         0       -63  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3385.08us.
Avg NPU gflops: 4878.78

Min NPU matmul time: 2870.00us.
Max NPU gflops: 5754.38

Max NPU matmul time: 4120.00us.
Min NPU gflops: 4008.51

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 1920 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x1920x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x1920x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x1920x4032_96x96x112_4rx4c.txt ../build/aie_1920x1920x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x1920x4032_96x96x112_4rx4c.xclbin -i build/insts_1920x1920x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 1920 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x1920x4032
Sequence instr count: 1140
Loading xclbin: build/final_1920x1920x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x1920x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -87      -120        89       -84   ...       15       -44        86       -24        67  
       0       -72        30        46       -96   ...      -25        84       -92       -68        56  
     -64         6        26        56       -72   ...      -12       -28       -25       -24       -19  
       0       -30        96        58        96   ...       57        52         8       -72      -126  
     -64        68       -30       -81       -60   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5994.35us.
Avg NPU gflops: 4959.19

Min NPU matmul time: 4858.00us.
Max NPU gflops: 6119.21

Max NPU matmul time: 8350.00us.
Min NPU gflops: 3560.14

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 1920 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x1920x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x1920x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x1920x5824_96x96x112_4rx4c.txt ../build/aie_1920x1920x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x1920x5824_96x96x112_4rx4c.xclbin -i build/insts_1920x1920x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 1920 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x1920x5824
Sequence instr count: 1140
Loading xclbin: build/final_1920x1920x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x1920x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -90       102        95        24   ...      -30        24        45      -100      -120  
       0       104       -58       -75         4   ...      -82       120        15       -42        87  
    -128       -34        -4        90        12   ...      -96        36       107        56        23  
       0       -14       116      -108       -20   ...       85       -12       -91       -68       -52  
    -128        59       104        79       -28   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7684.56us.
Avg NPU gflops: 5587.72

Min NPU matmul time: 6986.00us.
Max NPU gflops: 6146.46

Max NPU matmul time: 9514.00us.
Min NPU gflops: 4513.26

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 1920 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x1920x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x1920x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x1920x7616_96x96x112_4rx4c.txt ../build/aie_1920x1920x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x1920x7616_96x96x112_4rx4c.xclbin -i build/insts_1920x1920x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 1920 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x1920x7616
Sequence instr count: 1140
Loading xclbin: build/final_1920x1920x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x1920x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        78        68        81        -4   ...      -48        60        50      -100       -84  
       0        40        56       -50       -80   ...       15       -36        17       122       -65  
     -64       -33      -104      -107       -88   ...      106       -84        54       -52       101  
    -128        41        30        77       -52   ...      -32        -8       -66        16       125  
      64      -128        76        45       -44   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9693.85us.
Avg NPU gflops: 5792.46

Min NPU matmul time: 8989.00us.
Max NPU gflops: 6246.66

Max NPU matmul time: 12477.00us.
Min NPU gflops: 4500.38

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 3456 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x3456x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x3456x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x3456x448_96x96x112_4rx4c.txt ../build/aie_1920x3456x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x3456x448_96x96x112_4rx4c.xclbin -i build/insts_1920x3456x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 3456 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x3456x448
Sequence instr count: 1140
Loading xclbin: build/final_1920x3456x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x3456x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        99       -10        -5      -108   ...      -37        16       112        20       112  
       0       101       -72         6        32   ...      120        92       -69      -114      -126  
     -64       117       118        90       104   ...      -28         8       -23        62      -120  
       0       -85      -104       -13        72   ...       72       124        29      -122       -67  
    -128        25       112       100       -88   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3002.58us.
Avg NPU gflops: 1980.11

Min NPU matmul time: 1160.00us.
Max NPU gflops: 5125.37

Max NPU matmul time: 4100.00us.
Min NPU gflops: 1450.10

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 3456 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x3456x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x3456x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x3456x2240_96x96x112_4rx4c.txt ../build/aie_1920x3456x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x3456x2240_96x96x112_4rx4c.xclbin -i build/insts_1920x3456x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 3456 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x3456x2240
Sequence instr count: 1140
Loading xclbin: build/final_1920x3456x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x3456x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       126         2        36   ...      115        -4        19        74       -50  
       0        70        18        35       -56   ...      -35       -36      -116        36        18  
       0       -72       -54        78       -88   ...       34       -32       -57       -60       -24  
       0        69        80       -80       -16   ...     -128       -96       106      -120       -80  
    -128       -74       -72        24        44   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5617.78us.
Avg NPU gflops: 5291.62

Min NPU matmul time: 4815.00us.
Max NPU gflops: 6173.86

Max NPU matmul time: 7007.00us.
Min NPU gflops: 4242.49

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 3456 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x3456x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x3456x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x3456x4032_96x96x112_4rx4c.txt ../build/aie_1920x3456x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x3456x4032_96x96x112_4rx4c.xclbin -i build/insts_1920x3456x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 3456 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x3456x4032
Sequence instr count: 1140
Loading xclbin: build/final_1920x3456x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x3456x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64       -14       126        72       -96   ...     -117        68        89       -92        17  
       0        49       -54       -46       108   ...      -98      -124      -117       -80        37  
       0       -30       -84        82       100   ...       32        84      -119        72      -107  
    -128       116         2        -6      -120   ...       84      -116        37         0        81  
     -64        80       -86        73      -112   ...      -72       120        41         2        37  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9223.15us.
Avg NPU gflops: 5801.58

Min NPU matmul time: 8381.00us.
Max NPU gflops: 6384.54

Max NPU matmul time: 10496.00us.
Min NPU gflops: 5098.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 3456 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x3456x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x3456x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x3456x5824_96x96x112_4rx4c.txt ../build/aie_1920x3456x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:02:24 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x3456x5824_96x96x112_4rx4c.xclbin -i build/insts_1920x3456x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 3456 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x3456x5824
Sequence instr count: 1140
Loading xclbin: build/final_1920x3456x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x3456x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        87      -104       112       -88   ...      126        16       118        48        99  
       0        23        86        93        16   ...        8      -112       113       -50        45  
       0      -125       -52        35        52   ...      -99      -100        -7       100      -117  
       0       -68       -68        78        88   ...      -53      -108       125       -28        63  
     -64        95       112        30      -104   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13439.22us.
Avg NPU gflops: 5751.12

Min NPU matmul time: 12439.00us.
Max NPU gflops: 6213.56

Max NPU matmul time: 14690.00us.
Min NPU gflops: 5261.44

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 3456 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x3456x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x3456x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x3456x7616_96x96x112_4rx4c.txt ../build/aie_1920x3456x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x3456x7616_96x96x112_4rx4c.xclbin -i build/insts_1920x3456x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 3456 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x3456x7616
Sequence instr count: 1140
Loading xclbin: build/final_1920x3456x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x3456x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -108        32       120       104   ...      113      -116        24        10        11  
       0        70       122       -86      -120   ...     -118       -44        11       -24        22  
    -128       -49        98       -41       116   ...       73        72       -16        74        76  
       0        16        92       -47        40   ...      118       -96        62        52        81  
    -128        14        72       116       -40   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 17059.00us.
Avg NPU gflops: 5924.86

Min NPU matmul time: 16088.00us.
Max NPU gflops: 6282.46

Max NPU matmul time: 20100.00us.
Min NPU gflops: 5028.47

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 4992 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x4992x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x4992x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x4992x448_96x96x112_4rx4c.txt ../build/aie_1920x4992x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x4992x448_96x96x112_4rx4c.xclbin -i build/insts_1920x4992x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 4992 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x4992x448
Sequence instr count: 1140
Loading xclbin: build/final_1920x4992x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x4992x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        35        44         8        84   ...       45      -104       -17        60         5  
       0       -60      -104      -106       -96   ...       60      -120       -57        72        -1  
     -64       117        26       105       -60   ...       51        80       124      -120       -74  
    -128       123       -48       -78       108   ...     -113       -64       -49      -118       -38  
    -128       -14        22        84        28   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3101.25us.
Avg NPU gflops: 2769.15

Min NPU matmul time: 1533.00us.
Max NPU gflops: 5601.98

Max NPU matmul time: 3858.00us.
Min NPU gflops: 2225.98

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 4992 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x4992x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x4992x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x4992x2240_96x96x112_4rx4c.txt ../build/aie_1920x4992x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x4992x2240_96x96x112_4rx4c.xclbin -i build/insts_1920x4992x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 4992 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x4992x2240
Sequence instr count: 1140
Loading xclbin: build/final_1920x4992x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x4992x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -31      -116        66       -32   ...        8       124         5       -92       -27  
       0        64       122        75        84   ...      107       120        31        68       -43  
      64       124       -32       -41        84   ...      -58       -36       -20        26       115  
       0      -124        64       -16       -32   ...       62        36        10       -16       -97  
      64       108       -10        89       -96   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7601.07us.
Avg NPU gflops: 5649.10

Min NPU matmul time: 6860.00us.
Max NPU gflops: 6259.36

Max NPU matmul time: 9903.00us.
Min NPU gflops: 4335.98

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 4992 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x4992x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x4992x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x4992x4032_96x96x112_4rx4c.txt ../build/aie_1920x4992x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x4992x4032_96x96x112_4rx4c.xclbin -i build/insts_1920x4992x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 4992 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x4992x4032
Sequence instr count: 1140
Loading xclbin: build/final_1920x4992x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x4992x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -117        88      -106      -120   ...      -52       -16        58        50        -2  
       0       -56        66        91       116   ...       68        84        -3       -36       -39  
       0        56        44       110      -128   ...      -90       -40      -127       -14       104  
       0       122        76        -1         8   ...       55        84        93         8         5  
       0       -45       -70       110       -20   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13137.14us.
Avg NPU gflops: 5883.36

Min NPU matmul time: 12106.00us.
Max NPU gflops: 6384.48

Max NPU matmul time: 15337.00us.
Min NPU gflops: 5039.48

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 4992 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x4992x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x4992x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x4992x5824_96x96x112_4rx4c.txt ../build/aie_1920x4992x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x4992x5824_96x96x112_4rx4c.xclbin -i build/insts_1920x4992x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 4992 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x4992x5824
Sequence instr count: 1140
Loading xclbin: build/final_1920x4992x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x4992x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        36       114       -55        16   ...        6      -108       112        74        47  
       0      -110       -36       -57         0   ...      -77       -48       -51        94      -121  
      64       -32        40        91      -104   ...        4        92       -86       -72        45  
    -128       -49       -10       -83      -124   ...       30       -88       -88        70        34  
     -64       -54        26        99       -92   ...     -105        24       -32       120       -70  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 18619.05us.
Avg NPU gflops: 5996.11

Min NPU matmul time: 17454.00us.
Max NPU gflops: 6396.35

Max NPU matmul time: 20396.00us.
Min NPU gflops: 5473.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 4992 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x4992x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x4992x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x4992x7616_96x96x112_4rx4c.txt ../build/aie_1920x4992x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x4992x7616_96x96x112_4rx4c.xclbin -i build/insts_1920x4992x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 4992 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x4992x7616
Sequence instr count: 1140
Loading xclbin: build/final_1920x4992x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x4992x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -38      -106       -15        28   ...       60        88       -95       124        98  
       0        26         6        48      -116   ...      -96       -36        74         6       -32  
    -128       -33        16        83       -72   ...       98      -104        -5        82       -90  
    -128        21       -82       -74         8   ...       76       -84       -12       -36      -110  
     -64       -74       -78        12        -8   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 24035.97us.
Avg NPU gflops: 6073.95

Min NPU matmul time: 22903.00us.
Max NPU gflops: 6374.42

Max NPU matmul time: 26102.00us.
Min NPU gflops: 5593.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 6528 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x6528x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x6528x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x6528x448_96x96x112_4rx4c.txt ../build/aie_1920x6528x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:18 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x6528x448_96x96x112_4rx4c.xclbin -i build/insts_1920x6528x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 6528 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x6528x448
Sequence instr count: 1140
Loading xclbin: build/final_1920x6528x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x6528x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       113      -124        23      -128   ...       -5       -64        74       108       119  
       0       -61      -102       103        16   ...       42       108        33        30       -99  
      64       -55      -108        56        92   ...      -38        80       126       -46        81  
    -128       -76       124        -1      -124   ...       76       -20       107        16       111  
       0        25       -72        55      -112   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3122.33us.
Avg NPU gflops: 3596.75

Min NPU matmul time: 1942.00us.
Max NPU gflops: 5782.83

Max NPU matmul time: 4007.00us.
Min NPU gflops: 2802.66

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 6528 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x6528x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x6528x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x6528x2240_96x96x112_4rx4c.txt ../build/aie_1920x6528x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x6528x2240_96x96x112_4rx4c.xclbin -i build/insts_1920x6528x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 6528 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x6528x2240
Sequence instr count: 1140
Loading xclbin: build/final_1920x6528x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x6528x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        26       112       -31       112   ...      -49       -32       114      -116        38  
       0        -7        40        88        52   ...       56        -8       -21        24       100  
      64        89      -100      -115        44   ...     -113       -68      -100       -82       104  
       0       120        68        94        -4   ...      -88       -88       -19        94        99  
      64       -61        48       -28       116   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9514.99us.
Avg NPU gflops: 5901.35

Min NPU matmul time: 8775.00us.
Max NPU gflops: 6399.00

Max NPU matmul time: 11127.00us.
Min NPU gflops: 5046.40

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 6528 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x6528x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x6528x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x6528x4032_96x96x112_4rx4c.txt ../build/aie_1920x6528x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x6528x4032_96x96x112_4rx4c.xclbin -i build/insts_1920x6528x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 6528 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x6528x4032
Sequence instr count: 1140
Loading xclbin: build/final_1920x6528x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x6528x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -20        26       -60      -128   ...       62       -84       -70        -2         8  
       0       -90      -100        91       104   ...       -3        56       -46        80       -92  
    -128       -24       124      -122       -16   ...       72       -96        80       -98        23  
       0       -61        24      -126       -96   ...       59       -28       -82      -104       -51  
     -64      -116       -28       -76        -4   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 16760.82us.
Avg NPU gflops: 6030.27

Min NPU matmul time: 15708.00us.
Max NPU gflops: 6434.44

Max NPU matmul time: 18929.00us.
Min NPU gflops: 5339.54

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 6528 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x6528x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x6528x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x6528x5824_96x96x112_4rx4c.txt ../build/aie_1920x6528x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x6528x5824_96x96x112_4rx4c.xclbin -i build/insts_1920x6528x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 6528 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x6528x5824
Sequence instr count: 1140
Loading xclbin: build/final_1920x6528x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x6528x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        92        18       -69        68   ...     -122       -12       -29        36        82  
       0      -125        56       -40        36   ...       56        16        83        94       -29  
     -64        47       -82        60         4   ...       32        12       -84       106       118  
    -128         3        22       117        96   ...      121       108       -38        98        29  
       0        79      -120       111      -116   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23757.83us.
Avg NPU gflops: 6145.06

Min NPU matmul time: 22651.00us.
Max NPU gflops: 6445.33

Max NPU matmul time: 26115.00us.
Min NPU gflops: 5590.40

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 1920 -K 6528 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_1920x6528x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_1920x6528x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_1920x6528x7616_96x96x112_4rx4c.txt ../build/aie_1920x6528x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_1920x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_1920x6528x7616_96x96x112_4rx4c.xclbin -i build/insts_1920x6528x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 1920 -K 6528 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 1920x6528x7616
Sequence instr count: 1140
Loading xclbin: build/final_1920x6528x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_1920x6528x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -110        90        66        60   ...        4       -80        90       126       123  
       0       110       -74        13       104   ...        9       116       -12       -90        96  
     -64       -14        -6        -4       -20   ...       15       -24        -3       -14       -47  
    -128       122        48         3       -32   ...       65       -68       -62        44        65  
    -128       -67       -96       -11       -40   ...      -54       -68       -40        40      -118  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 30704.15us.
Avg NPU gflops: 6217.86

Min NPU matmul time: 29505.00us.
Max NPU gflops: 6470.57

Max NPU matmul time: 32855.00us.
Min NPU gflops: 5810.81

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 384 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x384x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x384x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x384x448_96x96x112_4rx4c.txt ../build/aie_3456x384x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x384x448_96x96x112_4rx4c.xclbin -i build/insts_3456x384x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 384 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x384x448
Sequence instr count: 2004
Loading xclbin: build/final_3456x384x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x384x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -96       -88       -24        96   ...       61        60         9        64        -9  
       0        88       104       -56       -12   ...      -29       112       -87       -32       -87  
    -128       -85        40        86      -120   ...      -53        -8        69         0      -119  
       0        66       -22       -79      -116   ...      -31      -108       107       -64        69  
     -64      -101       -76       -62        96   ...      -42        64        36       104       -79  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 1.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 1.00 s.

Avg NPU matmul time: 1479.71us.
Avg NPU gflops: 803.59

Min NPU matmul time: 434.00us.
Max NPU gflops: 2739.83

Max NPU matmul time: 3324.00us.
Min NPU gflops: 357.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 384 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x384x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x384x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x384x2240_96x96x112_4rx4c.txt ../build/aie_3456x384x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x384x2240_96x96x112_4rx4c.xclbin -i build/insts_3456x384x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 384 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x384x2240
Sequence instr count: 2004
Loading xclbin: build/final_3456x384x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x384x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -24       110       -86        32   ...     -126       -88        39       118       -55  
       0        61       110        78       -80   ...       37       -60       -63       -44        46  
     -64        41        18        12       -84   ...       49      -120       -42        92        10  
       0      -119        40       -70        76   ...      -68       -64       -37       -84       -75  
     -64        67        36       -69        -8   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2881.49us.
Avg NPU gflops: 2063.32

Min NPU matmul time: 1138.00us.
Max NPU gflops: 5224.45

Max NPU matmul time: 4043.00us.
Min NPU gflops: 1470.55

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 384 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x384x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x384x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x384x4032_96x96x112_4rx4c.txt ../build/aie_3456x384x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x384x4032_96x96x112_4rx4c.xclbin -i build/insts_3456x384x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 384 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x384x4032
Sequence instr count: 2004
Loading xclbin: build/final_3456x384x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x384x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        32       120        38        56   ...       40        92       115       -90        75  
       0        43        80        22       -20   ...      -48       -36         6        70       -88  
       0       -92       -14        41        48   ...      122       -32       -20      -106      -108  
       0       -87       -32       -13       124   ...       27         4       -44       -52         9  
      64      -117        22       -89        56   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3138.41us.
Avg NPU gflops: 3409.93

Min NPU matmul time: 1905.00us.
Max NPU gflops: 5617.73

Max NPU matmul time: 4577.00us.
Min NPU gflops: 2338.16

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 384 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x384x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x384x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x384x5824_96x96x112_4rx4c.txt ../build/aie_3456x384x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x384x5824_96x96x112_4rx4c.xclbin -i build/insts_3456x384x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 384 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x384x5824
Sequence instr count: 2004
Loading xclbin: build/final_3456x384x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x384x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        54        82        -6       -96   ...       47      -120       110      -126       -64  
       0         2       -78       -68        52   ...      104        -8        94        62        -5  
       0      -121       116      -116        76   ...      -15        64       -35       -20        11  
       0        49        16      -127         4   ...       23       -88       -27       -14       109  
    -128        48      -112        93        20   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3739.67us.
Avg NPU gflops: 4133.55

Min NPU matmul time: 3327.00us.
Max NPU gflops: 4646.26

Max NPU matmul time: 5880.00us.
Min NPU gflops: 2628.93

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 384 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x384x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x384x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x384x7616_96x96x112_4rx4c.txt ../build/aie_3456x384x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x384x7616_96x96x112_4rx4c.xclbin -i build/insts_3456x384x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 384 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x384x7616
Sequence instr count: 2004
Loading xclbin: build/final_3456x384x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x384x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -75       112       -92       -96   ...       -9       -84       -51        98        17  
       0        85       -26       -64       -92   ...      -16       -72        55      -122      -101  
       0       -13        74       -25       -72   ...        9       -48       -40       -24       -17  
    -128       -22       116        -5        12   ...      -77        20       -11        16       -48  
      64       -21        42       -33        12   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6042.17us.
Avg NPU gflops: 3345.56

Min NPU matmul time: 5029.00us.
Max NPU gflops: 4019.58

Max NPU matmul time: 8103.00us.
Min NPU gflops: 2494.69

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 1920 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x1920x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x1920x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x1920x448_96x96x112_4rx4c.txt ../build/aie_3456x1920x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x1920x448_96x96x112_4rx4c.xclbin -i build/insts_3456x1920x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 1920 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x1920x448
Sequence instr count: 2004
Loading xclbin: build/final_3456x1920x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x1920x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        67        36       -69        -8   ...      -88         8        52      -120       -87  
       0       -48       -92        22       -24   ...       62        36       -68       -44        16  
       0       -68        64       121        96   ...       79       100       -43         6        68  
       0       -24        54       -65      -116   ...      -43        96        19       -30       -10  
       0       -28       -98        70      -112   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 2887.45us.
Avg NPU gflops: 2059.06

Min NPU matmul time: 1132.00us.
Max NPU gflops: 5252.14

Max NPU matmul time: 4020.00us.
Min NPU gflops: 1478.96

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 1920 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x1920x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x1920x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x1920x2240_96x96x112_4rx4c.txt ../build/aie_3456x1920x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x1920x2240_96x96x112_4rx4c.xclbin -i build/insts_3456x1920x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 1920 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x1920x2240
Sequence instr count: 2004
Loading xclbin: build/final_3456x1920x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x1920x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        35        36        13       -12   ...      111         0        35       100        85  
       0       113        16       113      -104   ...       11       -44        20       110        45  
       0       -17       -44       -16        20   ...       64       -36        -1         4        80  
    -128        -7       -60        15        32   ...      -85        -4         1        50       -78  
      64       -98        72      -108       104   ...       12       -56      -106         0       -63  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5719.06us.
Avg NPU gflops: 5197.90

Min NPU matmul time: 4811.00us.
Max NPU gflops: 6178.99

Max NPU matmul time: 8082.00us.
Min NPU gflops: 3678.19

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 1920 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x1920x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x1920x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x1920x4032_96x96x112_4rx4c.txt ../build/aie_3456x1920x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x1920x4032_96x96x112_4rx4c.xclbin -i build/insts_3456x1920x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 1920 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x1920x4032
Sequence instr count: 2004
Loading xclbin: build/final_3456x1920x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x1920x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -87      -120        89       -84   ...       15       -44        86       -24        67  
       0       -72        30        46       -96   ...      -25        84       -92       -68        56  
     -64         6        26        56       -72   ...      -12       -28       -25       -24       -19  
       0       -30        96        58        96   ...       57        52         8       -72      -126  
     -64        68       -30       -81       -60   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9625.44us.
Avg NPU gflops: 5559.10

Min NPU matmul time: 8513.00us.
Max NPU gflops: 6285.54

Max NPU matmul time: 12436.00us.
Min NPU gflops: 4302.74

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 1920 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x1920x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x1920x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x1920x5824_96x96x112_4rx4c.txt ../build/aie_3456x1920x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x1920x5824_96x96x112_4rx4c.xclbin -i build/insts_3456x1920x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 1920 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x1920x5824
Sequence instr count: 2004
Loading xclbin: build/final_3456x1920x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x1920x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -90       102        95        24   ...      -30        24        45      -100      -120  
       0       104       -58       -75         4   ...      -82       120        15       -42        87  
    -128       -34        -4        90        12   ...      -96        36       107        56        23  
       0       -14       116      -108       -20   ...       85       -12       -91       -68       -52  
    -128        59       104        79       -28   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13478.83us.
Avg NPU gflops: 5734.22

Min NPU matmul time: 12533.00us.
Max NPU gflops: 6166.96

Max NPU matmul time: 16010.00us.
Min NPU gflops: 4827.64

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 1920 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x1920x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x1920x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x1920x7616_96x96x112_4rx4c.txt ../build/aie_3456x1920x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x1920x7616_96x96x112_4rx4c.xclbin -i build/insts_3456x1920x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 1920 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x1920x7616
Sequence instr count: 2004
Loading xclbin: build/final_3456x1920x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x1920x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        78        68        81        -4   ...      -48        60        50      -100       -84  
       0        40        56       -50       -80   ...       15       -36        17       122       -65  
     -64       -33      -104      -107       -88   ...      106       -84        54       -52       101  
    -128        41        30        77       -52   ...      -32        -8       -66        16       125  
      64      -128        76        45       -44   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 17245.58us.
Avg NPU gflops: 5860.76

Min NPU matmul time: 16102.00us.
Max NPU gflops: 6277.00

Max NPU matmul time: 19673.00us.
Min NPU gflops: 5137.61

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 3456 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x3456x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x3456x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x3456x448_96x96x112_4rx4c.txt ../build/aie_3456x3456x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:21 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x3456x448_96x96x112_4rx4c.xclbin -i build/insts_3456x3456x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 3456 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x3456x448
Sequence instr count: 2004
Loading xclbin: build/final_3456x3456x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x3456x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        99       -10        -5      -108   ...      -37        16       112        20       112  
       0       101       -72         6        32   ...      120        92       -69      -114      -126  
     -64       117       118        90       104   ...      -28         8       -23        62      -120  
       0       -85      -104       -13        72   ...       72       124        29      -122       -67  
    -128        25       112       100       -88   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3207.04us.
Avg NPU gflops: 3336.96

Min NPU matmul time: 1872.00us.
Max NPU gflops: 5716.76

Max NPU matmul time: 4321.00us.
Min NPU gflops: 2476.69

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 3456 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x3456x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x3456x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x3456x2240_96x96x112_4rx4c.txt ../build/aie_3456x3456x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x3456x2240_96x96x112_4rx4c.xclbin -i build/insts_3456x3456x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 3456 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x3456x2240
Sequence instr count: 2004
Loading xclbin: build/final_3456x3456x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x3456x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       126         2        36   ...      115        -4        19        74       -50  
       0        70        18        35       -56   ...      -35       -36      -116        36        18  
       0       -72       -54        78       -88   ...       34       -32       -57       -60       -24  
       0        69        80       -80       -16   ...     -128       -96       106      -120       -80  
    -128       -74       -72        24        44   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9044.20us.
Avg NPU gflops: 5916.37

Min NPU matmul time: 8374.00us.
Max NPU gflops: 6389.88

Max NPU matmul time: 11124.00us.
Min NPU gflops: 4810.22

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 3456 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x3456x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x3456x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x3456x4032_96x96x112_4rx4c.txt ../build/aie_3456x3456x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x3456x4032_96x96x112_4rx4c.xclbin -i build/insts_3456x3456x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 3456 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x3456x4032
Sequence instr count: 2004
Loading xclbin: build/final_3456x3456x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x3456x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64       -14       126        72       -96   ...     -117        68        89       -92        17  
       0        49       -54       -46       108   ...      -98      -124      -117       -80        37  
       0       -30       -84        82       100   ...       32        84      -119        72      -107  
    -128       116         2        -6      -120   ...       84      -116        37         0        81  
     -64        80       -86        73      -112   ...      -72       120        41         2        37  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 16063.78us.
Avg NPU gflops: 5995.84

Min NPU matmul time: 14970.00us.
Max NPU gflops: 6433.93

Max NPU matmul time: 17629.00us.
Min NPU gflops: 5463.49

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 3456 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x3456x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x3456x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x3456x5824_96x96x112_4rx4c.txt ../build/aie_3456x3456x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x3456x5824_96x96x112_4rx4c.xclbin -i build/insts_3456x3456x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 3456 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x3456x5824
Sequence instr count: 2004
Loading xclbin: build/final_3456x3456x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x3456x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        87      -104       112       -88   ...      126        16       118        48        99  
       0        23        86        93        16   ...        8      -112       113       -50        45  
       0      -125       -52        35        52   ...      -99      -100        -7       100      -117  
       0       -68       -68        78        88   ...      -53      -108       125       -28        63  
     -64        95       112        30      -104   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23022.85us.
Avg NPU gflops: 6042.82

Min NPU matmul time: 21864.00us.
Max NPU gflops: 6363.11

Max NPU matmul time: 25428.00us.
Min NPU gflops: 5471.25

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 3456 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x3456x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x3456x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x3456x7616_96x96x112_4rx4c.txt ../build/aie_3456x3456x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x3456x7616_96x96x112_4rx4c.xclbin -i build/insts_3456x3456x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 3456 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x3456x7616
Sequence instr count: 2004
Loading xclbin: build/final_3456x3456x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x3456x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -108        32       120       104   ...      113      -116        24        10        11  
       0        70       122       -86      -120   ...     -118       -44        11       -24        22  
    -128       -49        98       -41       116   ...       73        72       -16        74        76  
       0        16        92       -47        40   ...      118       -96        62        52        81  
    -128        14        72       116       -40   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 29678.58us.
Avg NPU gflops: 6130.01

Min NPU matmul time: 28589.00us.
Max NPU gflops: 6363.64

Max NPU matmul time: 31158.00us.
Min NPU gflops: 5838.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 4992 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x4992x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x4992x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x4992x448_96x96x112_4rx4c.txt ../build/aie_3456x4992x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x4992x448_96x96x112_4rx4c.xclbin -i build/insts_3456x4992x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 4992 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x4992x448
Sequence instr count: 2004
Loading xclbin: build/final_3456x4992x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x4992x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        35        44         8        84   ...       45      -104       -17        60         5  
       0       -60      -104      -106       -96   ...       60      -120       -57        72        -1  
     -64       117        26       105       -60   ...       51        80       124      -120       -74  
    -128       123       -48       -78       108   ...     -113       -64       -49      -118       -38  
    -128       -14        22        84        28   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3295.67us.
Avg NPU gflops: 4690.43

Min NPU matmul time: 2688.00us.
Max NPU gflops: 5750.78

Max NPU matmul time: 3982.00us.
Min NPU gflops: 3882.00

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 4992 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x4992x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x4992x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x4992x2240_96x96x112_4rx4c.txt ../build/aie_3456x4992x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x4992x2240_96x96x112_4rx4c.xclbin -i build/insts_3456x4992x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 4992 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x4992x2240
Sequence instr count: 2004
Loading xclbin: build/final_3456x4992x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x4992x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -31      -116        66       -32   ...        8       124         5       -92       -27  
       0        64       122        75        84   ...      107       120        31        68       -43  
      64       124       -32       -41        84   ...      -58       -36       -20        26       115  
       0      -124        64       -16       -32   ...       62        36        10       -16       -97  
      64       108       -10        89       -96   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 12233.50us.
Avg NPU gflops: 6317.94

Min NPU matmul time: 11927.00us.
Max NPU gflops: 6480.30

Max NPU matmul time: 12979.00us.
Min NPU gflops: 5955.05

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 4992 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x4992x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x4992x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x4992x4032_96x96x112_4rx4c.txt ../build/aie_3456x4992x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x4992x4032_96x96x112_4rx4c.xclbin -i build/insts_3456x4992x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 4992 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x4992x4032
Sequence instr count: 2004
Loading xclbin: build/final_3456x4992x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x4992x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -117        88      -106      -120   ...      -52       -16        58        50        -2  
       0       -56        66        91       116   ...       68        84        -3       -36       -39  
       0        56        44       110      -128   ...      -90       -40      -127       -14       104  
       0       122        76        -1         8   ...       55        84        93         8         5  
       0       -45       -70       110       -20   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 22389.58us.
Avg NPU gflops: 6213.74

Min NPU matmul time: 21504.00us.
Max NPU gflops: 6469.63

Max NPU matmul time: 24067.00us.
Min NPU gflops: 5780.65

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 4992 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x4992x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x4992x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x4992x5824_96x96x112_4rx4c.txt ../build/aie_3456x4992x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x4992x5824_96x96x112_4rx4c.xclbin -i build/insts_3456x4992x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 4992 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x4992x5824
Sequence instr count: 2004
Loading xclbin: build/final_3456x4992x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x4992x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        36       114       -55        16   ...        6      -108       112        74        47  
       0      -110       -36       -57         0   ...      -77       -48       -51        94      -121  
      64       -32        40        91      -104   ...        4        92       -86       -72        45  
    -128       -49       -10       -83      -124   ...       30       -88       -88        70        34  
     -64       -54        26        99       -92   ...     -105        24       -32       120       -70  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 32170.24us.
Avg NPU gflops: 6246.62

Min NPU matmul time: 31132.00us.
Max NPU gflops: 6454.95

Max NPU matmul time: 34062.00us.
Min NPU gflops: 5899.69

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 4992 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x4992x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x4992x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x4992x7616_96x96x112_4rx4c.txt ../build/aie_3456x4992x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x4992x7616_96x96x112_4rx4c.xclbin -i build/insts_3456x4992x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 4992 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x4992x7616
Sequence instr count: 2004
Loading xclbin: build/final_3456x4992x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x4992x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -38      -106       -15        28   ...       60        88       -95       124        98  
       0        26         6        48      -116   ...      -96       -36        74         6       -32  
    -128       -33        16        83       -72   ...       98      -104        -5        82       -90  
    -128        21       -82       -74         8   ...       76       -84       -12       -36      -110  
     -64       -74       -78        12        -8   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 41608.86us.
Avg NPU gflops: 6315.67

Min NPU matmul time: 40420.00us.
Max NPU gflops: 6501.43

Max NPU matmul time: 44571.00us.
Min NPU gflops: 5895.94

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 6528 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x6528x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x6528x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x6528x448_96x96x112_4rx4c.txt ../build/aie_3456x6528x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x6528x448_96x96x112_4rx4c.xclbin -i build/insts_3456x6528x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 6528 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x6528x448
Sequence instr count: 2004
Loading xclbin: build/final_3456x6528x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x6528x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       113      -124        23      -128   ...       -5       -64        74       108       119  
       0       -61      -102       103        16   ...       42       108        33        30       -99  
      64       -55      -108        56        92   ...      -38        80       126       -46        81  
    -128       -76       124        -1      -124   ...       76       -20       107        16       111  
       0        25       -72        55      -112   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3723.30us.
Avg NPU gflops: 5429.18

Min NPU matmul time: 3304.00us.
Max NPU gflops: 6118.17

Max NPU matmul time: 4737.00us.
Min NPU gflops: 4267.35

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 6528 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x6528x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x6528x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x6528x2240_96x96x112_4rx4c.txt ../build/aie_3456x6528x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x6528x2240_96x96x112_4rx4c.xclbin -i build/insts_3456x6528x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 6528 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x6528x2240
Sequence instr count: 2004
Loading xclbin: build/final_3456x6528x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x6528x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        26       112       -31       112   ...      -49       -32       114      -116        38  
       0        -7        40        88        52   ...       56        -8       -21        24       100  
      64        89      -100      -115        44   ...     -113       -68      -100       -82       104  
       0       120        68        94        -4   ...      -88       -88       -19        94        99  
      64       -61        48       -28       116   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 16449.25us.
Avg NPU gflops: 6144.49

Min NPU matmul time: 15586.00us.
Max NPU gflops: 6484.81

Max NPU matmul time: 17710.00us.
Min NPU gflops: 5707.07

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 6528 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x6528x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x6528x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x6528x4032_96x96x112_4rx4c.txt ../build/aie_3456x6528x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x6528x4032_96x96x112_4rx4c.xclbin -i build/insts_3456x6528x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 6528 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x6528x4032
Sequence instr count: 2004
Loading xclbin: build/final_3456x6528x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x6528x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -20        26       -60      -128   ...       62       -84       -70        -2         8  
       0       -90      -100        91       104   ...       -3        56       -46        80       -92  
    -128       -24       124      -122       -16   ...       72       -96        80       -98        23  
       0       -61        24      -126       -96   ...       59       -28       -82      -104       -51  
     -64      -116       -28       -76        -4   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 29017.78us.
Avg NPU gflops: 6269.61

Min NPU matmul time: 27909.00us.
Max NPU gflops: 6518.69

Max NPU matmul time: 30908.00us.
Min NPU gflops: 5886.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 6528 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x6528x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x6528x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x6528x5824_96x96x112_4rx4c.txt ../build/aie_3456x6528x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x6528x5824_96x96x112_4rx4c.xclbin -i build/insts_3456x6528x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 6528 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x6528x5824
Sequence instr count: 2004
Loading xclbin: build/final_3456x6528x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x6528x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        92        18       -69        68   ...     -122       -12       -29        36        82  
       0      -125        56       -40        36   ...       56        16        83        94       -29  
     -64        47       -82        60         4   ...       32        12       -84       106       118  
    -128         3        22       117        96   ...      121       108       -38        98        29  
       0        79      -120       111      -116   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 41758.49us.
Avg NPU gflops: 6293.04

Min NPU matmul time: 40710.00us.
Max NPU gflops: 6455.12

Max NPU matmul time: 43850.00us.
Min NPU gflops: 5992.88

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 3456 -K 6528 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_3456x6528x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_3456x6528x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_3456x6528x7616_96x96x112_4rx4c.txt ../build/aie_3456x6528x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_3456x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_3456x6528x7616_96x96x112_4rx4c.xclbin -i build/insts_3456x6528x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 3456 -K 6528 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 3456x6528x7616
Sequence instr count: 2004
Loading xclbin: build/final_3456x6528x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_3456x6528x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -110        90        66        60   ...        4       -80        90       126       123  
       0       110       -74        13       104   ...        9       116       -12       -90        96  
     -64       -14        -6        -4       -20   ...       15       -24        -3       -14       -47  
    -128       122        48         3       -32   ...       65       -68       -62        44        65  
    -128       -67       -96       -11       -40   ...      -54       -68       -40        40      -118  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 53647.13us.
Avg NPU gflops: 6405.67

Min NPU matmul time: 52631.00us.
Max NPU gflops: 6529.34

Max NPU matmul time: 56293.00us.
Min NPU gflops: 6104.59

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 384 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x384x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x384x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x384x448_96x96x112_4rx4c.txt ../build/aie_4992x384x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x384x448_96x96x112_4rx4c.xclbin -i build/insts_4992x384x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 384 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x384x448
Sequence instr count: 2868
Loading xclbin: build/final_4992x384x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x384x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -96       -88       -24        96   ...       61        60         9        64        -9  
       0        88       104       -56       -12   ...      -29       112       -87       -32       -87  
    -128       -85        40        86      -120   ...      -53        -8        69         0      -119  
       0        66       -22       -79      -116   ...      -31      -108       107       -64        69  
     -64      -101       -76       -62        96   ...      -42        64        36       104       -79  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 11).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 12).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 13).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 14).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 15).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 16).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 17).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 18).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 19).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 20).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 21).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 22).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 23).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 24).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 25).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 26).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 27).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 28).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 29).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 30).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 31).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 32).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 33).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 34).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 35).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 36).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 37).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 38).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 39).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 40).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 41).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 42).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 43).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 44).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 45).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 46).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 47).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 48).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 49).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 50).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 51).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 52).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 53).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 54).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 55).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 56).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 57).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 58).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 59).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 60).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 61).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 62).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 63).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 64).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 65).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 66).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 67).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 68).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 69).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 70).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 71).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 72).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 73).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 74).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 75).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 76).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 77).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 78).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 79).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 80).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 81).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 82).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 83).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 84).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 85).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 86).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 87).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 88).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 89).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 90).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 91).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 92).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 93).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 94).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 95).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 96).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 97).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 98).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 99).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 100).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 101).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 102).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 103).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 104).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 105).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 106).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 107).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 108).
Verifying against reference matmul ...
Verify time: 2.00 s.
Running Kernel (iteration 109).
Verifying against reference matmul ...
Verify time: 2.00 s.

Avg NPU matmul time: 2170.93us.
Avg NPU gflops: 791.17

Min NPU matmul time: 568.00us.
Max NPU gflops: 3023.89

Max NPU matmul time: 3477.00us.
Min NPU gflops: 493.98

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 384 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x384x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x384x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x384x2240_96x96x112_4rx4c.txt ../build/aie_4992x384x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:02:24 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x384x2240_96x96x112_4rx4c.xclbin -i build/insts_4992x384x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 384 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x384x2240
Sequence instr count: 2868
Loading xclbin: build/final_4992x384x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x384x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -24       110       -86        32   ...     -126       -88        39       118       -55  
       0        61       110        78       -80   ...       37       -60       -63       -44        46  
     -64        41        18        12       -84   ...       49      -120       -42        92        10  
       0      -119        40       -70        76   ...      -68       -64       -37       -84       -75  
     -64        67        36       -69        -8   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3210.56us.
Avg NPU gflops: 2674.87

Min NPU matmul time: 1589.00us.
Max NPU gflops: 5404.55

Max NPU matmul time: 4073.00us.
Min NPU gflops: 2108.48

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 384 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x384x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x384x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x384x4032_96x96x112_4rx4c.txt ../build/aie_4992x384x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x384x4032_96x96x112_4rx4c.xclbin -i build/insts_4992x384x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 384 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x384x4032
Sequence instr count: 2868
Loading xclbin: build/final_4992x384x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x384x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        32       120        38        56   ...       40        92       115       -90        75  
       0        43        80        22       -20   ...      -48       -36         6        70       -88  
       0       -92       -14        41        48   ...      122       -32       -20      -106      -108  
       0       -87       -32       -13       124   ...       27         4       -44       -52         9  
      64      -117        22       -89        56   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3333.22us.
Avg NPU gflops: 4637.59

Min NPU matmul time: 2712.00us.
Max NPU gflops: 5699.89

Max NPU matmul time: 3997.00us.
Min NPU gflops: 3867.43

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 384 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x384x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x384x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x384x5824_96x96x112_4rx4c.txt ../build/aie_4992x384x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x384x5824_96x96x112_4rx4c.xclbin -i build/insts_4992x384x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 384 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x384x5824
Sequence instr count: 2868
Loading xclbin: build/final_4992x384x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x384x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        54        82        -6       -96   ...       47      -120       110      -126       -64  
       0         2       -78       -68        52   ...      104        -8        94        62        -5  
       0      -121       116      -116        76   ...      -15        64       -35       -20        11  
       0        49        16      -127         4   ...       23       -88       -27       -14       109  
    -128        48      -112        93        20   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5789.08us.
Avg NPU gflops: 3856.98

Min NPU matmul time: 4666.00us.
Max NPU gflops: 4785.34

Max NPU matmul time: 8258.00us.
Min NPU gflops: 2703.85

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 384 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x384x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x384x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x384x7616_96x96x112_4rx4c.txt ../build/aie_4992x384x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x384x7616_96x96x112_4rx4c.xclbin -i build/insts_4992x384x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 384 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x384x7616
Sequence instr count: 2868
Loading xclbin: build/final_4992x384x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x384x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -75       112       -92       -96   ...       -9       -84       -51        98        17  
       0        85       -26       -64       -92   ...      -16       -72        55      -122      -101  
       0       -13        74       -25       -72   ...        9       -48       -40       -24       -17  
    -128       -22       116        -5        12   ...      -77        20       -11        16       -48  
      64       -21        42       -33        12   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 8172.88us.
Avg NPU gflops: 3572.63

Min NPU matmul time: 6092.00us.
Max NPU gflops: 4792.95

Max NPU matmul time: 11027.00us.
Min NPU gflops: 2647.92

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 1920 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x1920x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x1920x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x1920x448_96x96x112_4rx4c.txt ../build/aie_4992x1920x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x1920x448_96x96x112_4rx4c.xclbin -i build/insts_4992x1920x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 1920 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x1920x448
Sequence instr count: 2868
Loading xclbin: build/final_4992x1920x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x1920x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        67        36       -69        -8   ...      -88         8        52      -120       -87  
       0       -48       -92        22       -24   ...       62        36       -68       -44        16  
       0       -68        64       121        96   ...       79       100       -43         6        68  
       0       -24        54       -65      -116   ...      -43        96        19       -30       -10  
       0       -28       -98        70      -112   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3158.68us.
Avg NPU gflops: 2718.81

Min NPU matmul time: 1545.00us.
Max NPU gflops: 5558.47

Max NPU matmul time: 3943.00us.
Min NPU gflops: 2178.00

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 1920 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x1920x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x1920x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x1920x2240_96x96x112_4rx4c.txt ../build/aie_4992x1920x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x1920x2240_96x96x112_4rx4c.xclbin -i build/insts_4992x1920x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 1920 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x1920x2240
Sequence instr count: 2868
Loading xclbin: build/final_4992x1920x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x1920x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        35        36        13       -12   ...      111         0        35       100        85  
       0       113        16       113      -104   ...       11       -44        20       110        45  
       0       -17       -44       -16        20   ...       64       -36        -1         4        80  
    -128        -7       -60        15        32   ...      -85        -4         1        50       -78  
      64       -98        72      -108       104   ...       12       -56      -106         0       -63  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 7481.06us.
Avg NPU gflops: 5739.72

Min NPU matmul time: 6792.00us.
Max NPU gflops: 6322.02

Max NPU matmul time: 9505.00us.
Min NPU gflops: 4517.54

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 1920 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x1920x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x1920x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x1920x4032_96x96x112_4rx4c.txt ../build/aie_4992x1920x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x1920x4032_96x96x112_4rx4c.xclbin -i build/insts_4992x1920x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 1920 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x1920x4032
Sequence instr count: 2868
Loading xclbin: build/final_4992x1920x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x1920x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -87      -120        89       -84   ...       15       -44        86       -24        67  
       0       -72        30        46       -96   ...      -25        84       -92       -68        56  
     -64         6        26        56       -72   ...      -12       -28       -25       -24       -19  
       0       -30        96        58        96   ...       57        52         8       -72      -126  
     -64        68       -30       -81       -60   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 13432.98us.
Avg NPU gflops: 5753.79

Min NPU matmul time: 12155.00us.
Max NPU gflops: 6358.74

Max NPU matmul time: 15441.00us.
Min NPU gflops: 5005.54

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 1920 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x1920x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x1920x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x1920x5824_96x96x112_4rx4c.txt ../build/aie_4992x1920x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x1920x5824_96x96x112_4rx4c.xclbin -i build/insts_4992x1920x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 1920 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x1920x5824
Sequence instr count: 2868
Loading xclbin: build/final_4992x1920x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x1920x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -90       102        95        24   ...      -30        24        45      -100      -120  
       0       104       -58       -75         4   ...      -82       120        15       -42        87  
    -128       -34        -4        90        12   ...      -96        36       107        56        23  
       0       -14       116      -108       -20   ...       85       -12       -91       -68       -52  
    -128        59       104        79       -28   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 18852.21us.
Avg NPU gflops: 5921.95

Min NPU matmul time: 17655.00us.
Max NPU gflops: 6323.53

Max NPU matmul time: 21471.00us.
Min NPU gflops: 5199.66

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 1920 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x1920x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x1920x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x1920x7616_96x96x112_4rx4c.txt ../build/aie_4992x1920x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x1920x7616_96x96x112_4rx4c.xclbin -i build/insts_4992x1920x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 1920 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x1920x7616
Sequence instr count: 2868
Loading xclbin: build/final_4992x1920x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x1920x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        78        68        81        -4   ...      -48        60        50      -100       -84  
       0        40        56       -50       -80   ...       15       -36        17       122       -65  
     -64       -33      -104      -107       -88   ...      106       -84        54       -52       101  
    -128        41        30        77       -52   ...      -32        -8       -66        16       125  
      64      -128        76        45       -44   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 24222.00us.
Avg NPU gflops: 6027.30

Min NPU matmul time: 22837.00us.
Max NPU gflops: 6392.84

Max NPU matmul time: 26575.00us.
Min NPU gflops: 5493.63

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 3456 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x3456x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x3456x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x3456x448_96x96x112_4rx4c.txt ../build/aie_4992x3456x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x3456x448_96x96x112_4rx4c.xclbin -i build/insts_4992x3456x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 3456 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x3456x448
Sequence instr count: 2868
Loading xclbin: build/final_4992x3456x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x3456x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        99       -10        -5      -108   ...      -37        16       112        20       112  
       0       101       -72         6        32   ...      120        92       -69      -114      -126  
     -64       117       118        90       104   ...      -28         8       -23        62      -120  
       0       -85      -104       -13        72   ...       72       124        29      -122       -67  
    -128        25       112       100       -88   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3312.83us.
Avg NPU gflops: 4666.13

Min NPU matmul time: 2661.00us.
Max NPU gflops: 5809.13

Max NPU matmul time: 4748.00us.
Min NPU gflops: 3255.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 3456 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x3456x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x3456x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x3456x2240_96x96x112_4rx4c.txt ../build/aie_4992x3456x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x3456x2240_96x96x112_4rx4c.xclbin -i build/insts_4992x3456x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 3456 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x3456x2240
Sequence instr count: 2868
Loading xclbin: build/final_4992x3456x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x3456x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       126         2        36   ...      115        -4        19        74       -50  
       0        70        18        35       -56   ...      -35       -36      -116        36        18  
       0       -72       -54        78       -88   ...       34       -32       -57       -60       -24  
       0        69        80       -80       -16   ...     -128       -96       106      -120       -80  
    -128       -74       -72        24        44   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 12893.05us.
Avg NPU gflops: 5994.74

Min NPU matmul time: 11980.00us.
Max NPU gflops: 6451.63

Max NPU matmul time: 14110.00us.
Min NPU gflops: 5477.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 3456 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x3456x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x3456x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x3456x4032_96x96x112_4rx4c.txt ../build/aie_4992x3456x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x3456x4032_96x96x112_4rx4c.xclbin -i build/insts_4992x3456x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 3456 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x3456x4032
Sequence instr count: 2868
Loading xclbin: build/final_4992x3456x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x3456x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64       -14       126        72       -96   ...     -117        68        89       -92        17  
       0        49       -54       -46       108   ...      -98      -124      -117       -80        37  
       0       -30       -84        82       100   ...       32        84      -119        72      -107  
    -128       116         2        -6      -120   ...       84      -116        37         0        81  
     -64        80       -86        73      -112   ...      -72       120        41         2        37  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 22844.97us.
Avg NPU gflops: 6089.87

Min NPU matmul time: 21764.00us.
Max NPU gflops: 6392.34

Max NPU matmul time: 25552.00us.
Min NPU gflops: 5444.70

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 3456 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x3456x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x3456x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x3456x5824_96x96x112_4rx4c.txt ../build/aie_4992x3456x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x3456x5824_96x96x112_4rx4c.xclbin -i build/insts_4992x3456x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 3456 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x3456x5824
Sequence instr count: 2868
Loading xclbin: build/final_4992x3456x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x3456x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        87      -104       112       -88   ...      126        16       118        48        99  
       0        23        86        93        16   ...        8      -112       113       -50        45  
       0      -125       -52        35        52   ...      -99      -100        -7       100      -117  
       0       -68       -68        78        88   ...      -53      -108       125       -28        63  
     -64        95       112        30      -104   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 32492.76us.
Avg NPU gflops: 6184.62

Min NPU matmul time: 31265.00us.
Max NPU gflops: 6427.49

Max NPU matmul time: 33696.00us.
Min NPU gflops: 5963.78

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 3456 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x3456x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x3456x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x3456x7616_96x96x112_4rx4c.txt ../build/aie_4992x3456x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x3456x7616_96x96x112_4rx4c.xclbin -i build/insts_4992x3456x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 3456 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x3456x7616
Sequence instr count: 2868
Loading xclbin: build/final_4992x3456x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x3456x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -108        32       120       104   ...      113      -116        24        10        11  
       0        70       122       -86      -120   ...     -118       -44        11       -24        22  
    -128       -49        98       -41       116   ...       73        72       -16        74        76  
       0        16        92       -47        40   ...      118       -96        62        52        81  
    -128        14        72       116       -40   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 41997.82us.
Avg NPU gflops: 6257.18

Min NPU matmul time: 40784.00us.
Max NPU gflops: 6443.40

Max NPU matmul time: 45066.00us.
Min NPU gflops: 5831.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 4992 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x4992x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x4992x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x4992x448_96x96x112_4rx4c.txt ../build/aie_4992x4992x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x4992x448_96x96x112_4rx4c.xclbin -i build/insts_4992x4992x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 4992 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x4992x448
Sequence instr count: 2868
Loading xclbin: build/final_4992x4992x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x4992x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        35        44         8        84   ...       45      -104       -17        60         5  
       0       -60      -104      -106       -96   ...       60      -120       -57        72        -1  
     -64       117        26       105       -60   ...       51        80       124      -120       -74  
    -128       123       -48       -78       108   ...     -113       -64       -49      -118       -38  
    -128       -14        22        84        28   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 4123.34us.
Avg NPU gflops: 5415.12

Min NPU matmul time: 3640.00us.
Max NPU gflops: 6134.17

Max NPU matmul time: 6352.00us.
Min NPU gflops: 3515.17

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 4992 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x4992x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x4992x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x4992x2240_96x96x112_4rx4c.txt ../build/aie_4992x4992x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x4992x2240_96x96x112_4rx4c.xclbin -i build/insts_4992x4992x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 4992 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x4992x2240
Sequence instr count: 2868
Loading xclbin: build/final_4992x4992x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x4992x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -31      -116        66       -32   ...        8       124         5       -92       -27  
       0        64       122        75        84   ...      107       120        31        68       -43  
      64       124       -32       -41        84   ...      -58       -36       -20        26       115  
       0      -124        64       -16       -32   ...       62        36        10       -16       -97  
      64       108       -10        89       -96   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 18207.70us.
Avg NPU gflops: 6131.58

Min NPU matmul time: 17221.00us.
Max NPU gflops: 6482.89

Max NPU matmul time: 20354.00us.
Min NPU gflops: 5485.01

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 4992 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x4992x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x4992x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x4992x4032_96x96x112_4rx4c.txt ../build/aie_4992x4992x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x4992x4032_96x96x112_4rx4c.xclbin -i build/insts_4992x4992x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 4992 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x4992x4032
Sequence instr count: 2868
Loading xclbin: build/final_4992x4992x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x4992x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -117        88      -106      -120   ...      -52       -16        58        50        -2  
       0       -56        66        91       116   ...       68        84        -3       -36       -39  
       0        56        44       110      -128   ...      -90       -40      -127       -14       104  
       0       122        76        -1         8   ...       55        84        93         8         5  
       0       -45       -70       110       -20   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 31966.40us.
Avg NPU gflops: 6286.46

Min NPU matmul time: 30846.00us.
Max NPU gflops: 6514.80

Max NPU matmul time: 34096.00us.
Min NPU gflops: 5893.81

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 4992 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x4992x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x4992x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x4992x5824_96x96x112_4rx4c.txt ../build/aie_4992x4992x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x4992x5824_96x96x112_4rx4c.xclbin -i build/insts_4992x4992x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 4992 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x4992x5824
Sequence instr count: 2868
Loading xclbin: build/final_4992x4992x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x4992x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        36       114       -55        16   ...        6      -108       112        74        47  
       0      -110       -36       -57         0   ...      -77       -48       -51        94      -121  
      64       -32        40        91      -104   ...        4        92       -86       -72        45  
    -128       -49       -10       -83      -124   ...       30       -88       -88        70        34  
     -64       -54        26        99       -92   ...     -105        24       -32       120       -70  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 46059.59us.
Avg NPU gflops: 6302.03

Min NPU matmul time: 44948.00us.
Max NPU gflops: 6457.88

Max NPU matmul time: 48062.00us.
Min NPU gflops: 6039.47

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 4992 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x4992x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x4992x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x4992x7616_96x96x112_4rx4c.txt ../build/aie_4992x4992x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x4992x7616_96x96x112_4rx4c.xclbin -i build/insts_4992x4992x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 4992 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x4992x7616
Sequence instr count: 2868
Loading xclbin: build/final_4992x4992x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x4992x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -38      -106       -15        28   ...       60        88       -95       124        98  
       0        26         6        48      -116   ...      -96       -36        74         6       -32  
    -128       -33        16        83       -72   ...       98      -104        -5        82       -90  
    -128        21       -82       -74         8   ...       76       -84       -12       -36      -110  
     -64       -74       -78        12        -8   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 59478.49us.
Avg NPU gflops: 6381.84

Min NPU matmul time: 58292.00us.
Max NPU gflops: 6511.74

Max NPU matmul time: 61280.00us.
Min NPU gflops: 6194.23

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 6528 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x6528x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x6528x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x6528x448_96x96x112_4rx4c.txt ../build/aie_4992x6528x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x6528x448_96x96x112_4rx4c.xclbin -i build/insts_4992x6528x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 6528 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x6528x448
Sequence instr count: 2868
Loading xclbin: build/final_4992x6528x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x6528x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       113      -124        23      -128   ...       -5       -64        74       108       119  
       0       -61      -102       103        16   ...       42       108        33        30       -99  
      64       -55      -108        56        92   ...      -38        80       126       -46        81  
    -128       -76       124        -1      -124   ...       76       -20       107        16       111  
       0        25       -72        55      -112   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5674.18us.
Avg NPU gflops: 5145.88

Min NPU matmul time: 4699.00us.
Max NPU gflops: 6213.80

Max NPU matmul time: 7706.00us.
Min NPU gflops: 3789.08

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (1.0s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 6528 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x6528x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x6528x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x6528x2240_96x96x112_4rx4c.txt ../build/aie_4992x6528x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x6528x2240_96x96x112_4rx4c.xclbin -i build/insts_4992x6528x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 6528 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x6528x2240
Sequence instr count: 2868
Loading xclbin: build/final_4992x6528x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x6528x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        26       112       -31       112   ...      -49       -32       114      -116        38  
       0        -7        40        88        52   ...       56        -8       -21        24       100  
      64        89      -100      -115        44   ...     -113       -68      -100       -82       104  
       0       120        68        94        -4   ...      -88       -88       -19        94        99  
      64       -61        48       -28       116   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23398.43us.
Avg NPU gflops: 6239.45

Min NPU matmul time: 22384.00us.
Max NPU gflops: 6522.21

Max NPU matmul time: 25267.00us.
Min NPU gflops: 5778.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 6528 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x6528x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x6528x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x6528x4032_96x96x112_4rx4c.txt ../build/aie_4992x6528x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x6528x4032_96x96x112_4rx4c.xclbin -i build/insts_4992x6528x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 6528 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x6528x4032
Sequence instr count: 2868
Loading xclbin: build/final_4992x6528x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x6528x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -20        26       -60      -128   ...       62       -84       -70        -2         8  
       0       -90      -100        91       104   ...       -3        56       -46        80       -92  
    -128       -24       124      -122       -16   ...       72       -96        80       -98        23  
       0       -61        24      -126       -96   ...       59       -28       -82      -104       -51  
     -64      -116       -28       -76        -4   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 41313.49us.
Avg NPU gflops: 6360.82

Min NPU matmul time: 40178.00us.
Max NPU gflops: 6540.59

Max NPU matmul time: 43823.00us.
Min NPU gflops: 5996.57

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 6528 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x6528x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x6528x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x6528x5824_96x96x112_4rx4c.txt ../build/aie_4992x6528x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x6528x5824_96x96x112_4rx4c.xclbin -i build/insts_4992x6528x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 6528 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x6528x5824
Sequence instr count: 2868
Loading xclbin: build/final_4992x6528x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x6528x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        92        18       -69        68   ...     -122       -12       -29        36        82  
       0      -125        56       -40        36   ...       56        16        83        94       -29  
     -64        47       -82        60         4   ...       32        12       -84       106       118  
    -128         3        22       117        96   ...      121       108       -38        98        29  
       0        79      -120       111      -116   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 59325.92us.
Avg NPU gflops: 6398.26

Min NPU matmul time: 58007.00us.
Max NPU gflops: 6543.73

Max NPU matmul time: 61175.00us.
Min NPU gflops: 6204.86

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 4992 -K 6528 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_4992x6528x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_4992x6528x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_4992x6528x7616_96x96x112_4rx4c.txt ../build/aie_4992x6528x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_4992x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_4992x6528x7616_96x96x112_4rx4c.xclbin -i build/insts_4992x6528x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 4992 -K 6528 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 4992x6528x7616
Sequence instr count: 2868
Loading xclbin: build/final_4992x6528x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_4992x6528x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -110        90        66        60   ...        4       -80        90       126       123  
       0       110       -74        13       104   ...        9       116       -12       -90        96  
     -64       -14        -6        -4       -20   ...       15       -24        -3       -14       -47  
    -128       122        48         3       -32   ...       65       -68       -62        44        65  
    -128       -67       -96       -11       -40   ...      -54       -68       -40        40      -118  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 76788.92us.
Avg NPU gflops: 6464.17

Min NPU matmul time: 75816.00us.
Max NPU gflops: 6547.13

Max NPU matmul time: 79147.00us.
Min NPU gflops: 6271.58

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 384 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x384x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x384x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x384x448_96x96x112_4rx4c.txt ../build/aie_6528x384x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x384x448_96x96x112_4rx4c.xclbin -i build/insts_6528x384x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 384 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x384x448
Sequence instr count: 3732
Loading xclbin: build/final_6528x384x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x384x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -96       -88       -24        96   ...       61        60         9        64        -9  
       0        88       104       -56       -12   ...      -29       112       -87       -32       -87  
    -128       -85        40        86      -120   ...      -53        -8        69         0      -119  
       0        66       -22       -79      -116   ...      -31      -108       107       -64        69  
     -64      -101       -76       -62        96   ...      -42        64        36       104       -79  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 657.84us.
Avg NPU gflops: 3414.28

Min NPU matmul time: 606.00us.
Max NPU gflops: 3706.35

Max NPU matmul time: 730.00us.
Min NPU gflops: 3076.78

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 384 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x384x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x384x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x384x2240_96x96x112_4rx4c.txt ../build/aie_6528x384x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x384x2240_96x96x112_4rx4c.xclbin -i build/insts_6528x384x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 384 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x384x2240
Sequence instr count: 3732
Loading xclbin: build/final_6528x384x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x384x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -24       110       -86        32   ...     -126       -88        39       118       -55  
       0        61       110        78       -80   ...       37       -60       -63       -44        46  
     -64        41        18        12       -84   ...       49      -120       -42        92        10  
       0      -119        40       -70        76   ...      -68       -64       -37       -84       -75  
     -64        67        36       -69        -8   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3215.64us.
Avg NPU gflops: 3492.38

Min NPU matmul time: 2026.00us.
Max NPU gflops: 5543.06

Max NPU matmul time: 3993.00us.
Min NPU gflops: 2812.48

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 384 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x384x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x384x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x384x4032_96x96x112_4rx4c.txt ../build/aie_6528x384x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x384x4032_96x96x112_4rx4c.xclbin -i build/insts_6528x384x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 384 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x384x4032
Sequence instr count: 3732
Loading xclbin: build/final_6528x384x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x384x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        32       120        38        56   ...       40        92       115       -90        75  
       0        43        80        22       -20   ...      -48       -36         6        70       -88  
       0       -92       -14        41        48   ...      122       -32       -20      -106      -108  
       0       -87       -32       -13       124   ...       27         4       -44       -52         9  
      64      -117        22       -89        56   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3849.07us.
Avg NPU gflops: 5251.77

Min NPU matmul time: 3389.00us.
Max NPU gflops: 5964.72

Max NPU matmul time: 6016.00us.
Min NPU gflops: 3360.11

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 384 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x384x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x384x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x384x5824_96x96x112_4rx4c.txt ../build/aie_6528x384x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x384x5824_96x96x112_4rx4c.xclbin -i build/insts_6528x384x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 384 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x384x5824
Sequence instr count: 3732
Loading xclbin: build/final_6528x384x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x384x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        54        82        -6       -96   ...       47      -120       110      -126       -64  
       0         2       -78       -68        52   ...      104        -8        94        62        -5  
       0      -121       116      -116        76   ...      -15        64       -35       -20        11  
       0        49        16      -127         4   ...       23       -88       -27       -14       109  
    -128        48      -112        93        20   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6983.14us.
Avg NPU gflops: 4181.31

Min NPU matmul time: 6153.00us.
Max NPU gflops: 4745.43

Max NPU matmul time: 8337.00us.
Min NPU gflops: 3502.30

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 384 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x384x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x384x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x384x7616_96x96x112_4rx4c.txt ../build/aie_6528x384x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x384x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x384x7616_96x96x112_4rx4c.xclbin -i build/insts_6528x384x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 384 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x384x7616
Sequence instr count: 3732
Loading xclbin: build/final_6528x384x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x384x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -75       112       -92       -96   ...       -9       -84       -51        98        17  
       0        85       -26       -64       -92   ...      -16       -72        55      -122      -101  
       0       -13        74       -25       -72   ...        9       -48       -40       -24       -17  
    -128       -22       116        -5        12   ...      -77        20       -11        16       -48  
      64       -21        42       -33        12   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 10515.53us.
Avg NPU gflops: 3631.09

Min NPU matmul time: 9447.00us.
Max NPU gflops: 4041.80

Max NPU matmul time: 13057.00us.
Min NPU gflops: 2924.32

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 1920 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x1920x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x1920x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x1920x448_96x96x112_4rx4c.txt ../build/aie_6528x1920x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x1920x448_96x96x112_4rx4c.xclbin -i build/insts_6528x1920x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 1920 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x1920x448
Sequence instr count: 3732
Loading xclbin: build/final_6528x1920x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x1920x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        67        36       -69        -8   ...      -88         8        52      -120       -87  
       0       -48       -92        22       -24   ...       62        36       -68       -44        16  
       0       -68        64       121        96   ...       79       100       -43         6        68  
       0       -24        54       -65      -116   ...      -43        96        19       -30       -10  
       0       -28       -98        70      -112   ...       47        52         4       -26       -30  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3356.77us.
Avg NPU gflops: 3345.55

Min NPU matmul time: 1965.00us.
Max NPU gflops: 5715.14

Max NPU matmul time: 4934.00us.
Min NPU gflops: 2276.09

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 1920 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x1920x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x1920x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x1920x2240_96x96x112_4rx4c.txt ../build/aie_6528x1920x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x1920x2240_96x96x112_4rx4c.xclbin -i build/insts_6528x1920x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 1920 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x1920x2240
Sequence instr count: 3732
Loading xclbin: build/final_6528x1920x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x1920x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        35        36        13       -12   ...      111         0        35       100        85  
       0       113        16       113      -104   ...       11       -44        20       110        45  
       0       -17       -44       -16        20   ...       64       -36        -1         4        80  
    -128        -7       -60        15        32   ...      -85        -4         1        50       -78  
      64       -98        72      -108       104   ...       12       -56      -106         0       -63  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 9323.24us.
Avg NPU gflops: 6022.72

Min NPU matmul time: 8759.00us.
Max NPU gflops: 6410.69

Max NPU matmul time: 10684.00us.
Min NPU gflops: 5255.64

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 1920 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x1920x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x1920x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x1920x4032_96x96x112_4rx4c.txt ../build/aie_6528x1920x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x1920x4032_96x96x112_4rx4c.xclbin -i build/insts_6528x1920x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 1920 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x1920x4032
Sequence instr count: 3732
Loading xclbin: build/final_6528x1920x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x1920x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -87      -120        89       -84   ...       15       -44        86       -24        67  
       0       -72        30        46       -96   ...      -25        84       -92       -68        56  
     -64         6        26        56       -72   ...      -12       -28       -25       -24       -19  
       0       -30        96        58        96   ...       57        52         8       -72      -126  
     -64        68       -30       -81       -60   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 16901.18us.
Avg NPU gflops: 5980.19

Min NPU matmul time: 15848.00us.
Max NPU gflops: 6377.60

Max NPU matmul time: 19295.00us.
Min NPU gflops: 5238.26

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 1920 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x1920x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x1920x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x1920x5824_96x96x112_4rx4c.txt ../build/aie_6528x1920x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x1920x5824_96x96x112_4rx4c.xclbin -i build/insts_6528x1920x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 1920 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x1920x5824
Sequence instr count: 3732
Loading xclbin: build/final_6528x1920x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x1920x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -90       102        95        24   ...      -30        24        45      -100      -120  
       0       104       -58       -75         4   ...      -82       120        15       -42        87  
    -128       -34        -4        90        12   ...      -96        36       107        56        23  
       0       -14       116      -108       -20   ...       85       -12       -91       -68       -52  
    -128        59       104        79       -28   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 24269.41us.
Avg NPU gflops: 6015.52

Min NPU matmul time: 23124.00us.
Max NPU gflops: 6313.49

Max NPU matmul time: 26005.00us.
Min NPU gflops: 5614.04

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 1920 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x1920x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x1920x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x1920x7616_96x96x112_4rx4c.txt ../build/aie_6528x1920x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x1920x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x1920x7616_96x96x112_4rx4c.xclbin -i build/insts_6528x1920x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 1920 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x1920x7616
Sequence instr count: 3732
Loading xclbin: build/final_6528x1920x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x1920x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        78        68        81        -4   ...      -48        60        50      -100       -84  
       0        40        56       -50       -80   ...       15       -36        17       122       -65  
     -64       -33      -104      -107       -88   ...      106       -84        54       -52       101  
    -128        41        30        77       -52   ...      -32        -8       -66        16       125  
      64      -128        76        45       -44   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 31225.16us.
Avg NPU gflops: 6114.12

Min NPU matmul time: 29958.00us.
Max NPU gflops: 6372.73

Max NPU matmul time: 32520.00us.
Min NPU gflops: 5870.67

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 3456 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x3456x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x3456x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x3456x448_96x96x112_4rx4c.txt ../build/aie_6528x3456x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:29 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x3456x448_96x96x112_4rx4c.xclbin -i build/insts_6528x3456x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 3456 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x3456x448
Sequence instr count: 3732
Loading xclbin: build/final_6528x3456x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x3456x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        99       -10        -5      -108   ...      -37        16       112        20       112  
       0       101       -72         6        32   ...      120        92       -69      -114      -126  
     -64       117       118        90       104   ...      -28         8       -23        62      -120  
       0       -85      -104       -13        72   ...       72       124        29      -122       -67  
    -128        25       112       100       -88   ...       43       104        41        36       -92  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 3656.00us.
Avg NPU gflops: 5529.12

Min NPU matmul time: 3310.00us.
Max NPU gflops: 6107.08

Max NPU matmul time: 5918.00us.
Min NPU gflops: 3415.76

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 3456 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x3456x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x3456x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x3456x2240_96x96x112_4rx4c.txt ../build/aie_6528x3456x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x3456x2240_96x96x112_4rx4c.xclbin -i build/insts_6528x3456x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 3456 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x3456x2240
Sequence instr count: 3732
Loading xclbin: build/final_6528x3456x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x3456x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       127       126         2        36   ...      115        -4        19        74       -50  
       0        70        18        35       -56   ...      -35       -36      -116        36        18  
       0       -72       -54        78       -88   ...       34       -32       -57       -60       -24  
       0        69        80       -80       -16   ...     -128       -96       106      -120       -80  
    -128       -74       -72        24        44   ...       95      -120      -124       -50       -67  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 16546.56us.
Avg NPU gflops: 6108.35

Min NPU matmul time: 15698.00us.
Max NPU gflops: 6438.54

Max NPU matmul time: 17559.00us.
Min NPU gflops: 5756.15

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 3456 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x3456x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x3456x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x3456x4032_96x96x112_4rx4c.txt ../build/aie_6528x3456x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x3456x4032_96x96x112_4rx4c.xclbin -i build/insts_6528x3456x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 3456 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x3456x4032
Sequence instr count: 3732
Loading xclbin: build/final_6528x3456x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x3456x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64       -14       126        72       -96   ...     -117        68        89       -92        17  
       0        49       -54       -46       108   ...      -98      -124      -117       -80        37  
       0       -30       -84        82       100   ...       32        84      -119        72      -107  
    -128       116         2        -6      -120   ...       84      -116        37         0        81  
     -64        80       -86        73      -112   ...      -72       120        41         2        37  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 29243.02us.
Avg NPU gflops: 6221.31

Min NPU matmul time: 28088.00us.
Max NPU gflops: 6477.14

Max NPU matmul time: 31867.00us.
Min NPU gflops: 5709.04

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 3456 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x3456x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x3456x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x3456x5824_96x96x112_4rx4c.txt ../build/aie_6528x3456x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x3456x5824_96x96x112_4rx4c.xclbin -i build/insts_6528x3456x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 3456 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x3456x5824
Sequence instr count: 3732
Loading xclbin: build/final_6528x3456x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x3456x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0        87      -104       112       -88   ...      126        16       118        48        99  
       0        23        86        93        16   ...        8      -112       113       -50        45  
       0      -125       -52        35        52   ...      -99      -100        -7       100      -117  
       0       -68       -68        78        88   ...      -53      -108       125       -28        63  
     -64        95       112        30      -104   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 42079.24us.
Avg NPU gflops: 6245.07

Min NPU matmul time: 41131.00us.
Max NPU gflops: 6389.05

Max NPU matmul time: 43920.00us.
Min NPU gflops: 5983.33

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 3456 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x3456x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x3456x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x3456x7616_96x96x112_4rx4c.txt ../build/aie_6528x3456x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x3456x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x3456x7616_96x96x112_4rx4c.xclbin -i build/insts_6528x3456x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 3456 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x3456x7616
Sequence instr count: 3732
Loading xclbin: build/final_6528x3456x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x3456x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -108        32       120       104   ...      113      -116        24        10        11  
       0        70       122       -86      -120   ...     -118       -44        11       -24        22  
    -128       -49        98       -41       116   ...       73        72       -16        74        76  
       0        16        92       -47        40   ...      118       -96        62        52        81  
    -128        14        72       116       -40   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 54463.94us.
Avg NPU gflops: 6309.60

Min NPU matmul time: 53424.00us.
Max NPU gflops: 6432.42

Max NPU matmul time: 56913.00us.
Min NPU gflops: 6038.09

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 4992 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x4992x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x4992x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x4992x448_96x96x112_4rx4c.txt ../build/aie_6528x4992x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x4992x448_96x96x112_4rx4c.xclbin -i build/insts_6528x4992x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 4992 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x4992x448
Sequence instr count: 3732
Loading xclbin: build/final_6528x4992x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x4992x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        35        44         8        84   ...       45      -104       -17        60         5  
       0       -60      -104      -106       -96   ...       60      -120       -57        72        -1  
     -64       117        26       105       -60   ...       51        80       124      -120       -74  
    -128       123       -48       -78       108   ...     -113       -64       -49      -118       -38  
    -128       -14        22        84        28   ...      -62       -36      -103       -26       113  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 5622.23us.
Avg NPU gflops: 5193.43

Min NPU matmul time: 4774.00us.
Max NPU gflops: 6116.18

Max NPU matmul time: 8135.00us.
Min NPU gflops: 3589.26

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.6s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 4992 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x4992x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x4992x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x4992x2240_96x96x112_4rx4c.txt ../build/aie_6528x4992x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x4992x2240_96x96x112_4rx4c.xclbin -i build/insts_6528x4992x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 4992 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x4992x2240
Sequence instr count: 3732
Loading xclbin: build/final_6528x4992x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x4992x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64       -31      -116        66       -32   ...        8       124         5       -92       -27  
       0        64       122        75        84   ...      107       120        31        68       -43  
      64       124       -32       -41        84   ...      -58       -36       -20        26       115  
       0      -124        64       -16       -32   ...       62        36        10       -16       -97  
      64       108       -10        89       -96   ...      -22       -32        19       126       -64  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 23358.73us.
Avg NPU gflops: 6250.05

Min NPU matmul time: 22447.00us.
Max NPU gflops: 6503.91

Max NPU matmul time: 25426.00us.
Min NPU gflops: 5741.89

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 4992 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x4992x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x4992x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x4992x4032_96x96x112_4rx4c.txt ../build/aie_6528x4992x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x4992x4032_96x96x112_4rx4c.xclbin -i build/insts_6528x4992x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 4992 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x4992x4032
Sequence instr count: 3732
Loading xclbin: build/final_6528x4992x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x4992x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64      -117        88      -106      -120   ...      -52       -16        58        50        -2  
       0       -56        66        91       116   ...       68        84        -3       -36       -39  
       0        56        44       110      -128   ...      -90       -40      -127       -14       104  
       0       122        76        -1         8   ...       55        84        93         8         5  
       0       -45       -70       110       -20   ...      -15        52       122       -28       115  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 41492.18us.
Avg NPU gflops: 6333.43

Min NPU matmul time: 40617.00us.
Max NPU gflops: 6469.90

Max NPU matmul time: 43116.00us.
Min NPU gflops: 6094.90

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 4992 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x4992x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x4992x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x4992x5824_96x96x112_4rx4c.txt ../build/aie_6528x4992x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x4992x5824_96x96x112_4rx4c.xclbin -i build/insts_6528x4992x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 4992 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x4992x5824
Sequence instr count: 3732
Loading xclbin: build/final_6528x4992x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x4992x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
     -64        36       114       -55        16   ...        6      -108       112        74        47  
       0      -110       -36       -57         0   ...      -77       -48       -51        94      -121  
      64       -32        40        91      -104   ...        4        92       -86       -72        45  
    -128       -49       -10       -83      -124   ...       30       -88       -88        70        34  
     -64       -54        26        99       -92   ...     -105        24       -32       120       -70  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 59467.74us.
Avg NPU gflops: 6383.00

Min NPU matmul time: 58136.00us.
Max NPU gflops: 6529.21

Max NPU matmul time: 61641.00us.
Min NPU gflops: 6157.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 4992 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x4992x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x4992x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x4992x7616_96x96x112_4rx4c.txt ../build/aie_6528x4992x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x4992x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x4992x7616_96x96x112_4rx4c.xclbin -i build/insts_6528x4992x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 4992 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x4992x7616
Sequence instr count: 3732
Loading xclbin: build/final_6528x4992x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x4992x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
       0       -38      -106       -15        28   ...       60        88       -95       124        98  
       0        26         6        48      -116   ...      -96       -36        74         6       -32  
    -128       -33        16        83       -72   ...       98      -104        -5        82       -90  
    -128        21       -82       -74         8   ...       76       -84       -12       -36      -110  
     -64       -74       -78        12        -8   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 77351.15us.
Avg NPU gflops: 6417.19

Min NPU matmul time: 76182.00us.
Max NPU gflops: 6515.67

Max NPU matmul time: 79390.00us.
Min NPU gflops: 6252.39

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 6528 -N 448 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x6528x448_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x6528x448_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x6528x448_96x96x112_4rx4c.txt ../build/aie_6528x6528x448_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x448_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x6528x448_96x96x112_4rx4c.xclbin -i build/insts_6528x6528x448_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 6528 -N 448 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x6528x448
Sequence instr count: 3732
Loading xclbin: build/final_6528x6528x448_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x6528x448_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -65       -44      -128       -20        69  
       0       -81        38        61        68   ...      -44        72         7        20      -127  
       0        84        50       -18        -8   ...      -90       -72       -11       -80       -93  
     -64        58       -52        35       -88   ...     -108      -112       -46        -2       -46  
       0       -32      -112       -68       -12   ...       -5      -108       -76        74       -57  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       113      -124        23      -128   ...       -5       -64        74       108       119  
       0       -61      -102       103        16   ...       42       108        33        30       -99  
      64       -55      -108        56        92   ...      -38        80       126       -46        81  
    -128       -76       124        -1      -124   ...       76       -20       107        16       111  
       0        25       -72        55      -112   ...       97         0      -116         6        60  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 6683.43us.
Avg NPU gflops: 5713.06

Min NPU matmul time: 6078.00us.
Max NPU gflops: 6282.14

Max NPU matmul time: 8632.00us.
Min NPU gflops: 4423.41

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.7s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 6528 -N 2240 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x6528x2240_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x6528x2240_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x6528x2240_96x96x112_4rx4c.txt ../build/aie_6528x6528x2240_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:17 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x2240_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x6528x2240_96x96x112_4rx4c.xclbin -i build/insts_6528x6528x2240_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 6528 -N 2240 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x6528x2240
Sequence instr count: 3732
Loading xclbin: build/final_6528x6528x2240_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x6528x2240_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       -5      -108       -76        74       -57  
     -64        89        38        31      -104   ...       96       -28       -87       -50       103  
    -128       -71       -12      -114       -48   ...       75       108        16       -30        58  
    -128       112        76       -66       -76   ...      126        24       -30        58      -105  
       0        41      -122        55        28   ...      -32        32       101       -76        79  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128        26       112       -31       112   ...      -49       -32       114      -116        38  
       0        -7        40        88        52   ...       56        -8       -21        24       100  
      64        89      -100      -115        44   ...     -113       -68      -100       -82       104  
       0       120        68        94        -4   ...      -88       -88       -19        94        99  
      64       -61        48       -28       116   ...       77        72       104        14        66  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 30053.19us.
Avg NPU gflops: 6352.54

Min NPU matmul time: 29158.00us.
Max NPU gflops: 6547.58

Max NPU matmul time: 32203.00us.
Min NPU gflops: 5928.46

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 6528 -N 4032 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x6528x4032_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x6528x4032_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x6528x4032_96x96x112_4rx4c.txt ../build/aie_6528x6528x4032_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x4032_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x6528x4032_96x96x112_4rx4c.xclbin -i build/insts_6528x6528x4032_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 6528 -N 4032 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x6528x4032
Sequence instr count: 3732
Loading xclbin: build/final_6528x6528x4032_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x6528x4032_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...      -44        56        -6       112        47  
     -64        12       -48        73         0   ...       69       -12        43       114        78  
    -128        74        10       -92        72   ...      -74      -116        82       -84        42  
      64        94       -30        71       124   ...     -106       -24        21        32        15  
       0      -105       122        73       -88   ...       32        72       107       -10       -40  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128       -20        26       -60      -128   ...       62       -84       -70        -2         8  
       0       -90      -100        91       104   ...       -3        56       -46        80       -92  
    -128       -24       124      -122       -16   ...       72       -96        80       -98        23  
       0       -61        24      -126       -96   ...       59       -28       -82      -104       -51  
     -64      -116       -28       -76        -4   ...       95      -104       -16         0       -95  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 53472.76us.
Avg NPU gflops: 6426.56

Min NPU matmul time: 52427.00us.
Max NPU gflops: 6554.75

Max NPU matmul time: 54658.00us.
Min NPU gflops: 6287.20

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 6528 -N 5824 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x6528x5824_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x6528x5824_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x6528x5824_96x96x112_4rx4c.txt ../build/aie_6528x6528x5824_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x5824_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x6528x5824_96x96x112_4rx4c.xclbin -i build/insts_6528x6528x5824_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 6528 -N 5824 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x6528x5824
Sequence instr count: 3732
Loading xclbin: build/final_6528x6528x5824_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x6528x5824_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       24      -128       -39        42         1  
       0        47      -118         9       -24   ...       -3       -16        65       -42       -56  
    -128         1        62       -45        36   ...       -9      -108       119      -104       118  
     -64       106        56        50      -108   ...      -17        36        59        -4        61  
       0       127       -98        42      -104   ...      -78       116       -36       -70       117  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
      64        92        18       -69        68   ...     -122       -12       -29        36        82  
       0      -125        56       -40        36   ...       56        16        83        94       -29  
     -64        47       -82        60         4   ...       32        12       -84       106       118  
    -128         3        22       117        96   ...      121       108       -38        98        29  
       0        79      -120       111      -116   ...       30       -12        -2        -6        23  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 77028.38us.
Avg NPU gflops: 6444.08

Min NPU matmul time: 75913.00us.
Max NPU gflops: 6538.76

Max NPU matmul time: 79097.00us.
Min NPU gflops: 6275.55

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=int8_t -DDTYPE_OUT=int8_t -DDTYPE_ACC=int8_t" \
	cmake /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/.. -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array_optimized -Dsubdir=whole_array
-- The C compiler identification is GNU 13.1.0
-- The CXX compiler identification is GNU 13.1.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found version "1.74.0")
-- Configuring done (0.5s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[2]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[3]: Entering directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array_optimized.dir/scratch/endrtaka/matmul_dir/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array_optimized.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array_optimized
gmake[3]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
[100%] Built target whole_array_optimized
gmake[2]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
gmake[1]: Leaving directory '/scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/_build'
cp _build/whole_array_optimized whole_array_optimized.exe 
mkdir -p build
python3 /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/whole_array_optimized.py -m 96 -k 96 -n 112 -mtk 384 -ktn 384 --n-aie-cols 4 --n-aie-rows 4 --b-col-maj 0 -M 6528 -K 6528 -N 7616 --dtype_in i8 --dtype_out i8 --trace_size 0 > build/aie_6528x6528x7616_96x96x112_4rx4c.mlir
mkdir -p build
ar rvs build/mm_96x96x112.o precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
a - precompiled_rowmaj_kernels/mm_b_row_maj_96x96x112_i8_i8.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-cdo --no-compile-host --xclbin-name=final_6528x6528x7616_96x96x112_4rx4c.xclbin \
			  \
			--aie-generate-npu --npu-insts-name=insts_6528x6528x7616_96x96x112_4rx4c.txt ../build/aie_6528x6528x7616_96x96x112_4rx4c.mlir
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip


****** Bootgen v2024.1
  **** Build date : Feb  4 2025-04:13:21
    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.


[INFO]   : Bootimage generated successfully

Info: Embedded Metadata section is missing project.platform.device.core element, adding it.
Found xchesscc at /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools
 AIE Compilation: ━━━━━━━━━━━━━━━━━━━━━━━━━ 100% 0:00:00 0:00:16 17/17 4 Workers
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/endrtaka/matmul_dir/mlir-aie/programming_examples/basic/matrix_multiplication_experiments/whole_array/build/aie_6528x6528x7616_96x96x112_4rx4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array_optimized.exe -x build/final_6528x6528x7616_96x96x112_4rx4c.xclbin -i build/insts_6528x6528x7616_96x96x112_4rx4c.txt -k MLIR_AIE -M 6528 -K 6528 -N 7616 -v 2 --warmup 10 --iters 100 --b_col_maj 0
Matrix size 6528x6528x7616
Sequence instr count: 3732
Loading xclbin: build/final_6528x6528x7616_96x96x112_4rx4c.xclbin
Kernel opcode: MLIR_AIE
Name: MLIR_AIE
Registering xclbin: build/final_6528x6528x7616_96x96x112_4rx4c.xclbin
Getting hardware context.
Getting handle to kernel:MLIR_AIE
Writing data into buffer objects.
DTYPE_IN  = int8_t
DTYPE_OUT = int8_t
Verification tolerance 0 absolute, 0 relative.
A = 
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
       0         1         2         3         4   ...      123       124       125       126       127  
    -128      -127      -126      -125      -124   ...       -5        -4        -3        -2        -1  
B = 
       0       -45        92      -103       -88   ...       96        68      -107        96        16  
    -128       -45       120       111       -36   ...      -53         0        94        44       -38  
    -128      -116       -42       122       -52   ...      -14      -108        84        78       101  
       0        48       122      -120         0   ...      -70       -84        63        22        52  
       0       -60        98       -84       -80   ...      -34       -16       -96       -64       127  
    ...       ...       ...       ...       ...    ...     ...       ...       ...       ...       ...   
    -128      -110        90        66        60   ...        4       -80        90       126       123  
       0       110       -74        13       104   ...        9       116       -12       -90        96  
     -64       -14        -6        -4       -20   ...       15       -24        -3       -14       -47  
    -128       122        48         3       -32   ...       65       -68       -62        44        65  
    -128       -67       -96       -11       -40   ...      -54       -68       -40        40      -118  
Running Kernel (iteration 0).
Running Kernel (iteration 1).
Running Kernel (iteration 2).
Running Kernel (iteration 3).
Running Kernel (iteration 4).
Running Kernel (iteration 5).
Running Kernel (iteration 6).
Running Kernel (iteration 7).
Running Kernel (iteration 8).
Running Kernel (iteration 9).
Running Kernel (iteration 10).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 11).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 12).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 13).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 14).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 15).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 16).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 17).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 18).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 19).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 20).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 21).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 22).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 23).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 24).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 25).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 26).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 27).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 28).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 29).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 30).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 31).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 32).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 33).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 34).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 35).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 36).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 37).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 38).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 39).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 40).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 41).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 42).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 43).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 44).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 45).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 46).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 47).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 48).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 49).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 50).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 51).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 52).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 53).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 54).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 55).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 56).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 57).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 58).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 59).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 60).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 61).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 62).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 63).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 64).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 65).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 66).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 67).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 68).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 69).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 70).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 71).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 72).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 73).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 74).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 75).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 76).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 77).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 78).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 79).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 80).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 81).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 82).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 83).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 84).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 85).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 86).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 87).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 88).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 89).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 90).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 91).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 92).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 93).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 94).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 95).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 96).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 97).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 98).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 99).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 100).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 101).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 102).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 103).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 104).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 105).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 106).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 107).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 108).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.
Running Kernel (iteration 109).
Verifying 1 random samples against reference matmul ...

Verify time: 0.00 s.

Avg NPU matmul time: 100034.94us.
Avg NPU gflops: 6488.82

Min NPU matmul time: 99035.00us.
Max NPU gflops: 6554.33

Max NPU matmul time: 101659.00us.
Min NPU gflops: 6385.15

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build *.exe
