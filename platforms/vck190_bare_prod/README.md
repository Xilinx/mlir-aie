# VCK190 Bare Platform (2021.2)
This bare platform is built with 2021.2 vitis/ vivado/ petalinux tools and consists of a relatively empty versal deign (CIPS, AI Array, clock/ reset, NoC, BRAM). The build process consist of 3 steps: vivado, petalinux, aie_platform.

1. Vivado design (after 2020.1, we can no longer make explicity AI array connections vivado). This generates the .xsa file.
2. Petalinux design based on .xsa and creates a embedded platform + sysroot.
3. Vitis design which compiles a 32 GMIO AIE design to enable all NoC NMU/NSU connections so shimDMAs are enabled. This rebuilds the design targeting the platform generated by steps 1-2. 

The only tool requirement for this to run should be Vitis/Vivado/Petalinux 2021.2 which has its own sw/hw requirements. There was an issue where the program 'dot' which is used by aiecompielr needed to be installed so you can do that with:
`sudo apt-get install graphwiz`

Once you've run the top level make, you should have sd_card/sd_card.img along with a sysroot which can be found at:
`/sw_comp/sysroots/cortexa72-cortexa53-xilinx-linux`

Running the aiecc.py python build script on a design like those in the unit tests would be:
```
aiecc.py -v --aie-generate-xaiev2 --sysroot=/group/xrlabs2/platforms/vck190_prod_bare_2021.2_sysroot/ ./aie.mlir -I<mlir-aie install area>/runtime_lib <mlir-aie install area>/runtime_lib/test_library.cpp ./test.cpp -o test.elf
```

You can then copy the files over to the board and run them on the board to test.

